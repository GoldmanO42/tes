/*
 Nielsen SDK package v6.0.0.734 
 (c) 2025 The Nielsen Company 
*/
/*CryptoJS v3.1.2 License Info code.google.com / p / crypto - js - (c) 2009-2013 by Jeff Mott. All rights reserved. code.google.com / p / crypto - js / wiki / License Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/ or other materials provided with the distribution.3.Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=!0,a=!1;function n(e){a&&console&&console.log&&console.log(e)}try{n("BSDK check: Checking for ES5 array functions that BSDK uses");var r=new Array("test1","test2","test3");r.forEach(function(e){}),r.indexOf("test"),n("BSDK check: Array functionality passed"),n("BSDK check: Checking for ES5 JSON functions that BSDK uses");var i={fname:"Bob",lname:"Lee",address:{street:"123 test",city:"NY",state:"NY"}},o=JSON.stringify(i),s;i=JSON.parse(o),n("BSDK check: JSON object functionality passed"),n("BSDK check: Checking for image tag functionality"),(new Image).src="",n("BSDK check: Image tag functionality passed"),n("BSDK check: Checking for window.addEventListener functionality"),e.addEventListener||(t=!1),n("BSDK check: window.addEventListener functionality passed"),n("BSDK check: Checking for postMessage functionality"),e.postMessage||(t=!1),n("BSDK check: postMessage functionality passed"),n("BSDK check: Checking for date functionality"),n("DATE "+Date.now()),n("BSDK check: date functionality passed");var d=/(ANTGalio\/3.3)|(ANTGalio\/3.4)|(HbbTV\/1\.1\.1(;Samsung;SmartTV2012;;;)\s+WebKit)/i;n("BSDK check: Checking device useragent"),e.navigator.userAgent.match(d)&&(t=!1,n("BSDK check: Unsupported useragent"))}catch(e){n("ERROR: "+e.message),t=!1}n("****** RESULTS: JS support check "+(t?"PASSED":"FAILED")+" ******");try{t?(!function(e,t){if(!e.isBuilt||!e.isBuilt()){var a=-1!==t.location.protocol.indexOf("https")?"https:":"http:",n="//secure-",r="glcfg510.js",i=864e5,o=1,s=5,d=0,l=0,c=0,u=!1,p="cgi-bin/gn?prd=session&c9=devid,&c13=asid,",v="600",m="600",f=[".imrworldwide.com",".nmrodam.com"],g=e.getInstances?e.getInstances():{},_=!1,y="bj.6.0.0",h="734",P="6.0.0.16";Date.now=Date.now||function(){return+new Date};var S={Promise:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){try{var t=new Promise(function(e,t){});return new Promise(e)}catch(e){}var a;return new function e(t){var a=function e(t){r&&r(t)},n=function e(t){i&&i(t)},r=null,i=null;return{then:function e(o,s){r=o,i=s,t(a,n)}}}(e)})},b,T,C;e.sdkvForConfig=function(){return y},e.isBuilt=function(){return _},e.getInstance=function(a,n){var r=void 0!==a&&("string"==typeof a||"object"==(void 0===a?"undefined":_typeof(a))&&a.constructor===String)?a:"default";return g.hasOwnProperty(r)||(g[r]=n?N(r,e[r]||t[r]):N(r)),g[r]},e.setTotalNumAssetsAllowed=function(e){o=isNaN(e)?e:parseInt(e,10)},e.getAddress=function(){return O},e.getConfigAddress=function(){return L},e.getAddressProtocol=function(){return a},e.getInstances=function(){return g},e.loadXmlString=function(e){var t=null;try{return(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e),t}catch(n){try{var a;return t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){}}return null},e.isNielsenTag=function(e){var t=!1;if(void 0!==e){var a=e.indexOf("?"),n=-1!==e.indexOf(f[0])?e.indexOf(f[0]):e.indexOf(f[1]);n>-1&&n<a&&(t=!0)}return t},e.getVersion=function(){return v},e.getVersionOverride=function(){return m},e.send=function(e){e&&t.console&&t.console.log&&console.log(e.parentNode)},e.browserSafeAddEventListener=function(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},e.browserSafeRemoveEventListener=function(e){null!=e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},e.controllers={util:(b=e,function(){if("function"==typeof t.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}e.prototype=t.Event.prototype,t.CustomEvent=e}(),{fireCustomEvent:function e(a,n,r){try{r=r||t,a&&r&&r.dispatchEvent(new CustomEvent(a,{detail:n}))}catch(e){b&&b._listeners&&b._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}},queryParam:function e(a){try{a=a.toString().toLowerCase();var n=t.location.search.substr(1).split("&"),r="";if(n.find)r=n.find(function(e){return 0===e.toLowerCase().indexOf(a+"=")});else for(var i=0,o=n.length;i<o;i++)if(0===n[i].toLowerCase().indexOf(a+"=")){r=n[i];break}if(r){var s=r.split("=");if(s&&s.length>1)return s[1]}}catch(e){b&&b._listeners&&b._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to retrieve query string parameter."})}return""},Promise:S.Promise})};var n=n||"//secure-",a=a||(-1!==t.location.protocol.indexOf("https")?"https:":"http:"),e=e||t.NOLBUNDLE||{},r=r||"glcfg510.js",v=v||"600",y=y||"bj.6.0.0",h=h||"",L="",u=u||!1,g=g||e.getInstances?e.getInstances():{},d=d||0,l=l||0,c=c||0,O=A(".nmrodam.com/"),m=m||"600",p=p||"cgi-bin/gn?prd=session&c9=devid,&c13=asid,",E="&sessionId=|!nol_userSessionId!|&c16=sdkv,|!nol_sdkv!|&uoo=|![nol_useroptout]!|&fp_id=|![(nol_fpid)]!|&fp_cr_tm=|![nol_fpidCreateTime]!|&fp_acc_tm=|![nol_fpidAccessTime]!|&fp_emm_tm=|![nol_fpidLastEMMPingTime]!|&ve_id=|![(nol_veid)]!|&c30=bldv,|![nol_bldv||nol_bldVersion]!|&uid2=|![(nol_uid2)]!|&uid2_token=|![(nol_uid2Token)]!|&hem_sha256=|![(nol_hemSha256)]!|&hem_sha1=|![(nol_hemSha1)]!|&hem_md5=|![(nol_hemMd5)]!|&hem_unknown=|![(nol_hemUnknown)]!|",w="IMRID",F;if(F={},e.loadLib=function(t,a,n,r){if(null!=t&&"string"==typeof t&&null!=a&&"string"==typeof a)if(F[t]){if(F[t].body)return void r(F[t].body(n));F[t].callbacks.push({func:r,arg:n})}else F[t]={callbacks:[]},F[t].callbacks.push({func:r,arg:n});else null==a&&e.initLib(t,n)},e.registerLib=function(t,a){try{if(F){F.hasOwnProperty(t)||e.initLib(t,e,a);var n=F[t];n.body=a;for(var r=n.callbacks.shift();r;)r.func(n.body(r.arg)),r=n.callbacks.shift()}}catch(e){}},e.initLib=function(e,t,a){if(F[e]||(F[e]={handle:null,callbacks:[]}),F[e].body=a,F[e].body){var n=F[e].body(t);return t[e]=n,void(F[e].handle=n)}},e.getLib=function(e){return F[e]?F[e].handle:null},t.gg_nol_FlashCallBack){for(var k=0,D,I=t.gg_nol_FlashCallBack.length;k<I;k+=1)t.gg_nol_FlashCallBack[k].hasOwnProperty("callBack")&&(D=document.getElementById(t.gg_nol_FlashCallBack[k].swfId))&&D[t.gg_nol_FlashCallBack[k].callBack]();t.gg_nol_FlashCallBack=void 0}return _||(_=!0,d=l=Date.now(),e.BUILDVERSION="6.0.0.16"),e}function A(e){return void 0!==a&&void 0!==e&&void 0!==n?a+"//cdn-gl"+e:"https://sdk.imrworldwide.com/"}function M(e){e&&e.hasOwnProperty("target")&&(u="true"===String(e.target).toLowerCase())}function R(){l=Date.now(),c=Math.ceil((l-d)/1e3)}function B(t){if(t&&t.hasOwnProperty("target")&&!isNaN(t.target.elapsed))for(var a in g)!function(a){var n,r;if(void 0!==(n=g[a])&&n.hasOwnProperty("staticPage")&&n.staticPage.hasOwnProperty("evtParams")&&"string"==typeof(r=n.staticPage.evtParams).param1.type&&"static"===r.param1.type.toLowerCase()){if(e&&e.GLCFG)var i=e.GLCFG.globalHasFocus&&e.GLCFG.globalHasFocus(),o=e.GLCFG.PLDCR&&e.GLCFG.PLDCR.safeFocusOn;if(i||o||n.staticIFrameFlag)return void n.ggPM("48",t.target.elapsed,"","","");if(!i||"hidden"===document.visibilityState)n.ggPM("flush","0"),t.target.pause(),o&&(e.GLCFG.PLDCR.safeFocusOn=!1)}}(a)}function N(i,o){var s,d={},f=[],g=[],_=[],P={},b=String(Date.now())+Math.round(1e4*Math.random()),T,C=5,F=-1,k=!1,D=o||{};if(D.id=b,D.name=i,D.initialized=!1,D.staticPage={},D.modules={allModInit:!1},D.configLoaded=!1,D.apid="",D.sdkv=v,D.sdkvForConfig=y,D.useCachedConfig=null!=o,D.sessionId="",D.sivt=null,D.state=null,D._pauseTimeoutEnabled=!1,D.isAdobe=!1,o){if(o.q){var I,N=null;for(I=0;I<o.q.length;I++)(N=o.q[I])&&N.length>0&&f.push({eventType:N[0],param1:N.length>1?N[1]:void 0,param2:N.length>2?N[2]:void 0,param3:N.length>3?N[3]:void 0,param4:N.length>4?N[4]:void 0});delete o.q}else o.getEventQue&&(f=o.getEventQue());g=o.te||[]}function V(e){D.staticPage.hasOwnProperty("evtParams")&&D.ggPM("56",D.staticPage.evtParams.param1,D.staticPage.evtParams.param2,D.staticPage.evtParams.param3,D.staticPage.evtParams.param4)}function G(e,t){if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(d[e.type]instanceof Array)for(var a=d[e.type],n=0,r=a.length;n<r;n++)a[n].call(D,t)}function x(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var a in e.cmsMap)e.cmsMap.hasOwnProperty(a)&&-1!==e.cmsMap[a].indexOf("nol_")&&t.push(e.cmsMap[a].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function U(t){try{var a="Error in retrieveMeta";if(t&&t.hasOwnProperty("fData")&&t.hasOwnProperty("ad")&&t.hasOwnProperty("content")&&t.hasOwnProperty("plid")){var n=x({cmsMap:e.GLCFG.PLDPR.getCmsMap(t.plid)});for(var r in t.fData)if(t.fData.hasOwnProperty(r)&&"count"!==r){var i=t.fData[r][Object.keys(t.fData[r]).splice(-1,1)];if(null!=i&&"object"===(void 0===i?"undefined":_typeof(i)))for(var o in i){var s=String(o);-1!==s.indexOf("nol_")&&-1===n.indexOf(s)||(t[r][o]=i[o])}}return t}return t&&t.hasOwnProperty("err")?(t.err=a+": Missing passedFdata, Ad, content or static properties",t):{err:a}}catch(e){}}function j(t){t&&(t.registerListener("ggPM",D),t._listeners&&(t._listeners.addListener("updateCmbStaticPage",D.handleUpdateOfStatic),t._listeners.addListener("removeCmbAssetId",D.removeAsset),t._listeners.addListener("tick",function(){R(),k=!1,G("globalTick",{time:l,seconds:c})}),t._listeners.addListener("dcrHeartbeat",B),t._listeners.addListener("flushQueue",D.emptyQueue),t._listeners.addListener("handleSessionReset",D.handleSessionReset),t._listeners.addListener("flushPauseEventQueue",D.flushPauseEventQueue),t._listeners.addListener("sendOptOutStatus",M)),e.GLCFG=t)}function z(e,t){s&&s.ggParams&&s.ggParams.nol_sdkDebug&&["debug","info","warn","true"].indexOf(s.ggParams.nol_sdkDebug.toString().toLowerCase())>-1&&console&&console.log&&console.log("Nielsen Log: "+e,t||"")}function H(e,a){var n;(z("Firing ping "+e.url),void 0!==e&&(!e||e.hasOwnProperty("url")&&0!==e.url.length)&&e.hasOwnProperty("retryDelay")&&e.hasOwnProperty("currRetry")&&e.hasOwnProperty("maxRetry"))&&{requestUrl:function t(){var n=this;try{++e.currRetry>e.maxRetry?(this.logErr("maxRetry reached"),a&&a()):this.sendUrlRequest(e.url)}catch(e){this.logErr("Error in fireToUrl requestUrl: "+e),a&&a()}},sendUrlRequest:function n(r){var i=this;try{if(void 0===r)return;var o=new Image;o.onerror=function(a){t.setTimeout(function(){i.requestUrl()},e.retryDelay)},o.onload=function(e){a&&a()},o.src=r+"&retry="+e.currRetry}catch(e){i.logErr("Error in fireToUrl sendUrlRequest: "+e),a&&a()}},logErr:function e(a){a&&t.console&&t.console.log&&console.log("Error: ",a)}}.requestUrl()}function W(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)}function J(t,a,n,r){var i=n.enableHem,o=n.enableUid2,s=n.nol_clientCMSmap,d=n.nol_tagMap.nol_defaults.nol_hemUidCharLimit,l=!1;o=o&&"true"===o.toString().toLowerCase(),i=i&&"true"===i.toString().toLowerCase();var c="SDK received parameter(s) values exceeding permissible limit of "+(d=parseInt(d)||300)+" characters: ";for(var u in t)for(var p in s)s[p]===u&&(!r&&(o&&-1!==u.indexOf("uid2")||i&&-1!==u.indexOf("hem_"))&&(t[u].length<=d?a[p]=t[u]:(c+=u+" contains "+t[u].length+" characters, ",e.GLCFG._listeners.fireEvent("error",{type:"error",msg:u+" parameter value: "+t[u]+" exceeds "+d+" characters"}),l=!0)),-1===u.indexOf("uid2")&&-1===u.indexOf("hem_")&&(a[p]=t[u]));return l&&(c=c.trim().slice(0,-1),_.push({type:17,msg:c})),a}var q={_queueEventLog:!1,_eventLog:[],init:function t(){try{var a=e.controllers.util.queryParam("nol_eventHookDelay");if(q._queueEventLog=!1,a){var n=parseInt(a);"NaN"!==n.toString()&&(q._queueEventLog=!0,setTimeout(function(){q._queueEventLog=!1},1e3*(n<=20?n:20)))}}catch(e){q._queueEventLog=!1}},trigger:function t(a,n){try{if(n){var r=JSON.parse(JSON.stringify(n));r.name=a.name,r.sdkv=y,q._queueEventLog?q._eventLog.push(r):(q._eventLog&&q._eventLog.length>0&&(e.controllers.util.fireCustomEvent("NSDK_EventHook",q._eventLog),q._eventLog=[]),e.controllers.util.fireCustomEvent("NSDK_EventHook",[r]))}}catch(e){}}},K={_enabled:!0,_activated:!1,mode:null,isHybrid:function e(){var a;return this._enabled&&(void 0!==t.NielsenAppSDK||t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.NielsenSDKMsg||t.NielsenAppSDKJSHandler&&t.ReactNativeWebView)},isAsync:function e(){var a;return this._enabled&&(t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.NielsenSDKMsg||t.NielsenAppSDKJSHandler&&t.ReactNativeWebView)},intType:function e(){var a;return this._enabled&&t.NielsenAppSDKJSHandler&&t.ReactNativeWebView?"ReactWebview":"HybridWebview"},state:{},eMap:function e(t){var a;return{3:"loadMetadata",14:"staticstart",15:"loadMetadata",5:"play",55:"sendID3",49:"setPlayheadPosition",playheadposition:"setPlayheadPosition",setplayheadposition:"setPlayheadPosition",6:"stop",7:"stop",30:"onPaginate",35:"updateMetadata",56:"staticend",staticend:"staticEnd",57:"end",oncomplete:"end",900:"optoutstatus",901:"optouturl",902:"meterversion",903:"demographicid"}[(t=t||"").toString()]||t},send:function e(a,n,r){var i=this,o;if(i.isHybrid()){if(!r&&i.state[n.id]&&!i.state[n.id].enabled)return i.state[n.id].que||(i.state[n.id].que=[]),void i.state[n.id].que.push({action:a,payload:n});if(r||i._activated&&i.state[n.id]&&i.state[n.id].enabled)if(t.NielsenAppSDK){o=t.NielsenAppSDK.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:a,payload:n}));try{o=o?JSON.parse(o):o}catch(e){}finally{return o&&i.processMsg(o),o}}else{if(t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.NielsenSDKMsg)return t.webkit.messageHandlers.NielsenSDKMsg.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:a,payload:n}));if(t.NielsenAppSDKJSHandler&&t.ReactNativeWebView)return t.ReactNativeWebView.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:a,payload:n}))}}},enableSDK:function e(){D.initialized=!0,D.modules.allModInit=!0,D.modules.PLCMB=2},processMsg:function e(t){var a,n=this,r,i;if(t&&t.payload&&(!t.payload.id||n.state[t.payload.id]))switch(t.action){case"enabled":t.payload.id&&n.state[t.payload.id]&&(n.state[t.payload.id].enabled="true"==t.payload.value.toString());break;case"updateott":case"optoutstatus":case"optouturl":case"demographicid":case"meterversion":n.state[t.payload.id][t.action]=t.payload.value,(a=document.getElementById("nielsen.bsdk.native."+t.action))&&(a.innerHTML=t.payload.value);break;case"init-ggPM":case"init-trackEvent":if(clearTimeout(n.timeout),n.state[t.payload.id].enabled=t.payload.result,n._activated="true"==t.payload.result.toString(),n._activated){for(n.enableSDK(),n.mode="init-trackEvent"==t.action?1:0,D.emptyQueue(),i=n.state[t.payload.id].que,r=0;r<i.length;r++)n.send(i[r].action,i[r].payload);n.state[t.payload.id].que.length=0}else n.start&&(n.start(),n.start=null)}},onMessage:function e(){var a=this;W(t,"message",function(e){var t;if(e)try{(t=JSON.parse(e.data)||{}).action&&t.payload&&a.processMsg(t)}catch(e){}})},trackEvent:function e(t,a,n){var r=this;null===r.mode&&(r.mode=1),n=r.eMap(n),r.send("trackEvent",{id:b,data:{event:n||"",param1:t,queue_call:a}})},ggPM:function e(t,a,n,r,i){var o=this;null===o.mode&&(o.mode=0),t=o.eMap(t),o.mode?o.send("trackEvent",{id:b,data:{event:t||"",param1:a,queue_call:!1}}):o.send("ggPM",{id:b,data:{event:t,param1:a,param2:n,param3:r,param4:i}})},urlParms:function e(a){var n,r;return((t.location.href.split("?")[1]||"").split("&")||[]).forEach(function(e){e.indexOf("=")>-1&&e.split("=")[0]&&(a[e.split("=")[0]]=e.split("=")[1])}),a},ggInitialize:function t(a,n,r,i,o,s,d){var l=this,c,u=JSON.parse(JSON.stringify(a)),p=e.configs[a.apid].nol_GLOBALS||{};c=p.nol_hybrid_timeout||2e3,l.isHybrid()&&(p.nol_droid_appid||p.nol_ios_appid)?(l.start=d,l.state[b]={},l.state[b].que=[],l.timeout=setTimeout(function(){l.send("timeout",{id:b,data:{ggParams:u,instanceName:n,uid:r,flashDetect:i,detectBrowser:o,container:s}},!0),delete l.state[b],l.start&&l.start(),l.start=null},c),l.onMessage(),l.send("init",{id:b,intType:l.intType(),bsdkid:u.apid,droidid:p.nol_droid_appid||"",iosid:p.nol_ios_appid||"",timeout:c,data:{ggParams:l.urlParms(u),instanceName:n,uid:r,flashDetect:i,detectBrowser:o,container:s}},!0)):d&&d()}},Q={localcid:{index:0,key:"nol_fpid"},createdOn:{index:1,key:"nol_fpidCreateTime"},lastAccessed:{index:2,key:"nol_fpidAccessTime"},lastEMMPing:{index:3,key:"nol_fpidLastEMMPingTime"}},Y={allowCookies:!1,cookieTTL:"",firstCreated:!1,fpidParams:[],_domainSplit:document.domain.split(".").reverse(),_set:function e(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"180",i=arguments[4],o=arguments[5],s=this,d,l=new Date,c;if((l.setTime(Number(n)+24*Number(r)*60*60*1e3),d="expires="+l.toUTCString(),void 0!==s._domainSplit[o])&&(i=s._domainSplit[o]+"."+i,document.cookie=t+"="+a+";"+d+";path=/;SameSite=Lax;domain=."+i,s.get(t)!==a))return s._set(t,a,n,r,i,++o)},_evalCookieMap:function e(t,a){var n="";for(var r in Q)n=t[Q[r].index]?t[Q[r].index]:"",a.set?a.set(Q[r].key,n):a[Q[r].key]=n},get:function e(t){try{var a=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return a?a[2]:""}catch(e){}return""},create:function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"180",n=arguments[1],r=arguments[2],i=this,o=Date.now(),s="";navigator.cookieEnabled&&i.allowCookies&&e.GLCFG&&e.GLCFG.generateGUID&&(s+=e.GLCFG.generateGUID()+"|",s+=o+"|",s+=o+"|",r.indexOf(n.toLowerCase())>-1&&(s+=o),i._set("nol_fpid",s,o,a,i._domainSplit[0],1),i.firstCreated=!0)},update:function e(t,a,n){var r=this,i="";r.allowCookies&&(i=r.get("nol_fpid").split("|")).length>1&&Q[t]&&(i[Q[t].index]=a,r._set("nol_fpid",i.join("|"),i[Q.createdOn.index],n,r._domainSplit[0],1))},appendfData:function e(t){var a=this;1!==a.fpidParams.length&&a._evalCookieMap(a.fpidParams,t)},appendSessParams:function e(t){var a=this;a.fpidParams=a.get("nol_fpid").split("|"),1!==a.fpidParams.length&&a._evalCookieMap(a.fpidParams,t)},cookieExpired:function e(t){var a=this.get("nol_fpid").split("|"),n,r;return Number(a[Q.createdOn.index])+24*Number(t)*60*60*1e3<Date.now()}},X={metadataURL:"",metadataPing:"",pageURL:"",pageTitle:"",hasMetaPingFired:!1,_isWithinIFrame:function e(){try{return t.self!=t.top}catch(e){return!0}},_isWithinFriendlyIFrame:function e(){try{return!!t.top.document}catch(e){return!1}},_isReferrerAvailable:function e(){try{return""!==t.document.referrer}catch(e){return!1}},evalPageData:function e(){var a=this,n="";if(a._isWithinIFrame()){if(a._isWithinFriendlyIFrame())return{pageUrl:t.top.location.href,pageTitle:t.top.document.title};if(!a._isWithinFriendlyIFrame())return{pageUrl:n=a._isReferrerAvailable()?t.document.referrer:t.location.href,pageTitle:t.document.title}}return{pageUrl:t.top.location.href,pageTitle:t.top.document.title}},handleMetadataPingReset:function e(){var t=this;t.hasMetaPingFired&&(t.hasMetaPingFired=!1)}},$=(Z=D.name,ee=e,function(e,a){try{ee.browserSafeAddEventListener({element:t,eventType:"NSDK_Initialized",func:function t(n){try{n.detail.instanceName===Z&&e(n.detail.instance)}catch(e){a&&a(e.message)}}})}catch(e){a&&a(e.message)}}),Z,ee;function te(t){!k&&t&&("blur"===t.type||"scroll"===t.type||"touchstart"===t.type||"blur"!==t.type&&e.GLCFG.browser.hidden())&&(D.ggPM("flush","0"),k=!0,z("Data flushed on "+t.type+" event"))}function ae(a){e.GLCFG.browser.isWithinIFrame()&&"focus"===a.type&&t.top.postMessage({action:"bsdk_play"},t.document.referrer?t.document.referrer:"*")}return D.isHybrid=K.isHybrid,D.fpSession=Y,D.metadataCtrl=X,D.getOptOutStatus=function(){return u},D.getId=function(){return b},D.GetName=function(){return D.name},D.Initialized=function(e){if(void 0===e)return D.initialized;D.initialized=e},D.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(P).length:0},D.disablePauseTimeout=function(){D._pauseTimeoutEnabled&&(D._pauseTimeoutEnabled=!1,z("Player "+D.id+" pause timeout disabled"))},D.enablePauseTimeout=function(){D._pauseTimeoutEnabled||(D._pauseTimeoutEnabled=!0,z("Player "+D.id+" pause timeout enabled"))},D.removeAsset=function(e){void 0!==e&&e.target.param1.hasOwnProperty("assetid")&&(D.staticPage={})},D.handleUpdateOfStatic=function(t){if(t&&t.target){var a=t.target.evtInfo;if(e.GLCFG&&e.GLCFG.PLDCR&&void 0!==a&&a.param1.hasOwnProperty("assetid")&&D.getId()===t.target.plid){var n=e.GLCFG.PLDCR.latestDcrTick();0!==Object.keys(D.staticPage).length&&D.staticPage.hasOwnProperty("id")&&D.staticPage.id===a.param1.assetid&&D.staticPage.hasOwnProperty("lastTimeStamp")?D.staticPage.lastTimeStamp=n:D.staticPage={id:a.param1.assetid,evtParams:a,startTimeStamp:n,lastTimeStamp:n}}}},D.addListener=function(e,t){t&&(void 0===d[e]&&(d[e]=[]),d[e].push(t))},D.removeListener=function(e,t){if(D._listeners[e]instanceof Array)for(var a=d[e],n=0,r=a.length;n<r;n++)if(a[n]===t){a.splice(n,1);break}},D.handleSessionReset=function(e){if(e&&e.target&&e.target.hasOwnProperty("plid")&&b===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj){var t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0};if(0===U(t).err&&e.target.passedFdata.hasOwnProperty("_currVidType")){var a=e.target.passedFdata._currVidType,n=Object.keys(t.content).length>0,r=Object.keys(t.ad).length>0;(n||r)&&("sessionreset"!==e.target.passedFdata.get("nolPriv_prevEventState")&&D.ggPM("57","1","sessionReset","",""),n&&!P.hasOwnProperty("content")&&(P.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}),"ad"===a&&r&&!P.hasOwnProperty("ad")&&(P.ad={evt:"pauseloadmeta",meta:t.ad,plid:e.target.plid}))}}D._listeners&&D._listeners.fireEvent&&D._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},D.flushPauseEventQueue=function(){if(!(Object.keys(P).length<=0)){if(D.modules.PLDPR){var e;for(e in P)G("ggPM",{evtInfo:{eventType:P[e].evt,param1:P[e].meta},id:b});P={}}D._listeners&&D._listeners.fireEvent&&D._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},D.cloneObj=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?JSON.parse(JSON.stringify(e)):e},D.ggPM=function(t,a,n,r,i){if(D.initialized)if(null!=t&&""!==t){var o={};if(o.eventType=t,o.param1=D.cloneObj(a),o.param2=D.cloneObj(n),o.param3=D.cloneObj(r),o.param4=D.cloneObj(i),K._activated&&K.isHybrid())return void K.ggPM(t,a,n,r,i);if(!D.modules.allModInit||2!=D.modules.PLCMB&&2!=D.modules.PLDPR)f.push(o);else{D.emptyQueue();var s=JSON.parse(JSON.stringify(o));G("ggPM",{evtInfo:o,id:b}),q.trigger(D,s)}}else e&&e.GLCFG&&e.GLCFG._listeners&&e.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in ggPM() - Missing event type param in ggPM"},id:b,timeStamp:Date.now()})},D.trackEvent=function(t,a,n){function r(){return Array.isArray(g)&&g.length>0?(a||g.push(D.cloneObj(t)),g.splice(0,1)[0]||{}):t}if(t&&"object"===(void 0===t?"undefined":_typeof(t))){if(!D.initialized||!D.state)return;if(K._activated&&K.isHybrid()){if(!(t=r()))return;return void K.trackEvent(t,a,n)}if(D.modules.allModInit&&D.configLoaded&&2==D.modules.PLDPR){if(!(t=r()))return;D.state.transition(t,function(e,t,a,n,r){var i={inferred:!0};i.eventType=e,i.param1=D.cloneObj(t),i.param2=D.cloneObj(a),i.param3=D.cloneObj(n),i.param4=D.cloneObj(r);var o=JSON.parse(JSON.stringify(i));G("ggPM",{evtInfo:i,id:b}),q.trigger(D,o)}),q.trigger(D,{eventType:"trackEvent",param1:t})}else g.push(D.cloneObj(t))}else e&&e.GLCFG&&e.GLCFG._listeners&&e.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Missing trackEvent metadata object"},id:b,timeStamp:Date.now()})},D.getConfigParams=function(){return s},D.emptyQueue=function(){if(!(f.length<=0&&g.length<=0))if(K._activated&&K.isHybrid()){for(var e=0;e<f.length;e++){var t=Object.assign({},f[e]);K.ggPM(t.eventType,t.param1,t.param2,t.param3,t.param4)}f=[]}else if(D.modules.allModInit&&D.configLoaded&&(D.modules.PLCMB||D.modules.PLDPR)){for(var a=0;a<f.length;a++){var n=JSON.parse(JSON.stringify(f[a]));G("ggPM",{evtInfo:f[a],id:b}),q.trigger(D,n)}for(f=[];g.length>0;)g[0]&&D.trackEvent(g[0],!0)}},D.getContainer=function(){return T},D.getClientConfig=function(){return e.configs?e.configs[D.apid]:null},D.getBaseDomain=function(e){return e.nol_GLOBALS&&void 0!==e.nol_GLOBALS.enableCookielessDomain&&"true"===e.nol_GLOBALS.enableCookielessDomain.toString().toLowerCase()?".nmrodam.com/":".imrworldwide.com/"},D.modifySddParam=function(e){if(e&&e.nol_GLOBALS&&e.nol_GLOBALS.enableSDD&&"true"===e.nol_GLOBALS.enableSDD&&e.nol_GLOBALS.nol_tagMap&&e.nol_GLOBALS.nol_tagMap.nol_url){for(var t="|![(nol_staticIntervalTimeElapsed)]!|",a=/(sdd=)[^&]*/,n=e.nol_GLOBALS.nol_tagMap.nol_url,r=0;r<n.length;r++)n[r].match(a)&&(n[r]=n[r].replace(a,"$1"+t));e.nol_GLOBALS.nol_tagMap.nol_url=n}return e},D.ggInitialize=function(t,i,o,d,l,c){if(D.initialized)return S.Promise(function(e,t){e(D)});q.init();var u,f,g,P="us";if(T=c,s={ggParams:t,uid:o,oldFlashDetect:d,detectBrowser:l,nol_playerId:b},(void 0===t?"undefined":_typeof(t))==_typeof(String())){for(f=(u=e.loadXmlString("<vi>"+t+"</vi>")).firstChild.firstChild,g=0,t={};f&&void 0!==f&&g<20;)null!==f.firstChild&&(t[f.nodeName]=f.firstChild.nodeValue),f=f.nextSibling,g++;s.ggParams=t}var k=JSON.parse(JSON.stringify(s.ggParams));delete k.apid,delete k.sfcode,delete k.nsdkv,delete k.nol_sdkDebug,delete k.optout,s.ggParams.nol_sdkDebug=e.controllers.util.queryParam("nol_sdkDebug")||s.ggParams.nol_sdkDebug,D.Initialized(!0),D.apid=s.ggParams.apid;var I=D.getClientConfig(),M=D.getBaseDomain(I);I=D.modifySddParam(I),v=(t.nsdkv?t.nsdkv.toString():"")||v,m=(t.nsdkvOverride?t.nsdkvOverride.toString():"")||m,P=t.sfcode||P,O=t.coreaddress?a+"//"+t.coreaddress+"/":A(M),y=t.sdkconfigver||y,D.nsdkvOverride=s.ggParams.nsdkvOverride,D.sdkv=v,D.sdkvForConfig=D.useCachedConfig&&D.sdkv&&3===D.sdkv.length?"bj."+D.sdkv[0]+"."+D.sdkv[1]+"."+D.sdkv[2]:y,L=e.GLCFG.getPrefProtocol(I)+":"+(t.coreaddress?n+P:"//secure-"+P)+M;var R=s&&s.ggParams,B=R.optout,N=R.nol_sdkDebug,V=R.apid,G=R.enableFpid,x=I&&I.nol_GLOBALS,U=x.nol_useroptout,W=x.nol_xorSeed,Q=x.nol_dfltAppid,Z=x.enableCookielessDomain,ee=x.enableFpid,te=x.nol_fpid_ttl,ae=x.nol_emmsfcodelist,ne=x.nol_tagMap.nol_defaults,re=void 0!==U&&"true"===U.toString().toLowerCase()||void 0!==B&&["true","1","t","y","yes"].indexOf(B.toString().toLowerCase())>-1;void 0!==ee&&(ee=ee.toString().toLowerCase(),Y.allowCookies="true"===ee),void 0!==G&&(G=G.toString().toLowerCase(),["true","1","yes"].indexOf(G)>-1&&(Y.allowCookies=!0),["false","0","no"].indexOf(G)>-1&&(Y.allowCookies=!1));try{D.optout=re}catch(e){}function ie(){D.sessionId=e.GLCFG&&e.GLCFG.generateGUID?e.GLCFG.generateGUID():D.id,Y.cookieTTL=te||ne.nol_fpid_ttl,Z=void 0!==Z&&"true"===Z.toString().toLowerCase(),(!Y.get("nol_fpid")||Y.get("nol_fpid")&&Y.cookieExpired(Y.cookieTTL))&&Y.create(Y.cookieTTL,P,ae);var t=I&&I.nol_GLOBALS,a=t.syncPingFlagList,n=t.nol_appid,i=t.nol_metadataURL,o=void 0!==N&&["debug","info","warn","true"].indexOf(N.toString().toLowerCase())>-1,s=[];if(a&&Array.isArray(a))for(var d=0;d<a.length;d++)if(I.nol_GLOBALS.hasOwnProperty(a[d])){var l=I.nol_GLOBALS[a[d]];l=e.GLCFG.evalTemplate(l,{nol_prefProtocol:e.GLCFG.getPrefProtocol(I),nol_appid:n}),s.push(l)}else z("Info - Sync ping url key "+a[d]+" not present in config.");var c,u="",v=X.evalPageData(),m=v.pageUrl,f=v.pageTitle;X.pageURL=m,X.pageTitle=f,i&&(X.metadataURL=i);try{c={nol_prefProtocol:e.GLCFG.getPrefProtocol(I),nol_sfcode:P,nol_userSessionId:D.sessionId,nol_appid:I.nol_GLOBALS.nol_appid,nol_sdkDelimiter:I.nol_GLOBALS.nol_sdkDelimiter,nol_sdkv:D.sdkvForConfig,nol_bldv:e.GLCFG.getBaseBuildVer()+h,nol_useroptout:D.optout?"true":""},Y.allowCookies&&(Y.appendSessParams(c),Y.firstCreated||Y.update("lastAccessed",Date.now().toString(),Y.cookieTTL))}catch(e){}return u||(u=L+p+(Q||V)+E,u=e.GLCFG.evalTemplate(u,c,W)),D.useCachedConfig&&e.getLib("GLCFG")?e.GLCFG&&(e.GLCFG.sfCode=P,e.GLCFG.browser.ready(function(){j(e.getLib("GLCFG")),e.GLCFG.loadChildren(D.sdkv),e.GLCFG.waitForLS(function(){var t=re||e.GLCFG.getOptoutCookie();try{k&&Object.keys(k).length&&J(k,c,I.nol_GLOBALS,t),u=e.GLCFG.evalTemplate(ne.nol_sessionURL.replace("&retry=|![nol_retry]!|",""),c,W)}catch(e){}if(e.GLCFG.lsController.maskedRequestWithRetry(u),Z||re||!s.length||e.GLCFG.queryCookie(w,s,o),e.GLCFG.queryCookies(),e.GLCFG.PLDCR&&I.nol_GLOBALS&&(I.nol_GLOBALS.nol_idleTimeout&&(e.GLCFG.PLDCR.nol_idleTimeout=I.nol_GLOBALS.nol_idleTimeout),I.nol_GLOBALS.nol_maxTickDelta&&(e.GLCFG.PLDCR.nol_maxTickDelta=I.nol_GLOBALS.nol_maxTickDelta)),e.GLCFG.PLDPR){if(e.GLCFG.PLDPR.initFromConfig(I,D.id,!0),_.length)for(var a=0;a<_.length;a++)e.GLCFG._listeners.fireEvent("sendError",{data:_[a],id:b,timeStamp:Date.now()});e.PLSIVT&&(D.sivt=new e.PLSIVT(D))}})})):(H({url:u,currRetry:F,maxRetry:C,retryDelay:1e3}),e.loadLib("GLCFG",O+"novms/js/2/configs/"+r,e,j)),S.Promise($)}e.GLCFG.initLS(O),D.state=e.PLSTM?new e.PLSTM.stateMachine(D.id,I):null,K.isHybrid()?K.ggInitialize(t,i,o,d,l,c,ie):ie()},D.isViewable=function(){return!1},e.browserSafeAddEventListener({element:t,eventType:"beforeunload",useCapture:!1,func:function e(t){D&&D.staticPage&&V(D.staticPage)}}),e.GLCFG.flushEvent=te,e.GLCFG.focusEvent=ae,e.GLCFG.browser.addEventListener({element:t,eventType:"blur",useCapture:!1,func:te}),e.GLCFG.browser.addEventListener({element:t.document,eventType:e.GLCFG.browser.visibilityEvent,useCapture:!1,func:te}),e.GLCFG.browser.addEventListener({element:t,eventType:"pagehide",useCapture:!1,func:te}),e.GLCFG.browser.addEventListener({element:t,eventType:"focus",useCapture:!1,func:ae}),D}}(e.NOLBUNDLE=e.NOLBUNDLE||{},e),e.NOLBUNDLE.registerLib("GLCFG",function(t){var a=t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{},n,r,i,o=0,s=30,d=0,l=!0,c=864e5,u,p=(u=e.NOLBUNDLE).getAddress(),v=u.getVersion();a.sfCode=a.sfCode||"",a.optoutCookie=a.optoutCookie||"",a.gotOptoutCookie=a.gotOptoutCookie||!1;var m,f={PLDPR:{path:p+"novms/js/2/pldpr"+(m={600:{PLSUB:600,PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0",LSID:!0},"600_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0.rc",LSID:!0},601:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!0},"601_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1.rc",LSID:!0},501:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.1.0",LSID:!1,FORCEFOCUS:!0,CADENCEOVERRIDE:30},615:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.1.5",LSID:!1,FORCEFOCUS:!0,CADENCEOVERRIDE:30}})[v].PLDPR+".js",status:0},PLDCR:{path:p+"novms/js/2/pldcr"+m[v].PLDCR+".js",status:0},PLVBL:{path:p+"novms/js/2/plvbl"+m[v].PLVBL+".js",status:0},PLSUB:{path:p+"novms/js/2/plsub"+m[v].PLSUB+".js",status:0},PLSIVT:{path:p+"novms/js/2/plsivt"+m[v].PLSIVT+".js",status:0},PLCMB:{path:p+"novms/js/2/plcmb"+m[v].PLCMB+".js",status:0},PLLOG:{path:p+"novms/js/2/pllog"+m[v].PLLOG+".js",status:0},PLSTM:{path:p+"novms/js/2/plstm"+m[v].PLSTM+".js",status:0}},g="6.0.0.17";function _(t,n){if(t&&n){var r=n.path;e.NOLBUNDLE.loadLib(t,r,a,function(){n.status=1})}}function y(e){try{if(!e.modules.allModInit){var t=!0,n=F(e.sdkv);for(r in f)if(f.hasOwnProperty(r)&&n.hasOwnProperty(r)&&!a[r]){if("PLLOG"!==r&&2!==e.modules[r]){t=!1;break}}else;t&&(e.modules.allModInit=!0,a._listeners.fireEvent("flushQueue"))}}catch(e){}}function h(){void 0!==e.document.referrer&&e.document.referrer.length>0&&a.postMsgAvail&&void 0!==e.parent&&void 0!==e.parent.postMessage&&e.parent.postMessage("nolInit",0===e.location.protocol.indexOf("http")?e.document.referrer:"*"),s<d?e.clearInterval(o):d+=1}function P(){if(!(this instanceof P))return new P;a._listeners={},this.addListener=function(e,t,n,r){var i=n||!1;void 0===a._listeners[e]&&(a._listeners[e]=[]),a._listeners[e].push({cb:t,remove:i,player:r,single:!1})},this.addListenerSingle=function(e,t,n,r){var i=n||!1,o,s,d;void 0===a._listeners[e]&&(a._listeners[e]=[]);var l=!1;for(s=0,d=(o=a._listeners[e]).length;s<d;s++)if(o[s].single){l=!0;break}l||a._listeners[e].push({cb:t,remove:i,player:r,single:!0})},this.fireEvent=function(e,t){if(e){var n,r,i;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(a._listeners[e.type]instanceof Array){for(r=0,i=(n=a._listeners[e.type]).length;r<i;r++)n[r]&&n[r].cb.call(this,e);for(r=0;r<n.length;r++)n[r]&&n[r].remove&&(!e.target||!n[r].player||e.target&&n[r].player&&(e.target.nol_playerId===n[r].player.id||e.target.id===n[r].player.id))&&(n.splice(r,1),r--)}}},this.removeListener=function(e,t){var n,r,i;if(a._listeners[e]instanceof Array)for(r=0,i=(n=a._listeners[e]).length;r<i;r++)if(n[r]&&n[r].cb===t){n[r].remove=!0;break}}}a.gIframe=a.gIframe||a.getLS?a.getLS():null,a.gIframeReady=a.gIframeReady||!1,a.thirdPartyData=a.thirdPartyData||{cookiesEnabled:!0,localStorageEnabled:!0},a.postMsgAvail=a.postMsgAvail||"function"==typeof e.postMessage,a.availModules=a.availModules||{},a._players=a._players||{},a.id=a.id||"0",a.childGlobal=a.childGlobal||!!e&&e.top!==e.self,a.parentFound=a.parentFound||!1,a.loadChildren=function(e){var t,n=F(e||v);for(t in f)f.hasOwnProperty(t)&&n.hasOwnProperty(t)&&!a[t]&&_(t,f[t])};var a=a||(t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{}),u=u||e.NOLBUNDLE,m=m||{},v=v||u.getVersion(),S="nol_lsid",b=b||"OPT_OUT",T=T||"IMRID",C="nol_emmURL",L,O,a,E,w;function F(e){return m[e]||m[v]||{}}function k(e){if(void 0!==a.gIframe&&a.postMsgAvail)return void 0===e?void a.lsController.store.get(S):void a.lsController.store.set(S,e)}function D(){for(var e=0;e<a.onLSReady.length;e++)a.onLSReady[e]();a.onLSReady=[]}function I(e){if(void 0!==a.gIframe&&a.postMsgAvail)return void 0===e?void a.lsController.store.get(C):void a.lsController.store.set(C,e)}function A(e,t){var a="",n,r,i,o;if(!e||!t)return e;for(o=t.length,r=0,i=e.length;r<i;r++)a+=0===(n=e.charCodeAt(r)^t.charCodeAt(r%o))?e.charAt(r):String.fromCharCode(n);return a}function M(e,t){return"<"===e&&">"===t||"{"===e&&"}"===t||"("===e&&")"===t}function R(e,t,n,r){var i,o;return"{"===e||"}"===e?n=a.CryptoJS.MD5(n.toString()).toString():"<"===e||">"===e?(i=t.match(/\.\d+,\d+\>/g))?(o=i[0].match(/[\d]+/g),n=String(n).substr(o[0],o[1])):n=A(String(n),r):"("!==e&&")"!==e||(n=encodeURIComponent(n).replace("'","%27")),n}function B(e){if(e){var t,n;for(t in a.availModules)a.availModules.hasOwnProperty(t)&&1==e.init&&(e.modules[t]||(e[t]=new a.availModules[t].init(e),e.modules[t]=1));var r=e.getConfigParams().nol_playerId;a._players[r]=e,a._listeners.addListener("tick",function(){y(a._players[r])})}}function N(e){e&&a._listeners.fireEvent(e.eventTrigger,e)}if(a.EMMURL=a.EMMURL||"",a.gotCookies=a.gotCookies||!1,a.gotEMMURL=a.gotEMMURL||!1,a.onLSReady=a.onLSReady||[],a.localStorageId=a.localStorageId||"-1",a.gotLSID=a.gotLSID||!1,a.queryCookie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:e,eventType:"get",storageType:"cookie",data:t,debug:n}),a.gIframe.src)},a.initLS=function(t,n,r,i){try{r=r||1,a.gIframe||(a.gIframe=e.document.createElement("iframe"),a.gIframe.src=t+"novms/html/ls.html",a.gIframe.height=0,a.gIframe.width=0,a.gIframe.style.display="none",a.gIframe.id="lsframe",a.gIframe.onload=function(){k(),a.getEmmUrl(),a.queryCookie(b),a.queryCookies(),a.gIframeReady=!0,a.thirdPartyData.cookiesEnabled=navigator.cookieEnabled,i&&i(),a.browser.localStorageSupported()||(a.thirdPartyData.localStorageEnabled=!1,D())},e&&e.document&&e.document.body?e.document.body.appendChild(a.gIframe):r<=15&&setTimeout(function(){a._listeners.fireEvent("debug",{type:"debug",msg:"document.body not ready - delaying to add ls.html"}),a.initLS(t,n,r++,i)},r<=1?0:300))}catch(t){e.console&&e.console.error&&e.console.error("Unable to register ls.html - "+t.message)}},a.getEmmUrl=function(){return I()},a.setEmmUrl=function(e){e&&(a.EMMURL=e,I(a.EMMURL))},a.queryCookies=function(){a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:"cookieall",eventType:"get",storageType:"cookie"}),a.gIframe.src)},a.getOptoutCookie=function(){return a.optoutCookie},a.isOptout=function(){return a.optoutCookie&&"true"===a.optoutCookie.toLowerCase()||"OPTOUT"===a.localStorageId},a.cookie=a.cookie||(L={cookie:""},{cache:(O={setCache:function e(t){L.cookie=t},getCookies:function e(){if(L.cookie)try{var t=L.cookie.split(";"),a=null,n={};return t.forEach(function(e){a=e.trim().split("="),n[a[0].trim()]=a[1].trim()}),n}catch(e){}return{}},get:function e(t){var a;return t?O.getCookies()[t]:""}}).setCache,get:O.get,all:O.getCookies}),a.getIfLsidShouldSend=function(){var e=F(v);if(e.hasOwnProperty("LSID"))return e.LSID},a.lsReady=function(){return a.gIframeReady},a.getLS=function(){return a.gIframe},a.getLsId=function(){return"string"!=typeof a.localStorageId?a.localStorageId.toString():a.localStorageId},a.setLsId=function(e,t,n,r){if(n)var i=n.sessionId,o=n.fpSession;var s=(r=r&&Array.isArray(r)?r.concat(["secure-eu","eu","eu-uat","eu-cert"]):["secure-eu","eu","eu-uat","eu-cert"]).indexOf(a.sfCode.toLowerCase())>-1;if(null!=e&&e!==a.getLsId()&&(a.localStorageId=e,k(a.localStorageId)),t){if(a.postMsgAvail&&s){if(a.userAgent.isAndroid()&&a.userAgent.androidVersion().major<6){var d="";a.userAgent.isChrome()?(d="intent://nuid/"+i+"/#Intent;action=android.intent.action.VIEW;scheme=nielsenwebid;component=com.nielsen.odm/.NielsenMobileMeter;end",a.lsController.request(d),a._listeners.fireEvent("info",{type:"info",msg:"Firing EMM intent "+d})):(d="nielsenwebid://nuid/"+i,a.lsController.request(d),a._listeners.fireEvent("info",{type:"info",msg:"Firing EMM deep link "+d})),a.setEmmUrl(d)}else a.lsController.maskedRequest(t),a._listeners.fireEvent("info",{type:"info",msg:"Firing EMM link "+t}),a.setEmmUrl(t);o&&!o.firstCreated&&o.update("lastEMMPing",Date.now().toString(),o.cookieTTL)}s||""===o.get("nol_fpid").split("|")[3]||o.update("lastEMMPing","",o.cookieTTL)}},a.waitForLS=function(e){a.thirdPartyData.localStorageEnabled?e&&(a.gIframeReady&&"-1"!==a.localStorageId?e():a.onLSReady.push(e)):e&&e()},a.lsController={store:{get:function t(n){a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:n,eventType:"get",storageType:"local"}),0===e.location.protocol.indexOf("http")?a.gIframe.src:"*")},set:function t(n,r){a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:n,eventType:"set",storageType:"local",data:r}),0===e.location.protocol.indexOf("http")?a.gIframe.src:"*")}},request:function t(n){a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"reqUsingFrame",data:{url:n}}),0===e.location.protocol.indexOf("http")?a.gIframe.src:"*")},maskedRequest:function t(n){a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:n}}),0===e.location.protocol.indexOf("http")?a.gIframe.src:"*")},maskedRequestWithRetry:function t(n){a.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskrefretry",data:{url:n}}),0===e.location.protocol.indexOf("http")?a.gIframe.src:"*")}},(a=a||(t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{})).checkUserAgent=function(t){var a=e?e.navigator.userAgent.toLowerCase():null;return void 0!==t&&t.length>0&&(a=-1!==a.search(t)),a},a.userAgent=function(t){var n=null,r="";try{n=t&&t.navigator?t.navigator.userAgent:null,r=n?n.toLowerCase():""}catch(e){}return{get:function e(){return n},isInstagram:function e(){return-1!==r.search(/(?=.*instagram).*/)},isFB:function e(){return-1!==r.search(/(?=.*\[fb).*/)},isChrome:function e(){return-1!==r.search(/(?=.*chrome).*/)||-1!==r.search(/(?=.*crios).*/)},isMac:function e(){return-1!==r.search(/(?=.*macintosh).*/)},isIOS:function e(){return-1!==r.search(/(?=.*iphone).*/)||-1!==r.search(/(?=.*ipad).*/)},isIpad:function t(){return/iPad/.test(navigator.userAgent)||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&void 0!==e.DeviceMotionEvent&&void 0!==navigator.maxTouchPoints&&navigator.maxTouchPoints>1},isIpadOS:function e(){return a.userAgent.isIpad()&&!1===/iPad/.test(navigator.userAgent)},iosVersion:function e(){var t,a=new RegExp(/os\s([0-9_]*?)\s/gi).exec(r),n=a&&a.length>1?a[1].split("_"):[];return{version:a&&a.length>0?a[1].replace(/_/gi,"."):"",major:n&&n.length>0?parseInt(n[0]):0,minor:n&&n.length>1?parseInt(n[1]):0,patch:n&&n.length>2?parseInt(n[2]):0}},isAndroid:function e(){return-1!==r.search(/(?=.*android).*/)},androidVersion:function e(){var t,a=new RegExp(/android (.*?);/gi).exec(r),n=a&&a.length>1?a[1].split("."):[];return{version:a&&a.length>0?a[1]:"",major:n&&n.length>0?parseInt(n[0]):0,minor:n&&n.length>1?parseInt(n[1]):0,patch:n&&n.length>2?parseInt(n[2]):0}}}}(e),a.browser=function(){var t={ready:!1},a=["webkit","moz","ms","o"],n="hidden",r="visibilitychange",i="visibilityState";function o(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))}function s(e){null!=e&&null!=e&&null!=e.element&&null!=e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))}function d(a){function n(){s({element:document,eventType:"DOMContentLoaded",func:r}),s({element:e,eventType:"load",func:r})}function r(){n(),t.ready=!0,a&&a()}t.ready?a&&a():"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e.setTimeout(r):(o({element:document,eventType:"DOMContentLoaded",func:r}),o({element:e,eventType:"load",func:r}))}function l(){try{var t=e.localStorage;if(null!=t)return!0}catch(e){return!1}return!1}function c(){return document[n]||"hidden"===document[i]}function u(){try{return e.self!=e.top}catch(e){return!0}}function p(){try{return!!e.top.document}catch(e){return!1}}if(void 0===document[n])for(var v=0;v<a.length;v++)if(a[v]+"Hidden"in document){n=a[v]+"Hidden",r=a[v]+"visibilitychange",i=a[v]+"visibilityState";break}return{addEventListener:o,removeEventListener:s,ready:d,localStorageSupported:l,hidden:c,isWithinIFrame:u,isWithinFriendlyIFrame:p,visibilityEvent:r}}(),a.getBaseBuildVer=function(){var e=F(v);if(e.hasOwnProperty("BASEVER"))return e.BASEVER+"."},a.getConfigVer=function(){var e=F(v);if(e.hasOwnProperty("CONFIG"))return e.CONFIG},a.globalHasFocus=function(){var t,a=F(u.getVersionOverride());return!a||!a.hasOwnProperty("FORCEFOCUS")||e.document&&void 0!==e.document.visibilityState&&"visible"!==e.document.visibilityState?"function"!=typeof e.self.document.hasFocus||e.self.document.hasFocus():a.FORCEFOCUS},a.getSdkvGlobal=function(e,t){if(e&&t){var a=F(e);return!(!a||!a.hasOwnProperty(t))&&a[t]}},a.isValidJson=function(e){var t;try{t=JSON.parse(e)}catch(e){return!1}return"Object"==typeof t},a.getPrefProtocol=function(t){try{return a.userAgent.isIOS()&&a.userAgent.iosVersion().major>=9?"https":0===e.location.protocol.indexOf("https")?"https":t.nol_GLOBALS.hasOwnProperty("nol_prefProtocol")&&-1!==["http","https"].indexOf(t.nol_GLOBALS.nol_prefProtocol)?t.nol_GLOBALS.nol_prefProtocol:t.nol_GLOBALS.nol_tagMap&&t.nol_GLOBALS.nol_tagMap.nol_defaults&&t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol&&-1!==["http","https"].indexOf(t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol)?t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol:"https"}catch(e){return"https"}},a.generateGUID=function(){var e="0123456789abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz",t=29;function a(){var e;do{e=Math.floor(992*Math.random())}while(e>61);return e}for(var n="",r=0;r<29;r++)n+=e.charAt(a());return n+=Math.floor((new Date).getTime()/1e3)},a.evalTemplate=function(e,t,a){if(e&&t){var n={regex:/\|\![\w\W]*?(\!\|)/g,length:2},r=e.match(n.regex);if(r)for(var i=0;i<r.length;i++){var o=r[i].match(/\w+/gi)||"",s=t[o[0]],d=r[i].substr(n.length,r[i].length-2*n.length),l=d.match(/[\{<\(]/g)?d.match(/[\{<\(]/g).reverse():[],c=d.match(/[\}>\)]/g)||[],u=Math.min(l.length,c.length);if(u>0&&s)for(var p=0;p<u;p++)M(l[p],c[p])&&(s=R(l[p],d,s,a));o&&o.length>0&&"nol_imrid"!==o[0].toLowerCase()&&(e=e.replace(r[i],s||""))}}return e},a.bindPlayers=function(e,t){var n;if(t)for(n in a.availModules[t]=e,a._players)a._players.hasOwnProperty(n)&&1==a._players[n].init&&(a._players[n].modules[t]||(a._players[n][t]=new e.init(a._players[n]),a._players[n].modules[t]=2))},a.enablePlayer=function(e,t){e&&t&&(a._players[e].modules[t]=2)},a.registerListener=function(e,t){t&&(t.addListener(e,function(t){a._listeners.fireEvent(e,t)}),t.init||(t.init=1,B(t)))},a.updateReceiver=function(e){N(e)},a._listeners=a._listeners||new P,a.configController={_keys:{cmsKey:"nol_clientCMSmap",cmsMapRegex:/[\[\{<\(\}\]>\)]/g},getGlobal:function e(t,a){return t&&a&&a.nol_GLOBALS&&a.nol_GLOBALS[t]||""},cmsMap:function e(t,a){var n=this.getGlobal(this._keys.cmsKey,a),r;return n&&n[t]?n[t].replace(this._keys.cmsMapRegex,"").toString():""}},a.scriptController={inject:function e(t,a,n,r){if(t){var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.async=!0,i.onload=n,i.onerror=r,i.src=t;var o=null,a;if("script"===(a=a||"")){if((o=document.getElementsByTagName("script"))&&o.length>0)return void(a=o[0].parentNode.insertBefore(i,o[0]))}else if("head"===a){if((o=document.getElementsByTagName("header"))&&o.length>0)return void(a=o[0].appendChild(i))}else if(a&&"string"==typeof a){if((a=document.getElementById(a))&&"function"==typeof a.insertBefore)return void a.parentNode.insertBefore(i,a)}else if(a&&"object"===(void 0===a?"undefined":_typeof(a))&&a.appendChild&&"function"==typeof a.appendChild)return void a.appendChild(i);document.body.appendChild(i)}}},!a.built){try{u.browserSafeAddEventListener({element:e,eventType:"message",func:function t(n){var r,i,s;if(n.data&&"nolInit"==n.data&&e.self===e.top)for(i=(r=e.document.getElementsByTagName("iframe")).length-1;i>=0;i--)r[i].contentWindow==n.source&&a.postMsgAvail&&n.source.postMessage({nolSentFromBsdk:!0,key:"nolChildReg",parentID:a.id},0===e.location.protocol.indexOf("http")?n.origin:"*");else n.data&&n.data.key&&"nolChildReg"==n.data.key&&(a.parentFound=!0,e.clearInterval(o));if(a&&a.PLDCR&&a.PLDCR.dcrTimer&&("bsdk_play"===n.data.action&&(!a.PLDCR.dcrTimer.isActive&&a.globalHasFocus&&a.globalHasFocus()&&(a.PLDCR.dcrTimer.play(a.PLDCR._reset),a.PLDCR._reset=!1,a._listeners.fireEvent("info",{type:"info",msg:"Received "+n.data.action+" action from iframe window and starting static timer"})),a.PLDCR.focusTimer&&a.PLDCR.focusTimer.intervalID&&(clearInterval(a.PLDCR.focusTimer.intervalID),a.PLDCR.focusTimer.intervalID=null)),"bsdk_pause"===n.data.action&&a.PLDCR.dcrTimer.isActive&&a.globalHasFocus&&!a.globalHasFocus()&&(a.flushEvent&&n.data.evt&&a.flushEvent({type:n.data.evt}),a.PLDCR.dcrTimer.reset(),a.PLDCR.dcrTimer.pause(),a.PLDCR.safeFocusOn&&(a.PLDCR.safeFocusOn=!1),a._listeners.fireEvent("info",{type:"info",msg:"Received "+n.data.action+" action from iframe window and stopping static timer"}))),n.origin&&n.origin.indexOf("imrworldwide.com")>-1&&n.data||n.data&&n.data.nolSentFromLs){var d=""!==n.data.val&&a.isValidJson(n.data.val)?JSON.parse(n.data.val):n.data.val,l=""!==n.data.key&&a.isValidJson(n.data.key)?JSON.parse(n.data.key):n.data.key;if(n.data&&"lsget"===n.data.type)switch(l){case S:var c="OPTOUT"===String(d).toUpperCase();a.setLsId(d),a.gotLSID=!0,a._listeners.fireEvent("sendOptOutStatus",c);break;case C:a.EMMURL=d,a.gotEMMURL=!0}else if(n.data&&"lsbroadcast"===n.data.type){var u=String(n.data.newValue).toUpperCase().replace(/"/gi,"");switch(l){case S:u&&"-1"!==u||k(u=a.generateGUID()),a.localStorageId=u,a._listeners.fireEvent("sendOptOutStatus","OPTOUT"===u);break;case C:a.EMMURL=d}}else if(n.data&&"cookieget"===n.data.type)switch(l){case b:a.optoutCookie=d,a.gotOptoutCookie=!0;break;case"cookieall":a.cookie.cache(d),a.gotCookies=!0,a._listeners.fireEvent("debug",{type:"debug",msg:"Got cookie value ='"+d+"'"})}else if(n.data&&"lsdisabled"===n.data.type&&1==n.data.val)switch(a.thirdPartyData.localStorageEnabled=!1,n.data.key){case S:a.gotLSID=!0;break;case C:a.gotEMMURL=!0}else n.data&&"cookiedisabled"===n.data.type&&1==n.data.val&&(a.thirdPartyData.cookiesEnabled=!1,n.data.key===b&&(a.gotOptoutCookie=!0,a.gotCookies=!0));a.gotLSID&&a.gotEMMURL&&a.gotOptoutCookie&&a.gotCookies&&D()}},useCapture:!1}),void 0===n&&(n=e.setInterval(function(e){a._listeners.fireEvent("tick",e)},1e3)),a.childGlobal&&(o=e.setInterval(function(){h()},500))}catch(e){}a.CryptoJS=a.CryptoJS||function(e,t){var a={},n=a.lib={},r=function e(){},i=n.Base={extend:function e(t){r.prototype=this;var a=new r;return t&&a.mixIn(t),a.hasOwnProperty("init")||(a.init=function(){a.$super.init.apply(this,arguments)}),a.init.prototype=a,a.$super=this,a},create:function e(){var t=this.extend();return t.init.apply(t,arguments),t},init:function e(){},mixIn:function e(t){for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function e(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function e(a,n){a=this.words=a||[],this.sigBytes=n!=t?n:4*a.length},toString:function e(t){return(t||d).stringify(this)},concat:function e(t){var a=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)a[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)a[r+i>>>2]=n[i>>>2];else a.push.apply(a,n);return this.sigBytes+=t,this},clamp:function t(){var a=this.words,n=this.sigBytes;a[n>>>2]&=4294967295<<32-n%4*8,a.length=e.ceil(n/4)},clone:function e(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function t(a){for(var n=[],r=0;r<a;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,a)}}),s=a.enc={},d=s.Hex={stringify:function e(t){var a=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=a[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function e(t){for(var a=t.length,n=[],r=0;r<a;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,a/2)}},l=s.Latin1={stringify:function e(t){var a=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(a[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function e(t){for(var a=t.length,n=[],r=0;r<a;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,a)}},c=s.Utf8={stringify:function e(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function e(t){return l.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function e(){this._data=new o.init,this._nDataBytes=0},_append:function e(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function t(a){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,d=i/(4*s),d;if(a=(d=a?e.ceil(d):e.max((0|d)-this._minBufferSize,0))*s,i=e.min(4*a,i),a){for(var l=0;l<a;l+=s)this._doProcessBlock(r,l);l=r.splice(0,a),n.sigBytes-=i}return new o.init(l,i)},clone:function e(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function e(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function e(){u.reset.call(this),this._doReset()},update:function e(t){return this._append(t),this._process(),this},finalize:function e(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function e(t){return function(e,a){return new t.init(a).finalize(e)}},_createHmacHelper:function e(t){return function(e,a){return new p.HMAC.init(t,a).finalize(e)}}});var p=a.algo={};return a}(Math),E=a.CryptoJS,w=E.lib.WordArray,E.enc.Base64={stringify:function e(t){var a=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var o=(a[i>>>2]>>>24-i%4*8&255)<<16|(a[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|a[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)t.push(r.charAt(o>>>6*(3-s)&63));if(a=r.charAt(64))for(;t.length%4;)t.push(a);return t.join("")},parse:function e(t){var a=t.length,n=this._map,r;(r=n.charAt(64))&&-1!=(r=t.indexOf(r))&&(a=r);for(var r=[],i=0,o=0;o<a;o++)if(o%4){var s=n.indexOf(t.charAt(o-1))<<o%4*2,d=n.indexOf(t.charAt(o))>>>6-o%4*2;r[i>>>2]|=(s|d)<<24-i%4*8,i++}return w.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,a,n,r,i,o){return((e=e+(t&a|~t&n)+r+o)<<i|e>>>32-i)+t}function n(e,t,a,n,r,i,o){return((e=e+(t&n|a&~n)+r+o)<<i|e>>>32-i)+t}function r(e,t,a,n,r,i,o){return((e=e+(t^a^n)+r+o)<<i|e>>>32-i)+t}function i(e,t,a,n,r,i,o){return((e=e+(a^(t|~n))+r+o)<<i|e>>>32-i)+t}for(var o=a.CryptoJS,s,d=(s=o.lib).WordArray,l=s.Hasher,s=o.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;s=s.MD5=l.extend({_doReset:function e(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function e(a,o){for(var s=0;16>s;s++){var d,l=a[d=o+s];a[d]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s=this._hash.words,d=a[o+0],l=a[o+1],u=a[o+2],p=a[o+3],v=a[o+4],m=a[o+5],f=a[o+6],g=a[o+7],_=a[o+8],y=a[o+9],h=a[o+10],P=a[o+11],S=a[o+12],b=a[o+13],T=a[o+14],C=a[o+15],L,O,E,w,L=t(L=s[0],O=s[1],E=s[2],w=s[3],d,7,c[0]),w=t(w,L,O,E,l,12,c[1]),E=t(E,w,L,O,u,17,c[2]),O=t(O,E,w,L,p,22,c[3]),L=t(L,O,E,w,v,7,c[4]),w=t(w,L,O,E,m,12,c[5]),E=t(E,w,L,O,f,17,c[6]),O=t(O,E,w,L,g,22,c[7]),L=t(L,O,E,w,_,7,c[8]),w=t(w,L,O,E,y,12,c[9]),E=t(E,w,L,O,h,17,c[10]),O=t(O,E,w,L,P,22,c[11]),L=t(L,O,E,w,S,7,c[12]),w=t(w,L,O,E,b,12,c[13]),E=t(E,w,L,O,T,17,c[14]),O,L=n(L,O=t(O,E,w,L,C,22,c[15]),E,w,l,5,c[16]),w=n(w,L,O,E,f,9,c[17]),E=n(E,w,L,O,P,14,c[18]),O=n(O,E,w,L,d,20,c[19]),L=n(L,O,E,w,m,5,c[20]),w=n(w,L,O,E,h,9,c[21]),E=n(E,w,L,O,C,14,c[22]),O=n(O,E,w,L,v,20,c[23]),L=n(L,O,E,w,y,5,c[24]),w=n(w,L,O,E,T,9,c[25]),E=n(E,w,L,O,p,14,c[26]),O=n(O,E,w,L,_,20,c[27]),L=n(L,O,E,w,b,5,c[28]),w=n(w,L,O,E,u,9,c[29]),E=n(E,w,L,O,g,14,c[30]),O,L=r(L,O=n(O,E,w,L,S,20,c[31]),E,w,m,4,c[32]),w=r(w,L,O,E,_,11,c[33]),E=r(E,w,L,O,P,16,c[34]),O=r(O,E,w,L,T,23,c[35]),L=r(L,O,E,w,l,4,c[36]),w=r(w,L,O,E,v,11,c[37]),E=r(E,w,L,O,g,16,c[38]),O=r(O,E,w,L,h,23,c[39]),L=r(L,O,E,w,b,4,c[40]),w=r(w,L,O,E,d,11,c[41]),E=r(E,w,L,O,p,16,c[42]),O=r(O,E,w,L,f,23,c[43]),L=r(L,O,E,w,y,4,c[44]),w=r(w,L,O,E,S,11,c[45]),E=r(E,w,L,O,C,16,c[46]),O,L=i(L,O=r(O,E,w,L,u,23,c[47]),E,w,d,6,c[48]),w=i(w,L,O,E,g,10,c[49]),E=i(E,w,L,O,T,15,c[50]),O=i(O,E,w,L,m,21,c[51]),L=i(L,O,E,w,S,6,c[52]),w=i(w,L,O,E,p,10,c[53]),E=i(E,w,L,O,h,15,c[54]),O=i(O,E,w,L,l,21,c[55]),L=i(L,O,E,w,_,6,c[56]),w=i(w,L,O,E,C,10,c[57]),E=i(E,w,L,O,f,15,c[58]),O=i(O,E,w,L,b,21,c[59]),L=i(L,O,E,w,v,6,c[60]),w=i(w,L,O,E,P,10,c[61]),E=i(E,w,L,O,u,15,c[62]),O=i(O,E,w,L,y,21,c[63]);s[0]=s[0]+L|0,s[1]=s[1]+O|0,s[2]=s[2]+E|0,s[3]=s[3]+w|0},_doFinalize:function t(){var a=this._data,n=a.words,r=8*this._nDataBytes,i=8*a.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a.sigBytes=4*(n.length+1),this._process(),n=(a=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return a},clone:function e(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}}),o.MD5=l._createHelper(s),o.HmacMD5=l._createHmacHelper(s)}(Math),function(){var e=a.CryptoJS,t,n=(t=e.lib).Base,r=t.WordArray,t,i=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function e(t){this.cfg=this.cfg.extend(t)},compute:function e(t,a){for(var n,i=(n=this.cfg).hasher.create(),o=r.create(),s=o.words,d=n.keySize,n=n.iterations;s.length<d;){l&&i.update(l);var l=i.update(t).finalize(a);i.reset();for(var c=1;c<n;c++)l=i.finalize(l),i.reset();o.concat(l)}return o.sigBytes=4*d,o}});e.EvpKDF=function(e,t,a){return i.create(a).compute(e,t)}}(),a.CryptoJS.lib.Cipher||function(e){var t,n=(t=a.CryptoJS).lib,r=n.Base,i=n.WordArray,o=n.BufferedBlockAlgorithm,s=t.enc.Base64,d=t.algo.EvpKDF,l=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function e(t,a){return this.create(this._ENC_XFORM_MODE,t,a)},createDecryptor:function e(t,a){return this.create(this._DEC_XFORM_MODE,t,a)},init:function e(t,a,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=a,this.reset()},reset:function e(){o.reset.call(this),this._doReset()},process:function e(t){return this._append(t),this._process()},finalize:function e(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function e(t){return{encrypt:function e(a,n,r){return("string"==typeof n?f:m).encrypt(t,a,n,r)},decrypt:function e(a,n,r){return("string"==typeof n?f:m).decrypt(t,a,n,r)}}}});n.StreamCipher=l.extend({_doFinalize:function e(){return this._process(!0)},blockSize:1});var c=t.mode={},u=function t(a,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;o<r;o++)a[n+o]^=i[o]},p=(n.BlockCipherMode=r.extend({createEncryptor:function e(t,a){return this.Encryptor.create(t,a)},createDecryptor:function e(t,a){return this.Decryptor.create(t,a)},init:function e(t,a){this._cipher=t,this._iv=a}})).extend();p.Encryptor=p.extend({processBlock:function e(t,a){var n=this._cipher,r=n.blockSize;u.call(this,t,a,r),n.encryptBlock(t,a),this._prevBlock=t.slice(a,a+r)}}),p.Decryptor=p.extend({processBlock:function e(t,a){var n=this._cipher,r=n.blockSize,i=t.slice(a,a+r);n.decryptBlock(t,a),u.call(this,t,a,r),this._prevBlock=i}}),c=c.CBC=p,p=(t.pad={}).Pkcs7={pad:function e(t,a){for(var n,n,r=(n=(n=4*a)-t.sigBytes%n)<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),t.concat(n)},unpad:function e(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:c,padding:p}),reset:function e(){l.reset.call(this);var t,a=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,a&&a.words)},_doProcessBlock:function e(t,a){this._mode.processBlock(t,a)},_doFinalize:function e(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var a=this._process(!0)}else a=this._process(!0),t.unpad(a);return a},blockSize:4});var v=n.CipherParams=r.extend({init:function e(t){this.mixIn(t)},toString:function e(t){return(t||this.formatter).stringify(this)}}),c=(t.format={}).OpenSSL={stringify:function e(t){var a=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(a):a).toString(s)},parse:function e(t){var a=(t=s.parse(t)).words;if(1398893684==a[0]&&1701076831==a[1]){var n=i.create(a.slice(2,4));a.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:n})}},m=n.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function e(t,a,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return a=i.finalize(a),i=i.cfg,v.create({ciphertext:a,key:n,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function e(t,a,n,r){return r=this.cfg.extend(r),a=this._parse(a,r.format),t.createDecryptor(n,r).finalize(a.ciphertext)},_parse:function e(t,a){return"string"==typeof t?a.parse(t,this):t}}),t=(t.kdf={}).OpenSSL={execute:function e(t,a,n,r){return r||(r=i.random(8)),t=d.create({keySize:a+n}).compute(t,r),n=i.create(t.words.slice(a),4*n),t.sigBytes=4*a,v.create({key:t,iv:n,salt:r})}},f=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:t}),encrypt:function e(t,a,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=m.encrypt.call(this,t,a,n.key,r)).mixIn(n),t},decrypt:function e(t,a,n,r){return r=this.cfg.extend(r),a=this._parse(a,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,a.salt),r.iv=n.iv,m.decrypt.call(this,t,a,n.key,r)}})}(),function(){for(var e=a.CryptoJS,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],o=[],s=[],d=[],l=[],c=[],u=[],p=[],v=[],m=[],f=0;256>f;f++)m[f]=128>f?f<<1:f<<1^283;for(var g=0,_=0,f=0;256>f;f++){var y,y=(y=_^_<<1^_<<2^_<<3^_<<4)>>>8^255&y^99;r[g]=y,i[y]=g;var h=m[g],P=m[h],S=m[P],b=257*m[y]^16843008*y;o[g]=b<<24|b>>>8,s[g]=b<<16|b>>>16,d[g]=b<<8|b>>>24,l[g]=b,b=16843009*S^65537*P^257*h^16843008*g,c[y]=b<<24|b>>>8,u[y]=b<<16|b>>>16,p[y]=b<<8|b>>>24,v[y]=b,g?(g=h^m[m[m[S^h]]],_^=m[m[_]]):g=_=1}var T=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function e(){for(var t,a=(t=this._key).words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;o<t;o++)if(o<n)i[o]=a[o];else{var s=i[o-1];o%n?6<n&&4==o%n&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=T[o/n|0]<<24),i[o]=i[o-n]^s}for(a=this._invKeySchedule=[],n=0;n<t;n++)o=t-n,s=n%4?i[o]:i[o-4],a[n]=4>n||4>=o?s:c[r[s>>>24]]^u[r[s>>>16&255]]^p[r[s>>>8&255]]^v[r[255&s]]},encryptBlock:function e(t,a){this._doCryptBlock(t,a,this._keySchedule,o,s,d,l,r)},decryptBlock:function e(t,a){var n=t[a+1];t[a+1]=t[a+3],t[a+3]=n,this._doCryptBlock(t,a,this._invKeySchedule,c,u,p,v,i),n=t[a+1],t[a+1]=t[a+3],t[a+3]=n},_doCryptBlock:function e(t,a,n,r,i,o,s,d){for(var l=this._nRounds,c=t[a]^n[0],u=t[a+1]^n[1],p=t[a+2]^n[2],v=t[a+3]^n[3],m=4,f=1;f<l;f++)var g=r[c>>>24]^i[u>>>16&255]^o[p>>>8&255]^s[255&v]^n[m++],_=r[u>>>24]^i[p>>>16&255]^o[v>>>8&255]^s[255&c]^n[m++],y=r[p>>>24]^i[v>>>16&255]^o[c>>>8&255]^s[255&u]^n[m++],v=r[v>>>24]^i[c>>>16&255]^o[u>>>8&255]^s[255&p]^n[m++],c=g,u=_,p=y;g=(d[c>>>24]<<24|d[u>>>16&255]<<16|d[p>>>8&255]<<8|d[255&v])^n[m++],_=(d[u>>>24]<<24|d[p>>>16&255]<<16|d[v>>>8&255]<<8|d[255&c])^n[m++],y=(d[p>>>24]<<24|d[v>>>16&255]<<16|d[c>>>8&255]<<8|d[255&u])^n[m++],v=(d[v>>>24]<<24|d[c>>>16&255]<<16|d[u>>>8&255]<<8|d[255&p])^n[m++],t[a]=g,t[a+1]=_,t[a+2]=y,t[a+3]=v},keySize:8});e.AES=t._createHelper(n)}(),a.built=!0}if(e.gg_nol_CallBack)for(r=0,i=e.gg_nol_CallBack.length;r<i;r+=1)e.gg_nol_CallBack[r]&&e.gg_nol_CallBack[r].callBack&&e.gg_nol_CallBack[r].callBack(a);return a}),e.NOLBUNDLE.registerLib("PLSTM",function(t){if(!t.PLSTM){var a=t.GLCFG||t;t.PLSTM={},ns=e.NOLBUNDLE,paramsPassed={},stateObject={current:null,static:null,content:null,state:null},errorState={},BUILDVERSION="6.0.0.5",stateEvents={playhead:["playhead","loadmetadata"],pause:["pause","6"],complete:["complete","oncomplete","56","57","staticend","end"],adstop:["adstop"]};var n={clone:function e(t){return JSON.parse(JSON.stringify(t))},essentialKeys:function e(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t)))for(var e=["type","event","playheadPosition","metadata","id3Data","content","ad","static","assetid"],a=Object.keys(t),n=0;n<a.length;n++)for(var r=0;r<e.length;r++)if(a[n].toLowerCase()===e[r].toLowerCase()&&a[n]!==e[r]){var i=this;t[e[r]]=this.clone(t[a[n]]),delete t[a[n]]}},parseType:function e(t){return t&&"string"==typeof t.type?(t.type||"").toLowerCase():t.type},parseEvent:function e(t){if(t&&t.event&&"string"==typeof t.event)for(var a=Object.keys(stateEvents),n=0,r=a.length;n<r;n++)if(stateEvents[a[n]].indexOf(t.event.toLowerCase())>-1)return a[n];return null},hasData:function e(t,a){if(t&&t.metadata&&a){var n=t.metadata[a];return!(!n||null==n||"{}"===JSON.stringify(n))}return!1},copyData:function e(t,a,r){return r&&!r.metadata&&(r.metadata={}),t&&a&&n.hasData(a,t)&&r&&(r.metadata[t]=JSON.parse(JSON.stringify(a.metadata[t]))),r},objDiff:function e(t,a){var n={},r={};if(t&&(n=Object.keys(t).sort()),a&&(r=Object.keys(a).sort()),JSON.stringify(n)!==JSON.stringify(r))return!0;for(var i=0,o=r.length;i<o;i++)if(t[r[i]]!==a[r[i]])return!0;return!1},getDataKey:function e(t,a,n){return t&&a&&t.metadata&&t.metadata[a]&&t.metadata[a][n]||""},getData:function e(t,a){if(t&&a&&t.metadata&&"object"===_typeof(t.metadata[a])&&null!==t.metadata[a])return t.metadata[a]},isValid:function e(t){return null!=t&&""!==t},isSame:function e(t,a){var n=Object.keys(t).sort();if(n!==Object.keys(a).sort())return!1;for(var r=0,i=n.length,o="";r<i;r++)if(t[n[r]]!==a[n[r]])return!1;return!0},mergeState:function e(t,a){var r=JSON.parse(JSON.stringify(a));return t&&(n.hasData(r,"content")||n.copyData("content",t,r),n.hasData(r,"ad")||n.copyData("ad",t,r),n.hasData(r,"static")||n.copyData("static",t,r)),r},evalMiddlewares:function e(t,a,n){var r=Object.keys(t),i=a.state;return r.forEach(function(e){i=t[e](i,a.prevStateEvent,a.curStateEvent,a.config,n)}),a.state=i,a}},r=function e(t,a){var r=n.clone(a);delete r.prevState;var i={isState:function e(t){if(this.state&&t){if("string"==typeof t)return this.state.toLowerCase()===t.toLowerCase();if("object"===(void 0===t?"undefined":_typeof(t)))return t.indexOf(this.state)>-1}return!1}};return{transitionType:t,event:"",state:r.state||"idle",prevState:r,hasPrevStatic:r.hasNewStatic||!1,hasNewStatic:!1,isNewStatic:!1,hasPrevContent:r.hasNewContent||!1,hasNewContent:!1,isNewContentAsset:!1,contentMetaChangedButThereIsNoAssetId:!1,isContentAfterComplete:!1,hasPrevAd:r.hasNewAd||!1,hasNewAd:!1,isNewAdAsset:!1,hasId3:!1,scroll:!1,isVA:!1,lastPh:r.lastPh,isState:i.isState}},i={start:function e(t,i,s,d){try{var l=new r(n.parseType(s),t),c=Object.keys(o),u=t,p=i,v=s;l.isVA=d&&d.nol_GLOBALS&&"601"===d.nol_GLOBALS.nol_nsdkv,l.transitionType=n.parseType(s),l.event=n.parseEvent(s);var m=c.map(function(e){l[e]=o[e]&&o[e](l,p,v,d)||!1}).filter(function(e){return!(""===e||null==e)});return l}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition start error - "+e.message})}return t},preTransitionEvents:function e(t,r,i,o,s){try{var d=t.lastPh;(t.isStaticChange||t.isStaticComplete)&&s("staticend",n.getData(r||{},"static")||0),(t.isAdChange||t.isAdComplete)&&(t&&"complete"===t.event?s("57",d):s("stop",d)),t.isContentChange||t.isContentComplete?s("end",d):("pause"===t.event||t.contentToAdTransition||t.adToContentTransition)&&s("pause",d)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pre-transition error - "+e.message})}return t},transition:function e(t,n,r,i){try{"static"!==t.transitionType&&("pause"===t.event?t.state="ad"===t.transitionType?"adpaused":"contentpaused":"ad"===t.transitionType&&["adstop","complete"].indexOf(t.event)>-1?t.state="adcomplete":"content"===t.transitionType&&"complete"===t.event?t.state="contentcomplete":"playhead"===t.event&&(t.state="ad"===t.transitionType?"ad":"content"))}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition error - "+e.message})}return t},postTransitionEvents:function e(t,r,i,o,s){try{var d=n.getData(i,"content")||n.getData(r,"content"),l=n.getData(i,"static")||n.getData(r,"static"),c=t.lastPh;t.isNewStaticAsset&&s("staticstart",n.getData(i,"static")),t.scroll&&(t.hasPrevStatic||t.hasNewStatic)&&s("onpaginate",l),t.inAdContentMetaUpdate&&"playhead"===t.event&&i.playheadPosition&&s("setplayheadposition",i.playheadPosition),(t.isNewContentAsset||t.inAdContentMetaUpdate||t.adToContentTransition||t.isContentAfterComplete||t.contentMetaChangedButThereIsNoAssetId&&t.hasId3)&&s("loadmetadata",d),t.contentMetaChanged&&!t.isNewContentAsset&&s("updatemetadata",d),"ad"===t.transitionType&&(t.isNewAdAsset||t.contentToAdTransition)?s("loadmetadata",n.getData(i,"ad")):!t.isNewContentAsset&&t.inAdContentMetaUpdate&&s("changecontext","ad"),t.hasId3&&s("sendid3",i.id3Data),null!==i.volume&&void 0!==i.volume&&s("volume",i.volume),t.isOtt&&s("updateott",i.ottData),t.isBuffering&&s("buffering",c),i.buttonEvent&&s("buttonevent",i.buttonEvent),"playhead"===t.event&&i.playheadPosition&&!t.inAdContentMetaUpdate&&("content"===t.transitionType&&(t.hasNewContent||t.hasPrevContent)||"ad"===t.transitionType&&(t.hasNewAd||t.hasPrevAd))&&s("setplayheadposition",i.playheadPosition)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent post-transition error - "+e.message})}return t},end:function e(t,r,i,o){try{i.metadata||(i.metadata={}),t.isNewAdAsset||!t.isAdComplete&&!t.isContentChange?!t.hasNewAd&&t.hasPrevAd&&n.copyData("ad",r,i):i.metadata.ad={},(!t.isNewContentAsset&&t.isContentComplete||!t.hasNewContent&&t.hasPrevContent)&&n.copyData("content",r,i),t.isStaticComplete?i.metadata.static={}:!t.hasNewStatic&&t.hasPrevStatic&&n.copyData("static",r,i)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition end error - "+e.message})}return t}},o={hasPrevStatic:function e(t,a,r,i){return n.hasData(a,"static")},hasPrevContent:function e(t,a,r,i){return n.hasData(a,"content")},hasPrevAd:function e(t,a,r,i){return n.hasData(a,"ad")},hasNewStatic:function e(t,a,r,i){return n.hasData(r,"static")},hasNewContent:function e(t,a,r,i){return n.hasData(r,"content")},hasNewAd:function e(t,a,r,i){return n.hasData(r,"ad")},isNewStaticAsset:function e(t,r,i,o){if(!1===t.hasNewStatic)return!1;var s=a.configController.cmsMap("nol_assetid",o),d=n.getDataKey(r,"static",s),l=n.getDataKey(i,"static",s);return null!=l&&""!==l&&(!t.hasPrevStatic||l!==d)},isNewContentAsset:function e(t,r,i,o){if(!1===t.hasNewContent)return!1;var s=a.configController.cmsMap("nol_assetid",o),d=n.getDataKey(r,"content",s),l=n.getDataKey(i,"content",s);return null!=l&&""!==l&&(!t.hasPrevContent||l!==d)},isContentAfterComplete:function e(t,a,n,r){try{return a&&"complete"===a.event&&n&&"playhead"===n.event&&"content"===n.type}catch(e){return!1}},isNewAdAsset:function e(t,r,i,o){if(!1===t.hasNewAd)return!1;var s=a.configController.cmsMap("nol_assetid",o),d=n.getDataKey(r,"ad",s),l=n.getDataKey(i,"ad",s),c=a.configController.cmsMap("nol_adIdx",o)||"adIdx",u=n.getDataKey(r,"ad",c),p=n.getDataKey(i,"ad",c);return null!=l&&""!==l&&(!t.hasPrevAd||l!==d)||t.hasPrevAd&&p!==u||n.getDataKey(r,"ad","type")!==n.getDataKey(i,"ad","type")},contentMetaChanged:function e(t,a,r,i){return!1!==t.hasNewContent&&!1!==t.hasPrevContent&&n.objDiff(n.getData(a,"content"),n.getData(r,"content"))},hasNewContentEx:function e(t,a,r,i){return!1!==t.hasNewContent&&n.objDiff(n.getData(a,"content"),n.getData(r,"content"))},contentMetaChangedButThereIsNoAssetId:function e(t,r,i,o){var s=a.configController.cmsMap("nol_assetid",o),d=n.getDataKey(i,"content",s),l=null==d||""===d;return t.hasNewContentEx&&l},adMetaChanged:function e(t,a,r,i){return!1!==t.hasNewAd&&!1!==t.hasPrevAd&&n.objDiff(n.getData(a,"ad"),n.getData(r,"ad"))},hasId3:function e(t,a,n,r){return null!==n.id3Data&&void 0!==n.id3Data&&""!==n},scroll:function e(t,a,n,r){return"static"===t.transitionType&&n.scroll&&["true","1","y","yes"].indexOf(n.scroll.toString().toLowerCase())>-1},isStaticChange:function e(t){return t.isNewStaticAsset&&t.hasPrevStatic},isStaticComplete:function e(t){return"static"===t.transitionType&&"complete"===t.event},isContentChange:function e(t){return t.isNewContentAsset&&t.hasPrevContent&&!t.isState("contentcomplete")&&"playhead"===t.event},adToContentTransition:function e(t){return t.isState(["ad","adpaused","adcomplete"])&&"content"===t.transitionType&&"playhead"===t.event&&(t.hasPrevContent||t.hasNewContent)},contentToAdTransition:function e(t,a,n){return t.isState(["content","contentpaused"])&&"ad"===t.transitionType&&"playhead"===t.event&&t.hasNewAd},isContentComplete:function e(t,a,n){return"content"===t.transitionType&&t.isState(["content","contentpaused"])&&"complete"===t.event},isAdChange:function e(t){return t.isNewAdAsset&&t.hasPrevAd&&t.isState(["ad","adpaused"])&&!t.isState("adcomplete")&&"playhead"===t.event},isAdComplete:function e(t){return t.isState(["ad","adpaused"])&&("complete"===t.event||t.isAdChange)||"adstop"===t.event&&t.hasPrevAd},inAdContentMetaUpdate:function e(t){return(t.contentMetaChanged||t.isNewContentAsset)&&"ad"===t.transitionType},isOtt:function e(t,a,n){return null!==n.ottData&&void 0!==n.ottData&&""!==n.ottData},isBuffering:function e(t,a,n){return null!==n.buffering&&void 0!==n.buffering&&""!==n.buffering&&["1","true","t","y","yes"].indexOf(n.buffering.toString().toLowerCase())},lastPh:function e(t,a,r){return n.isValid(a.playheadPosition)?a.playheadPosition:t.lastPh||0}};return t.PLSTM.stateMachine=function(e,t){var r={config:t,curStateEvent:{metadata:{}},prevStateEvent:{medata:{}},state:{}};return{transition:function t(o,s){try{if(o&&"object"===(void 0===o?"undefined":_typeof(o))&&(o=n.clone(o),n.essentialKeys(o)),a._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent called pli="+e+" transitioning type "+o.type+" for event "+o.event+" state object: "+JSON.stringify(o)}),o&&"object"===(void 0===o?"undefined":_typeof(o))){var d=this;o.type&&"string"==typeof o.type&&(o.type=o.type.toLowerCase()),o.event&&"string"==typeof o.event&&(o.event=o.event.toLowerCase());var l=n.parseType(o),c=n.parseEvent(o);if(o.metadata&&n.essentialKeys(o.metadata),!l)return"playhead"===c&&void 0===n.getData(o,"content")&&void 0===n.getData(o,"ad")?void this.checkID3(o,s):(errorState.missingType?a._listeners.fireEvent("error",{type:"error",msg:'Error in trackEvent() - Missing "type" parameter in trackEvent metadata object'}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "type" parameter in trackEvent metadata object'},id:e,timeStamp:Date.now()}),errorState.missingType=!0),void this.checkID3(o,s));if(-1===["","content","ad","static"].indexOf(l))return errorState.invalidType?a._listeners.fireEvent("error",{type:"error",msg:'Error in trackEvent() - Invalid "type" parameter '+l+" in trackEvent metadata object"}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Invalid "type" parameter '+l+" in trackEvent metadata object"},id:e,timeStamp:Date.now()}),errorState.invalidType=!0),void this.checkID3(o,s);if(!c)return errorState.missingEvent?a._listeners.fireEvent("error",{type:"error",msg:'Error in trackEvent() - Missing "event" parameter in trackEvent metadata object'}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "event" parameter in trackEvent metadata object'},id:e,timeStamp:Date.now()}),errorState.missingEvent=!0),void this.checkID3(o,s);if(!this.checkMetadata(o,s))return;r.prevStateEvent=r.curStateEvent?n.clone(r.curStateEvent):{metadata:{content:null,ad:null,static:null}},r.curStateEvent=n.clone(o),r=n.evalMiddlewares(i,r,function(t,n){a._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent pli="+e+' firing event "'+t+'"'}),s&&"function"==typeof s&&s(t,n)})}}catch(t){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pli="+e+" error - "+t.message})}},getState:function e(){return r.state},checkID3:function e(t,a){return!!t.id3Data&&(a&&"function"==typeof a&&a("55",t.id3Data),!0)},checkMetadata:function t(i,o){var s=this;""===i.id3Data&&delete i.id3Data;var d=n.getData(i,"content"),l=n.getData(i,"ad"),c=n.getData(i,"static");if(d&&"object"===(void 0===d?"undefined":_typeof(d))){if(n.essentialKeys(d),d.type&&"string"==typeof d.type&&-1!==["preroll","midroll","postroll","ad"].indexOf(d.type.toLowerCase())&&"content"===i.type)return errorState.invalidTypeContent?a._listeners.fireEvent("error",{type:"error",msg:"Error in trackEvent() - Valid ad type "+d.type+" parameter in content trackEvent metadata object"}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Valid ad type "+d.type+" parameter in content trackEvent metadata object"},id:e,timeStamp:Date.now()}),errorState.invalidTypeContent=!0),this.checkID3(i,o),!1;d.type="content",d.assetid||"content"!==i.type||(errorState.noAssetIdContent?a._listeners.fireEvent("error",{type:"error",msg:"Error in trackEvent() - no assetId in content metadata, will not be credited"}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - no assetId in content metadata, will not be credited"},id:e,timeStamp:Date.now()}),errorState.noAssetIdContent=!0))}if(l&&"object"===(void 0===l?"undefined":_typeof(l))){if(n.essentialKeys(l),"content"===l.type&&"ad"===i.type)return errorState.invalidTypeAd?a._listeners.fireEvent("error",{type:"error",msg:"Error in trackEvent() - Valid content type "+l.type+" parameter in ad trackEvent metadata object"}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Valid content type "+l.type+" parameter in ad trackEvent metadata object"},id:e,timeStamp:Date.now()}),errorState.invalidTypeAd=!0),this.checkID3(i,o),!1;l.type&&"string"==typeof l.type&&-1!==["preroll","midroll","postroll","ad"].indexOf(l.type.toLowerCase())||(l.type="ad"),l.assetid||"ad"!==i.type||(errorState.noAssetIdAd?a._listeners.fireEvent("error",{type:"error",msg:"Error in trackEvent() - no assetId in ad metadata, will not be credited"}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - no assetId in ad metadata, will not be credited"},id:e,timeStamp:Date.now()}),errorState.noAssetIdAd=!0))}return c&&"object"===(void 0===c?"undefined":_typeof(c))&&(n.essentialKeys(c),c.type="static",c.assetid||"static"!==i.type||(errorState.noAssetIdStatic?a._listeners.fireEvent("error",{type:"error",msg:"Error in trackEvent() - no assetId in static metadata, will not be credited"}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - no assetId in static metadata, will not be credited"},id:e,timeStamp:Date.now()}),errorState.noAssetIdStatic=!0))),!(r&&r.curStateEvent&&r.curStateEvent.metadata&&!n.getData(i,i.type)&&!r.curStateEvent.metadata[i.type])||(errorState.missingMetadata?a._listeners.fireEvent("error",{type:"error",msg:"Error in trackEvent() - Have not recieved "+i.type+" metadata and an event was called for "+i.type}):(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Have not received "+i.type+" metadata and an event was called for "+i.type},id:e,timeStamp:Date.now()}),errorState.missingMetadata=!0),this.checkID3(i,o),!1)}}},t.PLSTM}}),e.NOLBUNDLE.registerLib("PLVBL",function(t){if(!t.PLVBL){var a="6.0.1",n="nol_viewability",r="nol_vizuURL",i="nol_vsData",o="nol_scrnSize",s="nol_vidSize",d="nol_winSize",l="nol_nodeId",c="nol_auThreshold",u="nol_volume",p="nol_auData",v="nol_id3IntrvlGp",m="nol_viTickOffset",f=function t(){return[e.screen.width,e.screen.height]},g=function e(t,a){return t?"width"===a?t.clientWidth:"height"===a?t.clientHeight:[t.clientWidth,t.clientHeight]:""},_=function t(){var a,n;return[e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight]},y=t.GLCFG||t;return t.PLVBL=function(e,a,_){var h={initialized:!1,_defaults:{nol_viewability:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_auThreshold:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_volume:t.configController.getGlobal(u,a.getClientConfig())||"100",nol_viTickOffset:2},viReadyQueue:[],clientConfig:a.getClientConfig(),globals:a.getConfigParams().ggParams,cmsMap:null,nodeId:"",node:null,viewAPI:null,viewRatios:null,vizuURL:"",viewParams:null,volume:null,auThresholds:[],intervalGap:2,state:"idle",queueTicks:_||!1,ticker:null,tickerInterval:1e3,screenSeries:"",viewSeries:[],elementSeries:"",viewportSeries:"",audibilitySeries:[]},P={log:function t(a,n){y._listeners.fireEvent(a,{type:a,msg:e.get("nol_comment")+" - "+n})},incrementSeries:function e(t,a){var n=null;t?n=t[t.length-1]:t=[],n&&2===n.length&&n[0]===a?n[1]++:t.push([a,1])},clearSeries:function e(t){h.viewSeries=[],h.screenSeries="",h.elementSeries=[],h.viewportSeries=[],h.audibilitySeries=[],t?P.registerVIDataReady(function(){h.viewAPI&&h.viewAPI.resetMeasurement()},"clear"):h.viewAPI&&h.viewAPI.resetMeasurement()},setDataSeries:function e(t,a){t&&"function"==typeof t.set&&(t.set(i,a?"[]":JSON.stringify(h.viewSeries)),t.set(d,a?"[]":JSON.stringify(h.viewportSeries)),t.set(s,a?"[]":JSON.stringify(h.elementSeries)),t.set(o,a?"":h.screenSeries),t.set(p,a?"[]":JSON.stringify(h.audibilitySeries)))},getDataSeries:function e(){var t={};return t[i]=h.viewSeries,t[d]=h.viewportSeries,t[s]=h.elementSeries,t[o]=h.screenSeries,t[p]=h.audibilitySeries,t},getNodeId:function e(){var t=y.configController.cmsMap(l,h.clientConfig);return h.globals?h.globals[t]:""},getVolumeParam:function e(){var t=y.configController.cmsMap(u,h.clientConfig)||u;return h.globals?h.globals[t]:""},evalUpperThreshold:function e(t,a){if(null!=t&&""!==t&&t>=0&&a&&a.length>0)for(var n=0,r=a.length;n<r;n++){if(t<a[n]&&0==n)return 0;if(n==r-1&&t>=a[n])return parseFloat(a[n]);if(t<a[n])return parseFloat(a[n-1])}return 0},evalVolume:function e(t){if(null!=t&&t.toString().match(/^\d*\.?\d*$/gi)&&"NaN"!==parseFloat(t).toString()&&"NaN"!==parseInt(t).toString()){var a=t;return!a.toString().match(/\d*\.\d+/i)&&(parseFloat(a)>1||"1"===a.toString())&&(a=parseFloat(a)/100),a=Math.round(100*P.evalUpperThreshold(parseFloat(a),h.auThresholds))}return null},getThreshold:function e(a,n){if(a&&n){try{var r=t.configController.getGlobal(a,n.clientConfig),i="string"==typeof r?JSON.parse(r):r,o=!0;if(i&&"object"===(void 0===i?"undefined":_typeof(i))&&i.length>0){for(var s=null,d=0,l=i.length;d<l;d++)if(!i[d].toString().match(/^\d*\.?\d*$/gi)){o=!1;break}if(o)return i}}catch(e){P.log("warn","Viewabilty config theshold for "+a+" is invalid. Default threshold will be used")}var c=n._defaults?n._defaults[a]:[];return"string"==typeof c?JSON.parse(c):c}return[]},registerVIDataReady:function e(t,a){t&&"function"==typeof t&&(h.viReadyQueue||(h.viReadyQueue=[]),h.viReadyQueue.push({name:a,cb:t}))},flushVIDataReadyQueue:function e(){if(h.viReadyQueue&&h.viReadyQueue.length>0)for(var t=null,a=0;a<h.viReadyQueue.length;a++)if("function"==typeof(t=h.viReadyQueue[a].cb))try{t(),h.viReadyQueue.splice(0,1)}catch(e){}}},S={init:function a(i){try{if(i){P.log("debug","Initializing viewability module"),h.nodeId=i,h.node=document.getElementById(i),h.viewRatios=P.getThreshold(n,h),h.vizuURL=y.PLDPR.resolveExpression(y.configController.getGlobal(r,h.clientConfig),e),h.auThresholds=P.getThreshold(c,h);var o=t.configController.getGlobal(u,h.clientConfig);h._defaults[u]=o&&"NaN"!==parseInt(o).toString()?o:h._defaults[u],h.volume=P.evalVolume(P.getVolumeParam()||parseInt(h._defaults[u])),h.intervalGap=e.isProductOf(["mtvr","mtvrsubminute"])?t.configController.getGlobal(v,h.clientConfig):t.configController.getGlobal(m,h.clientConfig)||h._defaults[m],h.viewParams={externalTick:1,instantOn:0,node:h.node,width:g(h.node,"width"),height:g(h.node,"height"),ratio:h.viewRatios,tickOffset:parseInt(h.intervalGap),ffThreshold:parseInt(h.intervalGap)},h.vizuURL&&h.node?(y.scriptController.inject(h.vizuURL,h.nodeId,function(){if("function"==typeof getVIAPI){if(h.viewAPI=getVIAPI(),!h.viewAPI)return void P.log("warn","Viewability API not instantiated by viewability library. Unable to initialize viewability module.");h.viewAPI.initVI(h.viewParams),h.initialized=!0,h.viewAPI.subscribe(P.flushVIDataReadyQueue,"VIExternalDataReady",this),P.log("debug","Viewability module successfully initialized")}}),P.log("info","Viewabilty module injected")):P.log("warn","Viewabilty library URL not defined in config. Unable to initialize viewability module.")}}catch(e){P.log("warn","Failed to initialize viewability module."),h.initialized=!1}},start:function e(t){"running"!==h.state&&h.initialized&&(h.viewAPI.startVI(),h.state="running")},stop:function e(){"stopped"!==h.state&&h.initialized&&(h.viewAPI.stopVI(),h.state="stopped")},tick:function e(t,a,n){h.initialized&&null!=t&&""!==t&&"NaN"!==Math.floor(t).toString()&&("running"!==h.state&&S.start(),h.viewAPI&&h.viewAPI.updateTick(Math.floor(t),h.volume),h.screenSeries=f().join("x")),P.registerVIDataReady(n,"tick_"+t)},setData:function e(t){h.initialized&&(h.viewSeries=h.viewAPI&&h.viewAPI.getVideoSeries?h.viewAPI.getVideoSeries():[],h.audibilitySeries=h.viewAPI&&h.viewAPI.getAudioSeries?h.viewAPI.getAudioSeries():[],h.viewportSeries=h.viewAPI&&h.viewAPI.getViewportSeries?h.viewAPI.getViewportSeries():[],h.elementSeries=h.viewAPI&&h.viewAPI.getElementSizeSeries?h.viewAPI.getElementSizeSeries():[],h.screenSeries=f().join("x"),P.setDataSeries(t))},setVolume:function e(t){if(h.initialized&&t){var a=P.evalVolume(t);null!=a&&""!==a&&"NaN"!==parseInt(t).toString()?(h.volume=a,P.log("debug","Audibiliy volume set to "+a)):P.log("debug",'Volume "'+t+'" is invalid. Volume set will be ignored.')}},clear:function e(t,a){h.initialized&&P.clearSeries(a),t&&(P.log("debug","Viewability resetting"),P.setDataSeries(t,!0),setTimeout(function(){P.setDataSeries(t,!0)}))}};return e.get("nol_url").indexOf(i)>-1&&(P.log("debug","Viewability module loaded"),S.init(P.getNodeId())),{initialized:function e(){return h.initialized},start:S.start,stop:S.stop,tick:S.tick,setData:S.setData,getData:P.getDataSeries,setVolume:S.setVolume,clear:S.clear}},t.PLVBL}}),e.NOLBUNDLE.registerLib("PLSUB",function(t){"use strict";var a={stopped:"stopped",playing:"playing",rewinding:"rewinding",fastforwarding:"fastforwarding",paused:"paused"},n="BT",r=t.PLSUB=t.PLSUB||{},i=e.NOLBUNDLE,o="6.0.0",s="0",d=t.getBaseBuildVer?t.getBaseBuildVer()+"0":"6.0.0"+_localBuildVer,l="nol_eventDataDTVR",c="nol_eventDataDelimiter",u="nol_DTVRDataEvents",p="nol_subminEventDataEnabled",v=":",m=[],f=!1,g=!0,_={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MU"},admodel:{name:"admodel",abbrv:"AM"},flush:{name:"flush",abbrv:"FL"},tsv:{name:"tsv",abbrv:"TSV"},vod:{name:"vod",abbrv:"VC"},prevflush:{name:"prevflush",abbrv:"PFL"}},y={},h={},P="",S={};r.init=function(e){if(e&&e.getConfigParams){if(console.log("PLSUB init called",e.id),!1===f)for(var a in f=!0,i&&i.GLCFG&&void 0!==i.GLCFG._listeners&&(i.GLCFG._listeners.addListener("subMinuteTrackedEvent",T),i.GLCFG._listeners.addListener("tsvupdate",A),i.GLCFG._listeners.addListener("tsvUpdateDelayed",A)),_)P+=_[a].abbrv+":";void 0!==e.localPlsubInitialized&&!1!==e.localPlsubInitialized||(e.localPlsubInitialized=!0,i&&i.GLCFG&&void 0!==i.GLCFG._listeners&&(i.GLCFG._listeners.addListener("tick",function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;a&&(void 0===m[a.id]?m[a.id]=1:m[a.id]+=1),i.GLCFG._listeners.fireEvent("globalSubminuteTick",{event:{player:e},submintick:m[a.id]})}),i.GLCFG._listeners.addListener("updateSubminuteData",function(a){var n,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e).id;r===a.target.passedFdata.get("nol_playerId")&&t.PLSUB.append(a.target.passedFdata,a.target.entry,r)})))}},r.initTag=function(e,t){e&&e._dataArrObj&&e._dataArrObj.content&&void 0!==e._dataArrObj.content[0]?(V(e),t&&t()):b.waitForValidFdata(e).then(function(a){V(e),t&&t()})},r.subminPlayerInitialized=function(e){var t=e.get("nol_playerId"),a=e.get("nol_cidPrefix");return!!(t&&a&&S[t]&&S[t][a])&&S[t][a]},r.setFirstPlayheadReceived=function(e,t){e&&(e._firstPlayheadRecieved=t)},r.getFirstPlayheadReceived=function(e){return!(!e||void 0===e._firstPlayheadRecieved)&&e._firstPlayheadRecieved},r.setDelayedPlayhead=function(e,t){e&&(e._delayedPlayhead=t)},r.getDelayedPlayhead=function(e){return!(!e||void 0===e._delayedPlayhead)&&e._delayedPlayhead},r.lastEventIsFlush=function(e){if(e){var t=b.getEvents(e),a=b.delimeter(e);if(""!==t){var n=t.split(a),r=n&&n.length>0?b.getStateEntryValue(n[n.length-1].split(":")):void 0;if(r&&r===_.flush.abbrv)return!0}}return!1},r.finiteStateMachine=function(e){var t,n,r,o;return e.machine||(e.machine={initialState:a.stopped,statePositions:b.getDefaultStatePositions(),stopped:{actions:{onEnter:function e(t){console.log("stopped: onEnter"),i.GLCFG._listeners.fireEvent("tagStateChangeEnter",{state:a.stopped,eventObj:t})},onExit:function e(t){console.log("stopped: onExit"),i.GLCFG._listeners.fireEvent("tagStateChangeExit",{state:a.stopped,eventObj:t})}},transitions:{play:{target:a.playing,action:function e(t){console.log('transition action for "play" in "stopped" state')}},rewind:{target:a.rewinding,action:function e(t){console.log('transition action for "rewind" in "stopped" state')}},fastforward:{target:a.fastforwarding,action:function e(t){console.log('transition action for "fastforward" in "stopped" state')}},pause:{target:a.paused,action:function e(t){console.log('transition action for "pause" in "stopped" state')}}}},playing:{actions:{onEnter:function e(t){console.log("playing: onEnter"),i.GLCFG._listeners.fireEvent("tagStateChangeEnter",{state:a.playing,eventObj:t})},onExit:function e(t){console.log("playing: onExit"),i.GLCFG._listeners.fireEvent("tagStateChangeExit",{state:a.playing,eventObj:t})}},transitions:{stop:{target:a.stopped,action:function e(t){console.log('transition action for "stop" in "playing" state')}},rewind:{target:a.rewinding,action:function e(t){console.log('transition action for "rewind" in "playing" state')}},fastforward:{target:a.fastforwarding,action:function e(t){console.log('transition action for "fastforward" in "playing" state')}},pause:{target:a.paused,action:function e(t){console.log('transition action for "pause" in "playing" state')}}}},rewinding:{actions:{onEnter:function e(t){console.log("rewinding: onEnter"),i.GLCFG._listeners.fireEvent("tagStateChangeEnter",{state:a.rewinding,eventObj:t})},onExit:function e(t){console.log("rewinding: onExit"),i.GLCFG._listeners.fireEvent("tagStateChangeExit",{state:a.rewinding,eventObj:t})}},transitions:{stop:{target:a.stopped,action:function e(t){console.log('transition action for "stop" in "rewinding" state')}},play:{target:a.playing,action:function e(t){console.log('transition action for "play" in "rewinding" state')}},fastforward:{target:a.fastforwarding,action:function e(t){console.log('transition action for "fastforward" in "rewinding" state')}},pause:{target:a.paused,action:function e(t){console.log('transition action for "pause" in "rewinding" state')}}}},fastforwarding:{actions:{onEnter:function e(t){console.log("fastforwarding: onEnter"),i.GLCFG._listeners.fireEvent("tagStateChangeEnter",{state:a.fastforwarding,eventObj:t})},onExit:function e(t){console.log("fastforwarding: onExit"),i.GLCFG._listeners.fireEvent("tagStateChangeExit",{state:a.fastforwarding,eventObj:t})}},transitions:{stop:{target:a.stopped,action:function e(t){console.log('transition action for "stop" in "fastforwarding" state')}},play:{target:a.playing,action:function t(a){console.log('transition action for "play" in "fastforwarding" state'),b.pushPrevPos(e,e.get("nolPriv_prevPos"),b.getTime())}},rewind:{target:a.rewinding,action:function e(t){console.log('transition action for "rewind" in "fastforwarding" state')}},pause:{target:a.paused,action:function e(t){console.log('transition action for "pause" in "fastforwarding" state')}}}},paused:{actions:{onEnter:function e(t){console.log("paused: onEnter"),i.GLCFG._listeners.fireEvent("tagStateChangeEnter",{state:a.paused,eventObj:t})},onExit:function e(t){console.log("paused: onExit"),i.GLCFG._listeners.fireEvent("tagStateChangeExit",{state:a.paused,eventObj:t})}},transitions:{stop:{target:a.stopped,action:function e(t){console.log('transition action for "stop" in "paused" state')}},play:{target:a.playing,action:function e(t){console.log('transition action for "play" in "paused" state')}},rewind:{target:a.rewinding,action:function e(t){console.log('transition action for "rewind" in "paused" state')}},fastforward:{target:a.fastforwarding,action:function e(t){console.log('transition action for "fastforward" in "paused" state')}}}}},e.machine.currentState=e.machine.initialState),{transition:function e(t,a){var n=a.passedFdata.machine[a.passedFdata.machine.currentState],r=n.transitions[t];if(r){var i=r.target,o=a.passedFdata.machine[i];return r.action(a),n.actions.onExit(a),o.actions.onEnter(a),a.passedFdata.machine.currentState=i,a.passedFdata.machine.currentState}},getMachine:function e(t){return t.machine},getCurrentState:function e(t){return t.machine.currentState},possibleStates:function e(){return a}}},r.eventTypes={PLAY:"PLAY",PLAYHEAD:"PLAYHEAD",SUBMINTICK:"SUBMINTICK",PAUSE:"PAUSE",REWIND:"REWIND",FORWARD:"FORWARD",STOP:"STOP",RESUME:"RESUME",MUTE:"MUTE",VOLUME:"VOLUME",FLUSH:"FLUSH",ADMODEL:"ADMODEL",TSV:"TSV",VOD:"VOD"};var b={getDefaultStatePositions:function e(){return{currPos:{ph:-1,ts:0},prevPos:{ph:-1,ts:0}}},getEvents:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"content",n="";return t&&(n=t.get(l,a||t._currVidType)),n},setEvents:function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"content";return t&&null!=a&&t.set(l,a,n||t._currVidType),t},pushCurrPos:function e(t,a,n){t&&t.machine&&!t.machine.statePositions&&(t.machine.statePositions=b.getDefaultStatePositions()),t&&null!=a&&null!=n&&(t.machine.statePositions.currPos={ph:a,ts:n},-1===t.machine.statePositions.prevPos.ph&&(t.machine.statePositions.prevPos={ph:a,ts:n}))},updatePrevAdModelToDefault:function e(t,a,n){t&&""!==a&&""!==n&&t.set("nol_adModelChange",String(a+"|"+n))},pushPrevPos:function e(t,a,n){t&&t.machine&&!t.machine.statePositions&&(t.machine.statePositions=b.getDefaultStatePositions()),t&&null!=a&&null!=n&&(t.machine.statePositions.prevPos={ph:a,ts:n},-1===t.machine.statePositions.prevPos.ph&&(t.machine.statePositions.prevPos={ph:a,ts:n}))},getStatePositions:function e(t){return t.machine.statePositions||(t.machine.statePositions=b.getDefaultStatePositions()),t.machine.statePositions},updateLastEventEntry:function e(t,a){if(t&&t.machine&&null!=a){b.pushCurrPos(t,t.get("nolPriv_currPos"),b.getTime());var n=b.getEvents(t),r=n.split(":"),i=r.length,o=b.getStateEntryValue(r),s=b.getEventIndiciesForStateEntryModification(o,i);-1!==s.current.offset&&(r[s.current.offset]=a),-1!==s.current.duration&&(r[s.current.duration]=Math.abs(r[i-2]-r[i-3])),n=r.join(":"),b.setEvents(t,n)}},inferEvent:function e(t,a,n,r,i){var o=b.waitForValidFdata(a).then(function(e){if(t&&e&&n&&r){if(""===e.get("nol_currPos")&&"55"===t&&null!=n&&249===n.length){var a=n.split("/");a[1]!==e.get("nol_cidNull")&&"PC_"===e.get("nol_cidPrefix")&&e.set("nol_currPos",a[4]),a[2]!==e.get("nol_cidNull")&&"FD_"===e.get("nol_cidPrefix")&&e.set("nol_currPos",a[5])}var o={event:"event_"+t,curPos:e.get("nol_currPos"),prevPos:e.get("nolPriv_prevPos"),timestamp:r};return i(o),o}})},formatCidPlayhead:function e(t){return t||0===t?String(t).padStart(5,"0"):t},getFormattedEventEntry:function e(t,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="",s="00000",d=b.getTime();if(a=this.formatCidPlayhead(a),n=this.formatCidPlayhead(n),t&&t.name&&null!=a&&null!=n){switch(t.name){case r.eventTypes.PLAY.toLowerCase():case r.eventTypes.PAUSE.toLowerCase():o=[t.abbrv,d,n];break;case r.eventTypes.REWIND.toLowerCase():case r.eventTypes.FORWARD.toLowerCase():o=[t.abbrv,d,n,a,Math.abs(n-a)];break;case r.eventTypes.STOP.toLowerCase():case r.eventTypes.RESUME.toLowerCase():o=[t.abbrv,d,n];break;case r.eventTypes.MUTE.toLowerCase():i&&void 0!==i.volume&&null!==i.volume&&(o=[t.abbrv,d,n,"0"===i.volume?"1":"0"]);break;case r.eventTypes.ADMODEL.toLowerCase():i&&void 0!==i.amval&&null!==i.amval&&void 0!==i.oldamval&&null!==i.oldamval&&(o=[t.abbrv,d,""!==n?n:"00000",i.amval,i.oldamval]);break;case r.eventTypes.FLUSH.toLowerCase():o=[t.abbrv,d,n];break;case r.eventTypes.TSV.toLowerCase():o=[t.abbrv,d,n,i.tsval,i.oldTsval,i.broadcastStartTime];break;case r.eventTypes.VOD.toLowerCase():if(i&&void 0!==i.vcval&&null!==i.vcval&&void 0!==i.prevvcval&&null!==i.prevvcval){o=[t.abbrv,d,""!==n?n:"00000",i.vcval,i.prevvcval];break}o=[t.abbrv,d,n,i.vcval,i.prevvcval]}return o.join(":")}return o},populateEventDataForState:function e(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i="";if(t){var o=b.lookupEvent(t);o&&(i=b.getFormattedEventEntry(o,a,n,r))}return i},waitForValidFdata:function e(t){return new Promise(function(e,a){function n(){t&&t._dataArrObj&&t._dataArrObj.content&&void 0!==t._dataArrObj.content[0]?e(t):setTimeout(n,250)}n()})},getEventIndiciesForStateEntryModification:function e(t,a){var n={current:{offset:-1,duration:-1},new:{offset:-1,duration:-1}};switch(t){case _.play.abbrv:case _.stop.abbrv:case _.pause.abbrv:case _.resume.abbrv:case _.flush.abbrv:n.current.offset=a-1,n.new.offset=2;break;case _.rewind.abbrv:case _.forward.abbrv:n.current.offset=a-2,n.current.duration=a-1,n.new.offset=3,n.new.duration=4;break;case _.mute.abbrv:case _.admodel.abbrv:case _.tsv.abbrv:case _.vod.abbrv:}return n},getStateEntryValue:function e(t){var a="",n=t.length;return a=-1!==P.indexOf(t[n-5])?t[n-5]:-1!==P.indexOf(t[n-3])?t[n-3]:t[n-4]},delimeter:function e(t){var a="~";return t&&t.get(c)||"~"},getPlayheadFromEntry:function e(t,a){var n;return t&&a&&a.split(":")[2]||""},resetAdModelChange:function e(t){t&&t.set("nol_adModelChange","-1|-1")},updateEmptyBroadcastTime:function e(t,a){return a&&":"===a[a.length-1]&&("PC_"===t.get("nol_cidPrefix")?a="BT:"+t.get("nol_pcTimeCode"):"FD_"===t.get("nol_cidPrefix")&&(a="BT:"+t.get("nol_fdTimeCode"))),a},processAppend:function e(t,a){if(t&&a){var n=b.getEvents(t),r=b.delimeter(t);if(""===n){var i=t.get("nolPriv_prevFlushEntry"),o=""!==i?i:b.getPlayheadFromEntry(t,a),s=b.getTime();if(-1!==o.indexOf(":")&&(s=o.split(":")[0],o=o.split(":")[1]),-1!==a.indexOf(_.play.abbrv)){var d=a.split(":");d[2]=o,a=d.join(":")}"PC_"===t.get("nol_cidPrefix")?a="BT:"+t.get("nol_pcTimeCode")+r+_.prevflush.abbrv+":"+s+":"+o+r+a:"FD_"===t.get("nol_cidPrefix")&&(a="BT:"+t.get("nol_fdTimeCode")+r+_.prevflush.abbrv+":"+s+":"+o+r+a)}else{var l=n.split(r);l[0]=this.updateEmptyBroadcastTime(t,l[0]),n=l.join(r);var c=l[l.length-1],u=c.split(":"),p=u.length,v=a.split(":"),m=b.getStateEntryValue(u);if(u[0]!==_.flush.abbrv&&v[0]===_.flush.abbrv){v.shift();var f=v.join(":");t.set("nolPriv_prevFlushEntry",f)}if(v[0]===_.rewind.abbrv&&m===_.play.abbrv){var g=v[3];u[2]=g,c=u.join(":"),l[l.length-1]=c,n=l.join(r)}var y=b.getEventIndiciesForStateEntryModification(m,p);m!==_.play.abbrv&&m!==_.flush.abbrv&&m!==_.admodel.abbrv||""===n||m!==v[0]?a=[n,a].join(r)||a:(m===_.flush.abbrv&&u[1]!==v[1]&&(u[1]=v[1]),-1!==y.current.offset&&(u[y.current.offset]=v[y.new.offset]),-1!==y.current.duration&&(u[y.current.duration]=v[y.new.duration]),l[l.length-1]=u.join(":"),a=l.join(r))}b.setEvents(t,a)}},append:function e(t,a,n){t&&t._dataArrObj&&t._dataArrObj.content&&void 0!==t._dataArrObj.content[0]?b.processAppend(t,a):b.waitForValidFdata(t).then(function(e){b.processAppend(e,a)})},clear:function e(t,a){if(t){var n=b.getTime(),r=t.machine.statePositions,i=t.get("nolPriv_currPos");r.currPos.ph=i,r.currPos.ts=n,r.prevPos.ph=i,r.prevPos.ts=n,(void 0===a||void 0!==a&&"15"!==a.current.prevEvent&&"loadmetadata"!==a.current.prevEvent)&&(t.set(l,"","ad"),t.set(l,"","content"));for(var o=parseInt(t.get("nol_segmentLength"))||1,s=0;s<o;s++)t.get("nol_minutes")[s].tsv=0;t.get("nol_timeSpentViewing").ad.nol_cumeTimeSpent=0,t.get("nol_timeSpentViewing").content.nol_cumeTimeSpent=0,b.preProcess(t)}},isEventEnabled:function e(t){return!!t&&null!==b.lookupEvent(t.toLowerCase())},lookupEvent:function e(t){return t?_[t.toLowerCase()]:null},parseEventData:function e(t,a){var n="";if(t){var r=b.lookupEvent(t.event),i=a.get("nol_playerId");if(r){var o=y[t.event.toLowerCase()],s;n=[r.abbrv,t.timestamp,o].join(":")}}return n},handleEvent:function e(t){t&&i.GLCFG._listeners.fireEvent("updateSubminuteData",t)},preProcess:function e(t){},translateEvent:function e(t){var a;if(t&&t.target&&t.target.data&&t.target.data.event&&0===t.target.data.event.indexOf("event_"))switch(t.target.data.event.toLowerCase()){case"event_subminutetick":t.target.data.event=r.eventTypes.SUBMINTICK;break;case"event_61":case"event_setvolume":t.target.data.event=r.eventTypes.VOLUME;break;case"event_6":case"event_pause":t.target.data.event=r.eventTypes.PAUSE;break;case"event_flush":t.target.data.event=r.eventTypes.FLUSH;break;case"event_tsv":t.target.data.event=r.eventTypes.TSV;break;case"event_55":case"event_sendid3":t.target.data.event=r.eventTypes.PLAYHEAD;break;case"event_forward":t.target.data.event=r.eventTypes.FORWARD;break;case"event_rewind":t.target.data.event=r.eventTypes.REWIND;break;case"event_7":case"event_stop":t.target.data.event=r.eventTypes.STOP;break;case"event_vod":t.target.data.event=r.eventTypes.VOD}return t},translateStateToEvent:function e(t){switch(t){case a.playing:return r.eventTypes.PLAY;case a.paused:return r.eventTypes.PAUSE;case a.rewinding:return r.eventTypes.REWIND;case a.fastforwarding:return r.eventTypes.FORWARD;case a.stopped:return r.eventTypes.STOP;default:return""}},getTime:function e(){return Math.floor(Date.now()/1e3)},testVodEntry:function e(t,a){var n={status:!1,vcval:void 0,prevvcval:void 0};return void 0===t||void 0===a||a.rtvod===a.prevrtvod||""===a.rtvod&&a.breakout===a.prevbreakout?n:(""!==a.rtvod&&a.rtvod!==a.prevrtvod?n={prevvcval:""!==a.prevrtvod?a.prevrtvod:a.breakout,vcval:a.rtvod,status:!0}:""===a.rtvod&&""!==a.prevrtvod?n={prevvcval:a.prevrtvod,vcval:a.breakout,status:!0}:""===a.rtvod&&""!==a.prevbreakout&&a.breakout!==a.prevbreakout&&(n={prevvcval:a.prevbreakout,vcval:a.breakout,status:!0}),n)},processTsvChange:function e(t){if(t){var a="PC_",n="FD_",r,i=t.get("nol_tsvId3Raw").split("/"),o=t.get("nol_tagMap"),s=o&&o.nol_defaults,d=b.getEvents(t),c=b.delimeter(t),u={cidPrefix:t.get("nol_cidPrefix"),fdcid:t.get("nol_fdcid"),pccid:t.get("nol_pccid"),fdtimecode:t.get("nol_fdTimeCode"),pctimecode:t.get("nol_pcTimeCode"),rtvod:t.get("nol_rtvod"),prevrtvod:""!==t.get("nol_prevRtvod")?t.get("nol_prevRtvod"):void 0!==s&&void 0!==s.nol_breakout?s.nol_breakout:"",breakout:t.get("nol_breakout"),prevbreakout:""!==t.get("nol_prevBreakout")?t.get("nol_prevBreakout"):void 0!==s&&void 0!==s.nol_breakout?s.nol_breakout:"",rawPcOffset:i[4]||t.get("nol_pcoffset"),rawFdOffset:i[5]||t.get("nol_fdoffset"),isRtvodEnabled:["true","1"].indexOf(t.get("nol_rtvodEnabled").toString().toLowerCase())>-1};if("PC_"===u.cidPrefix&&u.pccid!==t.get("nol_cidNull")&&u.pccid!==i[1]||"FD_"===u.cidPrefix&&u.fdcid!==t.get("nol_cidNull")&&u.fdcid!==i[2]||"PC_"===u.cidPrefix&&u.pccid===t.get("nol_cidNull")||"FD_"===u.cidPrefix&&u.fdcid===t.get("nol_cidNull"))return;if(""!==d){var p=d.split(c),v=p[0].split(":");(""===v[1]||v[1]!==u.fdtimecode&&"FD_"===u.cidPrefix||v[1]!==u.pctimecode&&"PC_"===u.cidPrefix)&&("PC_"===u.cidPrefix?v[1]=u.pctimecode:"FD_"===u.cidPrefix&&(v[1]=u.fdtimecode),p[0]=v.join(":")),t.set(l,p.join(c))}if("PC_"===u.cidPrefix&&u.pccid!==t.get("nol_cidNull")||"FD_"===u.cidPrefix&&u.fdcid!==t.get("nol_cidNull")){var m={entry:b.populateEventDataForState("tsv",t.get("nolPriv_prevPos"),"PC_"===t.get("nol_cidPrefix")?u.rawPcOffset:u.rawFdOffset,{oldTsval:""!==t.get("nol_prevTsvFlag")?t.get("nol_prevTsvFlag"):t.get("nol_tsvFlag"),tsval:t.get("nol_tsvFlag"),broadcastStartTime:"PC_"===u.cidPrefix?t.get("nol_pcTimeCode"):t.get("nol_fdTimeCode")}),passedFdata:t};b.handleEvent(m);var f=b.testVodEntry(t,u);1==f.status&&(m={entry:b.populateEventDataForState("vod",t.get("nolPriv_prevPos"),""!==t.get("nolPriv_currPos")?t.get("nolPriv_currPos"):"PC_"===t.get("nol_cidPrefix")?u.rawPcOffset:u.rawFdOffset,{vcval:f.vcval,prevvcval:f.prevvcval,broadcastStartTime:"PC_"===u.cidPrefix?t.get("nol_pcTimeCode"):t.get("nol_fdTimeCode")}),passedFdata:t},b.handleEvent(m),t.set("nol_prevRtvod",u.rtvod))}}},updateTimeStampsAndPhOnReset:function e(t){var a=b.getEvents(t),n=b.delimeter(t),r=b.getTime(),i=t.get("nolPriv_currPos");if(""!==a){for(var o=a.split(n),s=0;s<o.length;s++)if(""!==o[s]&&-1===o[s].indexOf("BT")&&-1===o[s].indexOf(_.forward.abbrv)&&-1===o[s].indexOf(_.rewind.abbrv)){var d=o[s].split(":");d[1]=r,d[2]=i,o[s]=d.join(":")}t.set(l,o.join(n))}},processCidChange:function e(t,a,n){var r="PC_",i="FD_",o=t.get("nol_cidPrefix"),s=t.get("nol_tagMap"),d="PC_"===o?a.nol_pcoffset:"FD_"===o?a.nol_fdoffset:null;t&&null!==d&&(t.set("nolPriv_currPos",d),b.pushCurrPos(t,d,b.getTime()),b.pushPrevPos(t,d,b.getTime()),t.set("nolPriv_prevFlushEntry",""),b.clear(t,n),s&&void 0!==s.nol_defaults&&void 0!==s.nol_defaults.nol_tsvFlag&&t.set("nol_tsvFlag",s.nol_defaults.nol_tsvFlag),t.set("nol_prevTsvFlag",""),t.set("nol_rtvod",""),t.set("nol_prevRtvod",""),b.updateTimeStampsAndPhOnReset(t))},processCidChangePlayEntry:function e(t){var a="PC_",n="FD_",r=t.get("nol_cidPrefix");if(t){var i=b.getEvents(t),o=b.delimeter(t),s=b.getStatePositions(t),d={},l=-1!==s.currPos.ph?s.currPos.ph:"PC_"===r?t.get("nol_pcoffset"):"FD_"===r?t.get("nol_fdoffset"):t.get("nol_cidOffsetNull");if(""!==i){var c=i.split(o),u=c&&c.length>0?b.getStateEntryValue(c[c.length-1].split(":")):void 0;(""===c||0===c.length||u&&u!==_.play.abbrv)&&(d.entry=b.populateEventDataForState("play",l,l),d.passedFdata=t,b.handleEvent(d))}else d.entry=b.populateEventDataForState("play",l,l),d.passedFdata=t,b.handleEvent(d)}}};t.PLSUB.append=b.append,t.PLSUB.clear=b.clear,t.PLSUB.inferEvent=b.inferEvent,t.PLSUB.preProcess=b.preProcess,t.PLSUB.getEvents=b.getEvents,t.PLSUB.processTsvChange=b.processTsvChange,t.PLSUB.processCidChange=b.processCidChange,t.PLSUB.processCidChangePlayEntry=b.processCidChangePlayEntry,t.PLSUB.updatePrevAdModelToDefault=b.updatePrevAdModelToDefault;var T=function e(n){if(n&&n.target&&n.target.data&&n.target.data.curPos&&""!==n.target.data.curPos){var i=r.finiteStateMachine(n.target.passedFdata),o=t._players[n.target.plid],s=n.target.passedFdata;if(n&&n.target&&n.target.data&&n.target.data.event)switch(b.translateEvent(n),n.target.data.event){case r.eventTypes.PLAY:i.transition("play",n.target);break;case r.eventTypes.PLAYHEAD:if(m[n.target.plid]=0,Object.keys(h).length>0&&s&&(""===s.get("nol_fdTimeCode")||"0"===s.get("nol_fdTimeCode")||""===s.get("nol_pcTimeCode")||"0"===s.get("nol_pcTimeCode"))){var d=function e(){void 0!==h[l]&&(s.set("nol_fdTimeCode",h[l].nol_fdTimeCode),s.set("nol_pcTimeCode",h[l].nol_pcTimeCode))},l=s.get("nol_playerId");void 0!==h[l]?d():setTimeout(function(){d()},500)}var c=i.getCurrentState(s);if(i.getCurrentState(s)!==a.playing)return n.target.data.event=r.eventTypes.PLAY,void i.transition("play",n.target);break;case r.eventTypes.FLUSH:case r.eventTypes.TSV:case r.eventTypes.VOD:break;case r.eventTypes.PAUSE:i.transition("pause",n.target);break;case r.eventTypes.REWIND:i.transition("rewind",n.target);break;case r.eventTypes.FORWARD:i.transition("fastforward",n.target);break;case r.eventTypes.STOP:i.transition("stop",n.target);break;case r.eventTypes.RESUME:i.transition("resume",n.target);break;case r.eventTypes.MUTE:i.transition("mute",n.target)}}},C=function e(n){if(n.passedFdata.get("nol_playerId")===n.event.eventObj.passedFdata.get("nol_playerId")&&n.passedFdata.get("nol_comment")===n.event.eventObj.passedFdata.get("nol_comment")){var r=n.passedFdata,i=n.event.eventObj,o=i.data,s={},d=o&&o.timestamp?o.timestamp:b.getTime();switch(n.event.state){case a.playing:break;case a.paused:b.pushCurrPos(r,r.get("nolPriv_currPos"),d),b.pushPrevPos(r,r.get("nolPriv_currPos"),d);var l=b.getStatePositions(r);s.entry=b.populateEventDataForState("pause",l.prevPos.ph,l.currPos.ph),s.passedFdata=r,b.handleEvent(s);break;case a.rewinding:b.pushPrevPos(r,r.get("nolPriv_prevPos"),d),b.pushCurrPos(r,r.get("nolPriv_currPos"),d);var l=b.getStatePositions(r);s.entry=b.populateEventDataForState("rewind",l.prevPos.ph,l.currPos.ph),s.passedFdata=r,b.handleEvent(s),t._listeners.fireEvent("tagStateChangeEnter",{state:a.playing,eventObj:i});break;case a.fastforwarding:b.pushPrevPos(r,r.get("nolPriv_prevPos"),d),b.pushCurrPos(r,r.get("nolPriv_currPos"),d);var l=b.getStatePositions(r);s.entry=b.populateEventDataForState("forward",l.prevPos.ph,l.currPos.ph),s.passedFdata=r,b.handleEvent(s),t._listeners.fireEvent("tagStateChangeEnter",{state:a.playing,eventObj:i})}}},L=function e(n){if(n.passedFdata.get("nol_playerId")===n.event.eventObj.passedFdata.get("nol_playerId")&&n.passedFdata.get("nol_comment")===n.event.eventObj.passedFdata.get("nol_comment")){var r=n.passedFdata,i=n.event.eventObj,o=i.data,s=t._players[i.plid],d=o&&o.timestamp?o.timestamp:b.getTime(),l={};switch(n.event.state){case a.playing:break;case a.paused:b.pushCurrPos(r,r.get("nolPriv_currPos"),d),b.pushPrevPos(r,r.get("nolPriv_currPos"),d);var c=b.getStatePositions(r);l.entry=b.populateEventDataForState("resume",c.prevPos.ph,c.currPos.ph),l.passedFdata=r,b.handleEvent(l);break;case a.rewinding:b.pushPrevPos(r,r.get("nolPriv_prevPos"),d),b.pushCurrPos(r,r.get("nolPriv_prevPos"),d)}}},O=function e(t){var a;if(""!==b.getEvents(t.passedFdata)&&t.passedFdata.get("nol_playerId")===t.event.eventObj.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.eventObj.passedFdata.get("nol_comment")){var n=b.getStatePositions(t.passedFdata),r={entry:b.populateEventDataForState("play",n.prevPos.ph,n.currPos.ph),passedFdata:t.passedFdata};b.handleEvent(r)}},E=function e(t){if(t&&t.passedFdata&&t.event.passedFdata&&t.passedFdata.get("nol_playerId")===t.event.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.passedFdata.get("nol_comment")){var a={entry:b.populateEventDataForState("mute",t.event.passedFdata.get("nolPriv_prevPos"),t.event.passedFdata.get("nolPriv_currPos"),{volume:t.event.volume}),passedFdata:t.event.passedFdata};b.handleEvent(a)}},w=function e(t){if(t&&t.passedFdata&&t.event.passedFdata&&t.passedFdata.get("nol_playerId")===t.event.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.passedFdata.get("nol_comment")){b.resetAdModelChange(t.event.passedFdata);var a={entry:b.populateEventDataForState("admodel",t.event.passedFdata.get("nolPriv_prevPos"),t.event.passedFdata.get("nolPriv_currPos"),{amval:t.event.amval,oldamval:t.event.oldamval||"0"}),passedFdata:t.event.passedFdata};b.handleEvent(a)}},F=function e(t){t&&t.passedFdata&&t.event.passedFdata&&t.passedFdata.get("nol_playerId")===t.event.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.passedFdata.get("nol_comment")&&b.resetAdModelChange(t.event.passedFdata)},k=function e(t){t&&t.passedFdata&&t.event.passedFdata&&t.passedFdata.get("nol_playerId")===t.event.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.passedFdata.get("nol_comment")&&(!t.event.amval||"0"!==t.event.amval&&"1"!==t.event.amval&&"2"!==t.event.amval||t.event.passedFdata.set("nol_adModelChange",t.event.amval+"|"+t.event.oldamval))},D=function e(t){if(t&&t.passedFdata&&t.event.passedFdata&&t.passedFdata.get("nol_playerId")===t.event.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.passedFdata.get("nol_comment")&&(""!==t.passedFdata.get("nolPriv_prevPos")&&""!==t.passedFdata.get("nolPriv_currPos")||""!==t.event.passedFdata.get("nolPriv_prevPos")&&""!==t.event.passedFdata.get("nolPriv_currPos"))){var a=b.getEvents(t.event.passedFdata),n=b.delimeter(t.event.passedFdata),r=!1,i="1"===t.event.passedFdata.get("nol_subminSegmentScrub"),o=""!==t.event.passedFdata.get("nolPriv_currPos")?t.event.passedFdata.get("nolPriv_currPos"):t.passedFdata.get("nolPriv_currPos"),s=""!==t.event.passedFdata.get("nolPriv_prevPos")?t.event.passedFdata.get("nolPriv_prevPos"):t.passedFdata.get("nolPriv_prevPos");if(""!==a){var d=a.split(n),l=d&&d.length>0?b.getStateEntryValue(d[d.length-1].split(":")):void 0;l&&l===_.flush.abbrv&&(r=!0)}if(!1===r){var c={entry:b.populateEventDataForState("flush",s,!0===i?s:o,{flush:"1"}),passedFdata:t.event.passedFdata};b.handleEvent(c),t.passedFdata.set("nolPriv_prevFlushEntry",c.entry.replace(_.flush.abbrv+":",""))}!0===i&&t.event.passedFdata.set("nol_subminSegmentScrub","0")}},I=function e(t){if(t&&t.passedFdata&&t.event.passedFdata&&t.passedFdata.get("nol_playerId")===t.event.passedFdata.get("nol_playerId")&&t.passedFdata.get("nol_comment")===t.event.passedFdata.get("nol_comment")&&(""!==t.passedFdata.get("nolPriv_prevPos")&&""!==t.passedFdata.get("nolPriv_currPos")||"PC_"===t.event.passedFdata.get("nol_cidPrefix")&&t.event.passedFdata.get("nol_pccid")!==t.event.passedFdata.get("nol_cidNull")&&""!==t.event.passedFdata.get("nol_pcoffset")&&t.event.passedFdata.get("nol_pcoffset")!==t.event.passedFdata.get("nol_cidOffsetNull")||"FD_"===t.event.passedFdata.get("nol_cidPrefix")&&t.event.passedFdata.get("nol_fdcid")!==t.event.passedFdata.get("nol_cidNull")&&""!==t.event.passedFdata.get("nol_fdoffset")&&t.event.passedFdata.get("nol_fdoffset")!==t.event.passedFdata.get("nol_cidOffsetNull"))){r.finiteStateMachine(t.passedFdata).transition("stop",t);var a=""!==t.event.passedFdata.get("nolPriv_currPos")?t.event.passedFdata.get("nolPriv_currPos"):""!==t.event.passedFdata.get("nol_currPos")?t.event.passedFdata.get("nol_currPos"):"PC_"===t.event.passedFdata.get("nol_cidPrefix")?t.event.passedFdata.get("nol_pcoffset"):"FD_"===t.event.passedFdata.get("nol_cidPrefix")?t.event.passedFdata.get("nol_fdoffset"):"";b.pushCurrPos(t.event.passedFdata,a,b.getTime());var n=b.getEvents(t.event.passedFdata),i=b.delimeter(t.event.passedFdata);if(""!==n){var o=n.split(i),s=o&&o.length>0?b.getStateEntryValue(o[o.length-1].split(":")):void 0;if(""===o||0===o.length||s&&s!==_.stop.abbrv){var d=b.getStatePositions(t.event.passedFdata),l={entry:b.populateEventDataForState("stop",d.prevPos.ph,d.currPos.ph),passedFdata:t.event.passedFdata};b.handleEvent(l)}t.event&&void 0!==t.event.callback&&t.event.callback()}else{var c={entry:b.populateEventDataForState("stop",t.event.passedFdata.get("nolPriv_prevPos"),a,{}),passedFdata:t.event.passedFdata};b.handleEvent(c),t.event&&void 0!==t.event.callback&&t.event.callback()}}},A=function e(t){t&&t.target&&t.target.nol_playerId&&(h[t.target.nol_playerId]=t.target,i.GLCFG._listeners.fireEvent("updateTsvValuesInTag",t))},M=function e(t,a){var n=!1;if(t&&a){var r=t.get("nol_pccid"),i=t.get("nol_fdcid"),o=t.get("nol_cidPrefix"),s=t.get("nol_cidNull"),d=h&&h[a]?h[a]:void 0;if(void 0===d)return!0;var l=d.nol_id3Raw.split("/"),c=l[1],u=l[2];"PC_"===o&&(r===s||r!==s&&r!==c)?n=!0:"FD_"===o&&(i===s||i!==s&&i!==u)&&(n=!0)}return n},R=function e(t){var a=t.get("nol_tsvId3Raw"),n,r=t.get("nol_id3Raw").split("/"),i=a.split("/"),o="PC_",s="FD_",d;return{fdChanged:r[2]!==i[2],pcChanged:r[1]!==i[1],isPc:"PC_"===t.get("nol_cidPrefix"),isFd:"FD_"===t.get("nol_cidPrefix")}},B=function e(t){if(t&&t.passedFdata&&t.event&&t.event.target&&Object.keys(h).length>0&&t.passedFdata){var a=function e(t){t.set("nol_fdTimeCode",h[n].nol_fdTimeCode),t.set("nol_pcTimeCode",h[n].nol_pcTimeCode),t.set("nol_prevTsvFlag",t.get("nol_tsvFlag")),t.set("nol_tsvFlag",h[n].nol_tsvFlag);var a=t.get("nol_rtvod"),s=""!==a?a:t.get("nol_prevRtvod");-1===["true","1"].indexOf(t.get("nol_rtvodEnabled").toString().toLowerCase())?(t.set("nol_prevRtvod",s),t.set("nol_rtvod",h[n].nol_rtvod),o=!0):""===t.get("nol_rtvod")&&""!==h[n].nol_rtvod?(t.set("nol_prevRtvod",s),t.set("nol_rtvod",h[n].nol_rtvod),o=!0):(r.isFd&&r.fdChanged||r.isPc&&r.pcChanged)&&(t.set("nol_prevRtvod",s),t.set("nol_rtvod",""),o=!0),o&&t.set("nol_rtvod",h[n].nol_rtvod),t.set("nol_tsvId3Raw",h[n].nol_id3Raw),t.set("nol_tsvChanged","1"),i.GLCFG&&i.GLCFG._listeners&&h&&h[n]&&i.GLCFG._listeners.fireEvent("debug",{type:"debug",msg:"Updating TSV Entries with "+JSON.stringify(h)})},n=t.passedFdata.get("nol_playerId");if(void 0===n||n!==t.event.target.nol_playerId||M(t.passedFdata,n))return;var r=R(t.passedFdata),o=!1;void 0!==h[n]?a(t.passedFdata):setTimeout(function(){a(t.passedFdata)},500)}},N=function e(a){var n=a.passedFdata,o=a.event.submintick,s=a.event.event.player.id,d;if(o>=parseInt(n.get("nol_pauseEventTimeoutDTVR"))&&n.get("nol_playerId")===s&&t.PLSUB&&n.isProductOf(["mtvrsubminute"])){var l={event:r.eventTypes.PAUSE,curPos:n.get("nolPriv_currPos"),prevPos:null,timestamp:b.getTime()};i.GLCFG._listeners.fireEvent("subMinuteTrackedEvent",{data:l,plid:n.get("nol_playerId"),passedFdata:n})}a.passedFdata.set("nol_subMinPauseTime",o)},V=function e(a){if(a&&a.isProductOf(["mtvrsubminute"])){var n=a.get("nol_playerId"),i=a.get("nol_cidPrefix");(n&&i&&!S[n]||!S[n][i]||!1===S[n][i])&&(r.finiteStateMachine(a),t._listeners.addListener("tagStateChangeEnter",function(e){return C({event:e.target,passedFdata:a})}),t._listeners.addListener("tagStateChangeExit",function(e){return L({event:e.target,passedFdata:a})}),t._listeners.addListener("tagStateTransition",function(e){return O({event:e.target,passedFdata:a})}),t._listeners.addListener("globalSubminuteTick",function(e){return G({event:e.target,passedFdata:a})}),t._listeners.addListener("processSubminuteMute",function(e){return E({event:e.target,passedFdata:a})}),t._listeners.addListener("processSubminuteFlush",function(e){return D({event:e.target,passedFdata:a})}),t._listeners.addListener("processSubminuteStop",function(e){return I({event:e.target,passedFdata:a})}),t._listeners.addListener("setSubminuteAdModelChange",function(e){return k({event:e.target,passedFdata:a})}),t._listeners.addListener("processSubminuteAdModel",function(e){return w({event:e.target,passedFdata:a})}),t._listeners.addListener("updateTsvValuesInTag",function(e){return B({event:e.target,passedFdata:a})}),t._listeners.addListener("processResetAdModelChange",function(e){return F({event:e.target,passedFdata:a})}),S[n]=S[n]||{},S[n][i]=!0)}},G=function e(t){var a=t.passedFdata,n=t.event.event.player.id;a&&a._dataArrObj&&a._dataArrObj.content&&void 0!==a._dataArrObj.content[0]&&a.get("nol_playerId")===n?N(t):b.waitForValidFdata(a).then(function(e){N(t)})};return r.built||(r.built=!0,r.BUILDVERSION=d,t.bindPlayers(r,"PLSUB")),r}),e.NOLBUNDLE.registerLib("PLSIVT",function(e){if(!e.PLSIVT){var t=e.GLCFG||e,a="nol_sivtURL",n="enableDTVRSIVT",r="enableDCRVideoSIVT",i="enableDCRStaticSIVT";return e.PLSIVT=function(e){var o={initialized:!1,dtvrInitialized:!1,dcrVideoInitialized:!1,dcrStaticInitialized:!1,sivtURL:"",clientConfig:e.getClientConfig()},s={init:function e(){try{if(o.sivtURL=t.configController.getGlobal(a,o.clientConfig),!o.sivtURL)return void t._listeners.fireEvent("debug",{type:"debug",msg:"SIVT library URL not defined in config. Unable to initialize SIVT module."});o.initialized=!0}catch(e){t._listeners.fireEvent("warn",{type:"warn",msg:"Failed to initialize SIVT module."})}},addSIVT:function e(a){var s;switch(a&&a.get("nol_product")){case"mtvr":var d=t.configController.getGlobal(n,o.clientConfig);o.dtvrInitialized="true"===d;break;case"dcrvideo":var l=t.configController.getGlobal(r,o.clientConfig);o.dcrVideoInitialized="true"===l;break;case"dcrstatic":var c=t.configController.getGlobal(i,o.clientConfig);o.dcrStaticInitialized="true"===c}if("true"===d||"true"===l||"true"===c){var u=t.PLDPR.resolveExpression(o.sivtURL,a);t.scriptController.inject(u,document.body)}}};return s.init(),{initialized:function e(){return o.initialized},dtvrInit:function e(){return o.dtvrInitialized},dcrVideoInit:function e(){return o.dcrVideoInitialized},dcrStaticInit:function e(){return o.dcrStaticInitialized},addSIVTTag:s.addSIVT}},e.PLSIVT}}),e.NOLBUNDLE.registerLib("PLDPR",function(t){"use strict";var a=t.PLDPR=t.PLDPR||{},n,r=(n=e.NOLBUNDLE).sdkvForConfig?n.sdkvForConfig():"bj.6.0.0",i="6.0.0.",o="734",s=t.getBaseBuildVer?t.getBaseBuildVer()+"734":"6.0.0.734",d="cgi-bin/",l=n.getAddressProtocol?n.getAddressProtocol():n.getAddress(),c="cfg",u="error",p=t.getLS(),v=t.getConfigVer?t.getConfigVer():300,m=5,f={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},g={regex:/\|\![\w\W]*?(\!\|)/g,length:2},_=/[\[\{<\(\}\]>\)]/g,y=new RegExp(/(.*?)(_content|_ad|_static)?$/i),h=a.dataObj||{},P=0,S=0,b=5,T=5,C=[],L,O=2,E=!1,w=[],F="false",k=F,D,I={},A={},M={},R=R||{},B=!1,N=!1,V,G={send:function e(a,n,r){var i=a,o=-1!==i.url.indexOf("&c62=")?j(i.url,"c62=")+"&c62=sendTime,"+(void 0!==n?n:x()/1e3>>0):i.url,s=this,d="";if(d=-1!==o.indexOf("prd=metadata")?o:j(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),r=r||"GET",a&&a.uoo&&(d=J.nuidOverride(d,a.uoo)),t.postMsgAvail&&i.hasOwnProperty("maskRefUrl")&&-1!==i.maskRefUrl&&"true"===i.maskRefUrl)re.sendMaskedPing(d);else if("POST"===r){var l=d.indexOf("?"),c=t.cookie.all(),u=d.substr(0,l),p=d.substr(l+1);(!a||a&&!a.product||a&&a.product&&("mtvrsubminute"!==a.product||""===a.product))&&(p=J.optoutOverride(p)),re.request(u,{method:"POST",data:p,withCredentials:!0},!0).then(function(e){parseInt(e.status)>400&&s.onError({target:{src:o}},i,r)})}else if(N)navigator.sendBeacon(d);else{var v=new Image;v.onerror=function(e){s.onError(e,i,r)},v.onload=function(){t.queryCookies()},v.src=d}},setup:function e(t){var a=this,n=t.hasOwnProperty("url")?t.url:"",r=t.params||{url:n,uoo:"true"===t.uoo?1:0,errorDelay:1e3*(t.delay||T),retry:0,product:t.product||"",maskRefUrl:t.hasOwnProperty("maskRefUrl")&&String(t.maskRefUrl).length>0?t.maskRefUrl:-1};n&&n.length>0&&this.send(r,t.pingSendTime,t.method)},onError:function t(a,n,r){var i=this,o=a.target.src;n&&n.retry<b&&o&&o.length>0&&(n.retry+=1,n.url=o,e.setTimeout(function(){i.send(n,null,r)},n.errorDelay))}},x=n.getTIme||function(){return(new Date).getTime()},U={},S=S||0,b=b||5;function j(e,t){var a=[],n=e.split("&"),r,i;for(r=0,i=n.length;r<i;r++)0!==n[r].indexOf(t)&&a.push(n[r]);return a.join("&")}function z(e,t){try{var a=e.split("&"),n,r;for(n=0,r=a.length;n<r;n++)if(0===a[n].indexOf(t))return!0;return!1}catch(e){return!1}}function H(t){var a;"string"==typeof t&&0!==t.length&&((a=e.document.createElement("script")).type="text/javascript",a.src=j(t,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),a.onerror=function(t){var a=t.target.src;e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target),S<b&&(S++,e.setTimeout(function(){H(a)},5e3))},a.onload=function(t){S=0,e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target)},e.document.head?e.document.head.appendChild(a):e.document.getElementsByTagName("head")[0].appendChild(a))}var W=W||{},J=J||{},q=q||function(){},K=(Q="nol_eventData",Y="nol_eventDataDelimiter",X="nol_eventDataEvents",$="nol_eventDataEnabled",Z=":",ee={delimiter:"",eventsList:[]},te={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MU"}},{get:(ne={get:function e(t,a){var n="";return t&&(n=q({data:t,param:Q,vidType:a||t._currVidType})),n},set:function e(t,a,n){return t&&q({data:t,param:Q,val:a,vidType:n||t._currVidType}),t},clear:function e(t){t&&(q({data:t,param:Q,val:"",vidType:"ad"}),q({data:t,param:Q,val:"",vidType:"content"}))},clone:function e(t){try{return{content:ne.get(t,"content"),ad:ne.get(t,"ad")}}catch(e){return null}},bind:function e(t,a){try{if(t&&a)for(var n in a)ne.set(t,a[n],n)}catch(e){}},append:function e(t,a){if(t&&a){var n=ne.get(t),r=ne.delimiter(t),i=ne.parseEventData(a);ne.set(t,n?[n,i].join(r):i)}},delimiter:function e(t){return t?(ee.delimiter||(ee.delimiter=q({data:t,param:Y})),ee.delimiter):""},isEnabled:function e(t){return!!t&&"true"===q({data:t,param:$})},isEventEnabled:function e(t,a){if(a&&t){var n=ne.lookupEvent(t.toLowerCase());if(n)return ne.eventsList(a).indexOf(n.name)>-1}return!1},eventsList:function e(t){if(t){if(!ee.eventsList||0==ee.eventsList.length){var a=q({data:t,param:X});a&&(ee.eventsList=a.split(","))}return ee.eventsList}},clearCache:function e(){ee.delimiter="",ee.eventsList=[]},lookupEvent:function e(t){return t?te[t.toLowerCase()]:null},parseEventData:function e(t){var a="";if(t){var n=ne.lookupEvent(t.event);if(n){var r=[n.abbrv,t.timestamp,t.curPos];void 0!==t.prevPos&&null!==t.prevPos&&t.curPos!=t.prevPos&&r.push(t.prevPos),void 0!==t.p1&&null!==t.p1&&r.push(t.p1),a=r.join(":")}}return a},handleEvent:function e(t,a){t&&a&&ne.isEventEnabled(a.event,t)&&ne.append(t,a)},setNextTick:function e(t,a,n){var r=ne.get(t,n);if(r&&r.indexOf("{{nextTick}}")>-1)if(a&&a.event===W.events.playhead)t=ne.set(t,r.replace(/{{nextTick}}/gi,1==a.curPos?"0":a.curPos),n);else{var i=J.state.position.current(t,n)||"0";t=ne.set(t,r.replace(/{{nextTick}}/gi,i),n)}return t},preProcess:function e(t,a){try{t&&a&&a.event&&a.event!==W.events.play&&-1===a.event.indexOf("event_")&&(ne.setNextTick(t,a),a.event===W.events.stop&&"content"!==J.type.current(t)&&ne.setNextTick(t,a,"content"),ne.handleEvent(t,a))}catch(e){}},postProcess:function e(t,a){try{t&&a&&a.event&&a.event===W.events.play&&ne.handleEvent(t,a)}catch(e){}}}).get,set:ne.set,clone:ne.clone,bind:ne.bind,clear:ne.clear,append:ne.append,isEnabled:ne.isEnabled,isEventEnabled:ne.isEventEnabled,preProcess:ne.preProcess,postProcess:ne.postProcess,setNextTick:ne.setNextTick}),Q,Y,X,$,Z,ee,te,ae,ne,t=t||e.NOLBUNDLE||{},re=re||{},I=I||{},A=A||{},ie=ie||function(){},oe=oe||function(){},j=j||function(){},se=se||function(){},q=q||function(){},J={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",assetId:"nol_assetid"},_params:{optout:"uoo",nuid:"c1"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function e(a){if(a){if("string"==typeof a)return t._players[a];var n=q({data:a,param:"nol_playerId"});return J.findPlayer(n)}return null},currentPosition:function e(t){return oe(q({data:t,param:J._keys.currentPosition}),"num")},currentTimestamp:function e(t){return oe(q({data:t,param:J._keys.currentTimestamp}),"num")},asset:{current:function e(t){return t?t._currAssetid:null},parse:function e(t,a){var n=I[t.get("nol_playerId")]&&I[t.get("nol_playerId")].nol_assetid?I[t.get("nol_playerId")].nol_assetid.clientField:"nol_assetid";return a?a[n]:null}},type:{isCurrentlyContent:function e(t){return"content"===t._currVidType},isCurrentlyAd:function e(t){return"ad"===t._currVidType},isCurrentlyStatic:function e(t){return"static"===t._currVidType},current:function e(t){return t._currVidType},parse:function e(t,a){var n=I[t.get("nol_playerId")]||{},r=n.nol_vidtype?n.nol_vidtype.clientField:"nol_vidtype",i=a[r]?a[r].toString().toLowerCase():"",o=","+q({data:t,param:"nol_contentType"});return i&&-1!==o.indexOf(","+i)?"content":"dcrstatic"===q({data:t,param:"nol_product"})?"static":"ad"}},tagName:function e(t,a){return q({data:t,param:J._keys.tagName,vidType:a||t._currVidType})},localTimer:function e(t,a){return q({data:t,param:J._keys.localTimer,vidType:a||t._currVidType})||"nol_fdoffset"},isInitialized:function e(t,a){try{return a=a||t._currVidType,"{}"!==JSON.stringify(t._dataArrObj[a])}catch(e){return!1}},updateMetadata:function e(a,n,r,i){try{var o={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype","nol_adLoadType"]};r=r||I[a.get("nol_playerId")]||{};var s=function e(t){var a=!0;for(var n in o.nolParams)if(r&&r.hasOwnProperty(o.nolParams[n])&&t===r[o.nolParams[n]].clientField){a=!1;break}return a};if(!a||!n)return;var d=void 0!==r&&"object"===(void 0===r?"undefined":_typeof(r))&&r;for(var l in n)n.hasOwnProperty(l)&&(d&&s(l)?q({data:a,param:String(l),val:String(n[l])}):i&&i.inferred||t._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+l+" is not allowed. Please remove "+l+" from your metadata parameter."}))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},extendfData:function e(t){"function"!=typeof t.get&&(t.isProductOf=function(e){return!!e&&("object"===(void 0===e?"undefined":_typeof(e))?e.indexOf(q({data:this,param:"nol_product"}))>-1:q({data:this,param:"nol_product"})===e)},t.get=function(e,t){return q({data:this,param:e,vidType:t})},t.set=function(e,t,a){return q({data:this,param:e,val:t,vidType:a})},t.del=function(e,t){e&&t&&this&&this._dataArrObj&&this._dataArrObj[t]&&delete this._dataArrObj[t][e]})},state:{position:{current:function e(t,a){return oe(q({data:t,param:J._keys.stateCurrentPosition,vidType:a||t._currVidType}),"num")},previous:function e(t,a){return oe(q({data:t,param:J._keys.statePreviousPosition,vidType:a||t._currVidType}),"num")},set:function e(t,a,n){var r=J.state.position.current(t);q({data:t,param:J._keys.statePreviousPosition,val:r,vidType:n||t._currVidType}),q({data:t,param:J._keys.stateCurrentPosition,val:a,vidType:n||t._currVidType})}},timeStamp:{current:function e(t,a){return oe(q({data:t,param:J._keys.stateCurrentTimestamp,vidType:a||t._currVidType}),"num")},previous:function e(t,a){return oe(q({data:t,param:J._keys.statePreviousTimestamp,vidType:a||t._currVidType}),"num")},set:function e(t,a,n){var r=J.state.timeStamp.current(t);q({data:t,param:J._keys.statePreviousTimestamp,val:r,vidType:n||t._currVidType}),q({data:t,param:J._keys.stateCurrentTimestamp,val:a,vidType:n||t._currVidType})}},asset:{current:function e(t,a){return q({data:t,param:J._keys.stateCurrentAsset,vidType:a||t._currVidType})},previous:function e(t,a){return q({data:t,param:J._keys.statePreviousAsset,vidType:a||t._currVidType})},set:function e(t,a,n){var r=J.state.asset.current(t);q({data:t,param:J._keys.statePreviousAsset,val:r,vidType:n||t._currVidType}),q({data:t,param:J._keys.stateCurrentAsset,val:a,vidType:n||t._currVidType})}},status:{current:function e(t,a){return q({data:t,param:J._keys.stateCurrentStatus,vidType:a||t._currVidType})},previous:function e(t,a){return q({data:t,param:J._keys.statePreviousStatus,vidType:a||t._currVidType})},set:function e(t,a,n){var r=J.state.status.current(t,n);q({data:t,param:J._keys.statePreviousStatus,val:r,vidType:n||t._currVidType}),q({data:t,param:J._keys.stateCurrentStatus,val:a,vidType:n||t._currVidType})}},type:{current:function e(t,a){return q({data:t,param:J._keys.stateCurrentType,vidType:a||t._currVidType})},previous:function e(t,a){return q({data:t,param:J._keys.statePreviousType,vidType:a||t._currVidType})},set:function e(t,a,n){var r=J.state.type.current(t,n);q({data:t,param:J._keys.statePreviousType,val:r,vidType:n||t._currVidType}),q({data:t,param:J._keys.stateCurrentType,val:a,vidType:n||t._currVidType})}},set:function e(t,a){var n=J.findPlayer(t);switch(a.event){case"LOAD":J.state.asset.set(t,a.assetId,a.contentType),J.state.type.set(t,a.contentType),J.state.timeStamp.set(t,a.timestamp);break;case"PLAY":case"RESUME":J.state.status.set(t,J.states.playing),J.state.asset.set(t,a.assetId,a.contentType),J.state.type.set(t,a.contentType),J.state.timeStamp.set(t,a.timestamp),"PLAY"===a.event&&J.state.position.set(t,0),"RESUME"===a.event&&null!=a.currentPos&&null!=a.currentPos&&"{{nextTick}}"!=a.currentPos&&(J.state.position.set(t,a.curPos),J.state.timeStamp.set(t,a.timestamp)),n.pauseObj.eventPauseTime=0;break;case"PAUSE":J.state.status.set(t,J.states.paused);break;case"STOP":J.state.resetAsset(t),J.state.status.set(t,J.states.stopped);break;case"PLAYHEAD":J.state.position.set(t,a.curPos),J.state.timeStamp.set(t,a.timestamp),n.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":J.state.position.set(t,a.curPos),J.state.timeStamp.set(t,a.timestamp),n.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":n.pauseObj.eventPauseTime=0}},get:function e(t,a){try{var n;if(t)return{position:{current:J.state.position.current(t,a),previous:J.state.position.previous(t,a)},timeStamp:{current:J.state.timeStamp.current(t,a),previous:J.state.timeStamp.previous(t,a)},asset:{current:J.state.asset.current(t,a),previous:J.state.asset.previous(t,a)},status:{current:J.state.status.current(t,a),previous:J.state.status.previous(t,a)},type:{current:J.state.type.current(t,a),previous:J.state.type.previous(t,a)}}}catch(e){}return null},resetAsset:function e(t){J.state.position.set(t,null),J.state.timeStamp.set(t,null),J.state.asset.set(t,null)},bind:function e(t,a){try{if(t&&a)for(var n in a)q({data:t,param:J._keys.statePreviousPosition,val:a[n].position?a[n].position.previous:null,vidType:n}),q({data:t,param:J._keys.stateCurrentPosition,val:a[n].position?a[n].position.current:null,vidType:n}),q({data:t,param:J._keys.statePreviousTimestamp,val:a[n].timeStamp?a[n].timeStamp.current:null,vidType:n}),q({data:t,param:J._keys.stateCurrentTimestamp,al:a[n].timeStamp?a[n].timeStamp.current:null,vidType:n}),q({data:t,param:J._keys.statePreviousAsset,val:a[n].asset?a[n].asset.current:null,vidType:n}),q({data:t,param:J._keys.stateCurrentAsset,val:a[n].asset?a[n].asset.current:null,vidType:n}),q({data:t,param:J._keys.statePreviousStatus,val:a[n].status?a[n].status.current:null,vidType:n}),q({data:t,param:J._keys.stateCurrentStatus,val:a[n].status?a[n].status.current:null,vidType:n}),q({data:t,param:J._keys.statePreviousType,val:a[n].type?a[n].type.current:null,vidType:n}),q({data:t,param:J._keys.stateCurrentType,val:a[n].type?a[n].type.current:null,vidType:n})}catch(e){}},clone:function e(t){try{return{content:J.state.get(t,"content"),ad:J.state.get(t,"ad")}}catch(e){}}},cms:{parse:function e(t,a,n){var r={metadata:(n?n.metadata:null)||{},defaultKey:(n?n.defaultKey:"")||"",silent:(n?n.silent:null)||!1,noClone:(n?n.noClone:null)||!1,vidType:n?n.vidType:"",noEncode:!(!n||!0!==n.noEncode)},i=t&&t.clientField?t.clientField:r.defaultKey;if(i&&a){if(r.metadata&&r.metadata.hasOwnProperty(i)&&r.metadata[i])return r.metadata[i];if(t&&t.clientField){if(r.end)return a.get(t.clientField,n?n.vidType:"");var o=a;!0!==r.noClone&&(o=JSON.parse(JSON.stringify(a)),ie(o,"loadmetadata",r.metadata,null,!0));var s=[];return!0===r.noEncode?s=[i]:(s=(t.encoding||"").split("")).splice(s.length/2,0,i),r.end=!0,se(o,"|!"+s.join("")+"!|",null,r)}}return""}},getRequestMethod:function e(t){return t&&t.hasOwnProperty("get")&&"function"==typeof t.get?t.get("nol_prefRequestMethod")||t.get("nol_requestMethod"):"GET"},mtvr:{isTransPing:function e(t){return!!t&&"id3"===q({data:t,param:"nol_product"})},isPCTag:function e(t){return!!t&&(t.isProductOf(["mtvr","mtvrsubminute"])&&""!==q({data:t,param:"nol_subTag"}))},pcChanged:function e(t,a){return!!t&&a!==q({data:t,param:"nol_pccid"})},isFDTag:function e(t){return!!t&&(t.isProductOf(["mtvr","mtvrsubminute"])&&""===q({data:t,param:"nol_subTag"}))},fdChanged:function e(t,a){return!!t&&a!==q({data:t,param:"nol_fdcid"})},resetTagSession:function e(a,n){a&&a.set("nol_sessionId",n||t.generateGUID(),"content")},clearTagSession:function e(t){if(t)return t.del("nol_sessionId","content")},isNullPCCid:function e(t){return t.get("nol_pccid")===t.get("nol_cidNull")},isNullFDCid:function e(t){return t.get("nol_fdcid")===t.get("nol_cidNull")}},nuidOverride:function e(t,a){return a&&(t=re.paramOverride(t,J._params.nuid,"nuid,OPTOUT")),t},optoutOverride:function e(a){return a&&(a=j(a,J._params.optout+"=")+(t.isOptout()?"&"+J._params.optout+"=1":""),a=re.paramOverride(a,J._params.nuid,"nuid,"+t.getLsId())),a},getEventsFilter:function e(t){return t.get("nol_eventFilter")||A[t.get("nol_playerId")]||{}}},t=t||e.NOLBUNDLE||{},W=W||{},K=K||{},J=J||{},x=x||function(){},oe=oe||function(){},q=q||function(){},W=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},a=function e(t,a){if(t&&null!=a&&"stream"!==q({data:t,param:"nol_cadence"})&&"impression"!==q({data:t,param:"nol_cadence"})){var n=Math.floor(oe(a,"num")),r=J.state.position.current(t),i;return{match:n-r<0,currentPos:n,previousPos:r}}return!1},n=function e(t,a){if(t&&null!=a&&"stream"!==q({data:t,param:"nol_cadence"})&&"impression"!==q({data:t,param:"nol_cadence"})){var n=Math.floor(oe(a,"num")),r=J.state.position.current(t),i=J.state.timeStamp.current(t),o=oe(q({data:t,param:"nol_cmsIntrvlGp"}),"num")||2,s=Math.ceil(x()/1e3-i)||1;if(0==r&&n>86400&&"nol_cmsoffset"===J.localTimer(t)){var d=Math.round(x()/1e3).toString().substr(0,a.toString().length);d&&(r=parseInt(d))}var l=n-r;return{match:l>o&&l>Math.ceil(1.5*s),currentPos:n,previousPos:r}}return!1},r;return{events:e,inferEvent:{inferEvent:function r(i,o,s,d,l){var c=null;try{if(c={event:"event_"+i,curPos:J.state.position.current(o),prevPos:null,timestamp:d},i&&o)switch(i.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var u=J.asset.parse(o,l),p=J.state.asset.current(o),v=J.state.asset.previous(o),m=J.state.type.current(o),f=J.type.parse(o,l),g=J.state.asset.current(o,f);if(c.event=e.load,c.assetId=u,c.contentType=f,J.state.status.current(o,f)==J.states.paused&&(p==u&&null!==u||m!==f)){c.event=e.resume,c.assetId=u,c.contentType=f,c.curPos="{{nextTick}}";break}if(g!=u||J.state.status.current(o,f)===J.states.stopped&&v==u&&null!==u||null===p){c.event=e.play,c.curPos="{{nextTick}}";break}break;case"5":case"play":c.event="event_play";break;case"7":case"stop":c.event="event_stop";break;case"57":case"end":case"oncomplete":c.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(s>-1){var _=a(o,s);if(_.match){c.event=e.rewind,c.curPos=_.currentPos,c.prevPos=_.previousPos,c.p1=c.prevPos-c.curPos;break}if(-1===K.get(o).indexOf("{{nextTick}}")){var y=n(o,s);if(y.match){c.event=e.forward,c.curPos=y.currentPos,c.prevPos=y.previousPos,c.p1=c.curPos-c.prevPos;break}}if(J.state.status.current(o)===J.states.paused){c.event=e.resume,c.assetId=J.state.asset.current(o),c.contentType=J.type.current(o),c.curPos=s;break}c.event=e.playhead,c.curPos=s}break;case"55":var h=q({data:o,param:q({data:o,param:"nol_timer"})})||q({data:o,param:"nol_fdoffset"});("daypart"===q({data:o,param:"nol_cadence"})||o.isProductOf(["mtvrsubminute"]))&&(h=(h=oe(h,"num"))+q({data:o,param:"nol_timer"})=="nol_pcoffset"?oe(q({data:o,param:"nol_pcTimeCode"}),"num"):oe(q({data:o,param:"nol_fdTimeCode"}),"num")),c.event=e.playhead;break;case"9":case"mute":c.event=e.mute,c.p1=s}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+i})}return c}}.inferEvent}}(),t=t||{},b=b||5,p=p||t.getLS();function oe(e,t){var a;if("num"==t)a=parseInt(e,10),e=isNaN(a)?0:a;else if("bin"==t)e=isNaN(Number(e))?"0":Number(e).toString(2);else if("bool"==t)switch(e.toString().toLowerCase()){case"false":case"no":case"0":case"":e=!1;break;default:e=!0}else"b2n"==t&&(a=parseInt(e,2),e=isNaN(a)?0:a);return e}function de(e){try{return e.split("&").reduce(function(e,t){var a=t.indexOf("=");if(a>-1){var n=t.substring(0,a),r=t.substring(a+1);e[n]=decodeURIComponent(r||"")}else t&&(e[t]="");return e},{})}catch(e){}}var re=(le=t,ce=p,ue={maxRetry:b},ve={param:function e(t,a){var e="";if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&Object.keys(t).length>0)for(var n in a=a||"",t)t.hasOwnProperty(n)&&(e=e+(""!==e?"&":"")+(a?a+"-":"")+n+"="+t[n]);return e},paramOverride:function e(t,a,n){if(t&&a){var r=new RegExp("([&?]+"+a+"=)([^&$]*)","gi"),i=t.match(r);if(i)for(var o="",s=0,d=i.length;s<d;s++)o=i[s].substr(0,i[s].indexOf("=")+1)+(n||""),t=t.replace(i[s],o)}return t}},{sendMaskedPing:(pe={sendMaskedPing:function e(t,a){le.lsReady()?ce.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:t}}),ce.src):(a=a||0)<ue.maxRetry&&setTimeout(function(){pe.sendMaskedPing(t,a+1)},300)},request:function t(a,n,r){return e.NOLBUNDLE.controllers.util.Promise(function(t,i){(n=n||{}).method=n.method||"GET",n.data=n.data||"";var o=new(e.XMLHttpRequest||ActiveXObject("MSXML2.XMLHTTP.3.0"));if(o.withCredentials=void 0!==n.withCredentials&&null!==n.withCredentials&&n.withCredentials,o.open(n.method,a,null==r||r),"GET"===n.method)o.setRequestHeader("Content-type","application/x-www-form-urlencoded");else if("POST"===n.method){if("string"==typeof n.data)try{n.data=JSON.parse(n.data)}catch(e){var s=JSON.stringify(de(n.data));n.data=s}o.setRequestHeader("Content-type","application/json")}o.onreadystatechange=function(){o.readyState>3&&t&&t(o)},o.send(n.data)})}}).sendMaskedPing,request:pe.request,param:ve.param,paramOverride:ve.paramOverride}),le,ce,ue,pe,ve,f={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},g={regex:/\|\![\w\W]*?(\!\|)/g,length:2},y=new RegExp(/(.*?)(_content|_ad|_static)?$/i),I=I||{},h=h||{},me=me||function(){},fe=fe||function(){},ge=ge||function(){},_e=_e||function(){},ye=ye||function(){},he=he||function(){},Pe=Pe||function(){},Se=Se||function(){},be=be||function(){},t=t||e.NOLBUNDLE||{},W=W||{},K=K||{},J=J||{},x=x||function(){},oe,q;function Te(e,t,a,n){var r="";return a&&a.clientField!==t&&!0!==n.end&&(r=J.cms.parse(a,e,n))?r:q({data:e,param:t,vidType:n?n.vidType:""})}function Ce(e,t){var a="",n,r,i,o;if(!e||!t)return e;for(o=t.length,r=0,i=e.length;r<i;r++)a+=0===(n=e.charCodeAt(r)^t.charCodeAt(r%o))?e.charAt(r):String.fromCharCode(n);return a}function Le(e){var t;try{if(null===e||"object"!==(void 0===e?"undefined":_typeof(e))||"isActiveClone"in e)return e;for(var a in t=e instanceof Date?new e.constructor:e.constructor(),e)Object.prototype.hasOwnProperty.call(e,a)&&(e.isActiveClone=null,t[a]=Le(e[a]),delete e.isActiveClone);return t}catch(e){return!1}}function Oe(e,a,n,r,i){var o,s;-1===n.indexOf("[")&&-1===n.indexOf("]")&&(!r.val||r.val.length<=0)?i||(we(e,{type:"100",msg:n+" missing -- "+q({data:e,param:"nol_comment"})}),r.state=!1,r.val=""):"{"===a||"}"===a?r.val=t.CryptoJS.MD5(r.val.toString()).toString():"<"===a||">"===a?(o=n.match(f["<"].end))?(s=o[0].match(/[\d]+/g),r.val=String(r.val).substr(s[0],s[1])):r.val=Ce(String(r.val),q({data:e,param:"nol_xorSeed"})):"("!==a&&")"!==a||(r.val=be(r.val))}function Ee(e,t,a){var n=t.match(/[\[\{<\(]/g),r,i,o,s,d,l,c,u,p,v,m,g,_=q({data:e,param:"nol_xorSeed"})||"",h,P;n=n?n.reverse():[],i=t.match(/[\}\]\>\)]/g)||[],s={start:n.length?t.lastIndexOf(String(n[0])):-1,end:i.length?t.indexOf(String(i[0])):t.length},i&&">"===i[0]&&(s.end=t.search(f["<"].end)||t.indexOf(">")),p=(l=t.substring(s.start+1,s.end)).split("||");var S=y.exec(l),b=S&&S.length>1?S[1]:l,T=null,C="",L=I[e.get("nol_playerId")]||{};for(v=0,m=p.length;v<m&&(l=p[v],C=(T=y.exec(p[v]))&&T.length>2&&T[2]?T[2].replace("_",""):"","string"!=typeof(g=Te(e,l,L[b],{vidType:(a?a.vidType:null)||C,silent:!0,noClone:!0,end:!!a&&a.end,noEncode:!0}))&&(g=g.toString()),!(g&&g.length>0));v++);if(g&&g.length>0&&(P="string"==typeof l?l.split("_"):l,(d=L[h=Array.isArray(P)&&P.length>2&&l.indexOf("nol_")>-1&&("content"===P[P.length-1]||"ad"===P[P.length-1]||"static"===P[P.length-1])?P.splice(0,P.length-1).join("_"):l]?L[h].encoding:"")&&(n=n.reverse().concat(d.match(/[\[\{<\(]/g)).reverse(),i=i.reverse().concat(d.match(/[\}\]>\)]/g)).reverse())),r={val:g,state:q({data:e,param:"nolPriv_sendData"})},c=n?n.length:0,u=i?i.length:0,(o=Math.min(c,u))>0)for(v=0,m=o;v<m;v++)Oe(e,n[0]||i[0],t,r,_),n.shift(),i.shift();else!0!==(!!a&&a.silent)&&(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",we(e,{type:100,msg:l+" missing "+q({data:e,param:"nol_comment"})}));return{val:r.val,strManipulate:n,strManiEnd:i}}function se(e,t,a,n){var r,i,o,s,d,l={val:"",state:q({data:e,param:"nolPriv_sendData"})},c=[],u,p=[],v=[],m,f="",_,y,h,P,S,b,T=q({data:e,param:"nol_xorSeed"});if(n=n||{},null!==(d=(t=t||q({data:e,param:"nol_url"})||"").match(g.regex)))for(y=0,h=d.length;y<h;y++)if(r=d[y]){if(c=[],f="",s=0,(o=(i=r.substr(g.length,r.length-2*g.length)).split("+"))&&o.length>1){for(P=0,S=o.length;P<S;P++)if(f=o[P],n.silent=!0,(u=Ee(e,f,n)).strManipulate.length>0&&(s=c.length,p=[].concat(u.strManipulate,p)),c[s]=c[s]?c[s]+u.val:u.val,u.strManiEnd.length>0&&u.strManiEnd.length!==p.length){for(v=[].concat(v,u.strManiEnd),l={val:c[s],state:q({data:e,param:"nolPriv_sendData"})},m=0,b=u.strManiEnd.length;m<b;m++)Oe(e,p[0],f,l,T),p.shift(),v.shift();c[s]=l.val}for(l.val=c.join(""),m=0,b=(_=p.length>=v.length?p:v).length;m<b;m++)Oe(e,_[0],f,l,T),p.shift(),v.shift()}else l={val:(u=Ee(e,i,n)).val,state:q({data:e,param:"nolPriv_sendData"})};t=t.replace(r,l.val)}return t}function we(e,a,n,r){var i,o,s=q({data:e,param:"nolPriv_errorSent"});if(!0!==r&&q({data:e,param:"nolPriv_sendData",val:!1}),!n&&-1!==(!a||s.indexOf(a.type.toString())))return!1;i=a.type+","+be(a.msg),q({data:e,param:"nol_errorMessage",val:i}),t._listeners.fireEvent("error",{type:"error",msg:i});var d=e.get("nol_errorURL");return d&&(a.msg&&(a.msg=encodeURIComponent(a.msg)),17===a.type&&(d=d.replace("|!(nol_errorMessage)!|",a.msg)),e.isProductOf(["mtvr","id3","mtvrsubminute"])&&(d=d.replace("|![nol_sessionId_content]!|","")),o=se(e,d),ye({serverTimeOffset:q({data:e,param:"nolPriv_serverTimeOffset"}),url:o,uoo:q({data:e,param:"nol_useroptout"}),maskRef:q({data:e,param:"nol_rfrmsk"}),prod:q({data:e,param:"nol_product"}),method:"GET"})),s+=a.type.toString()+",",q({data:e,param:"nolPriv_errorSent",val:s}),!0}function Fe(e,t){var a=e.get("nol_eventDataDTVR"),n=t.get("nol_eventDataDTVR"),r=e.get("nol_eventDataDelimiter")||"~",i=a.split(r).filter(function(e){return""!==e}),o=n.split(r).filter(function(e){return""!==e}),s=null;o&&o.length>0&&"FL"===o[o.length-1].substring(0,2)&&(s=o.pop());var d=new Set(o),l=!0,c=!1,u=void 0;try{for(var p=i[Symbol.iterator](),v;!(l=(v=p.next()).done);l=!0){var m=v.value,f=m.split(":")[0];o.length>0&&("BT"===f||"PFL"===f||"FL"===f)||(d.has(f)||d.add(m))}}catch(e){c=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw u}}null!==s&&d.add(s);var g=Array.from(d).join(r);t.set("nol_eventDataDTVR",g)}function ke(e,a,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e||e&&e.isProductOf(["mtvr","id3","mtvrsubminute"])&&("FD_"===e.get("nol_cidPrefix")&&e.get("nol_fdcid")===e.get("nol_cidNull")||"PC_"===e.get("nol_cidPrefix")&&e.get("nol_pccid")===e.get("nol_cidNull")))n&&n(e);else{e.delayedPingForFdata=!1;var o=J.findPlayer(e),s=o.fpSession,d=o.metadataCtrl;if(!r){var l=""===e.get("nol_fdcid")||J.mtvr.isNullFDCid(e)?e.get("nol_pccid"):e.get("nol_fdcid"),c;if(e.isProductOf(["mtvr","mtvrsubminute"])&&["true","1"].indexOf(e.get("nol_rtvodEnabled").toString().toLowerCase())>-1&&"interval"===e.get("nol_cadence")&&""===e.get("nol_rtvod")&&"true"!==e.get("nol_disabled")&&e.get("nol_tsvURL"))if(fe(e,null,!0)){var u=Le(e);u&&(!function(e,a,n,r){function i(e,r){if(t.PLSUB&&r&&e&&r.isProductOf(["mtvrsubminute"])&&e.isProductOf(["mtvrsubminute"])){var i=e.get("nol_cidPrefix")===r.get("nol_cidPrefix"),o=i&&"PC_"===e.get("nol_cidPrefix")&&r.get("nol_pccid")===e.get("nol_pccid"),s=i&&"FD_"===e.get("nol_cidPrefix")&&r.get("nol_fdcid")===e.get("nol_fdcid");(o||s)&&Fe(e,r)}var d=e._currVidType;e._currVidType=r._currVidType,ke(r,a,n,!0),e._currVidType=d,t.PLSUB&&r.isProductOf(["mtvrsubminute"])&&t.PLSUB&&t.PLSUB.clear(r)}function o(e){t.PLSUB&&e.isProductOf(["mtvrsubminute"])&&e.delayedPingForFdata&&(e.delayedPingForFdata=!1,t.PLSUB&&t.PLSUB.clear(e))}he(r,{service:"tsv",key:l,url:r.get("nol_tsvURL"),cidData:r.get("cidParams")},function(){i(e,r)}),he(e,{service:"tsv",key:l,url:e.get("nol_tsvURL"),cidData:e.get("cidParams")},function(){o(e)})}(e,a,n,u),e.delayedPingForFdata=!0)}}s&&s.allowCookies&&s.appendfData(e);var p=q({data:e,param:"nol_url"})||"",v,m,f,g,_=0,y,P=q({data:e,param:"nol_playerId"}),S=oe(q({data:e,param:"nol_maxPingCount"}),"num"),b=oe(q({data:e,param:"nol_pingCount"}),"num"),T=!!a&&a.returnLength,C=q({data:e,param:"nol_cadence"}),L=e.isProductOf("mtvr"),O=e.isProductOf("mtvrsubminute"),E=e.isProductOf(["dcrvideo","dcrstatic"]),w=e.isProductOf("dcrstatic"),F=t&&t.PLDCR&&t.PLDCR.focusTimer,k=J.getEventsFilter(e),D=oe(q({data:e,param:"nol_maxLength"}),"num");if(e.isProductOf(["mtvrsubminute"])&&t.PLSUB&&t.PLSUB.preProcess(e),q({data:e,param:"nol_pingCreationTime",val:Se(q({data:e,param:"nolPriv_serverTimeOffset"}))}),m=q({data:e,param:"nol_timeSpentViewing"}).content,f=q({data:e,param:"nol_timeSpentViewing"}).ad,g=q({data:e,param:"nol_timeSpentViewing"}).static,Pe(q({data:e,param:"nol_segmentTimeSpent"})),(!e.isProductOf(["dcrvideo","vrivideo"])||"1"===q({data:e,param:"nol_forceFireOnClose_content"})||!(e.isProductOf(["dcrvideo","vrivideo"])&&0===m.nol_segmentTimeSpent||"dcrstatic"===q({data:e,param:"nol_product"})&&0===g.nol_segmentTimeSpent)||"interval"!==C&&"streamduration"!==C||0!==f.nol_count||0!==f.nol_segmentTimeSpent)&&"false"===q({data:e,param:"nol_disabled"})&&(0===S||S>b)){if(K.setNextTick(e,null,"content"),v=fe(e,a)||"stream"===C||"impression"===C||"id3"===q({data:e,param:"nol_product"}),q({data:e,param:"nol_random",val:Math.round(1e9*Math.random())}),w&&"interval"===C&&F&&e.set("nol_staticIntervalTimeElapsed",parseInt(F.timeElapsed)),!e.delayedPingForFdata&&e.isProductOf(["mtvrsubminute"])&&t.PLSUB&&("2"!==q({data:e,param:"nol_davState"})||"2"===q({data:e,param:"nol_davState"})&&"2"===q({data:e,param:"nol_davty"}))&&(e.isProductOf(["mtvrsubminute"])&&t.PLSUB&&!1===t.PLSUB.lastEventIsFlush(e)&&t._listeners.fireEvent("processSubminuteFlush",{flush:"1",passedFdata:e}),i=!0),(_=(p=se(e,p)).length)<10)return null;if(q({data:e,param:"nolPriv_sendData"})&&v&&!T||D>0&&D<_||i){if(q({data:e,param:"nol_id3Data"})&&q({data:e,param:"nol_id3Data",val:!1}),me(q({data:e,param:"nol_comment"})," -queued @"+Math.floor(x()/1e3)+", timeOffset == "+q({data:e,param:"nolPriv_serverTimeOffset"})+", DU == "+q({data:e,param:"nol_segmentTimeSpent"})+" -- ",p),k.onSendPing&&(ge(e,k.onSendPing),"true"===q({data:e,param:"nol_disabled"})))return;e.delayedPingForFdata||ye({serverTimeOffset:q({data:e,param:"nolPriv_serverTimeOffset"}),url:p,prod:q({data:e,param:"nol_product"}),uoo:q({data:e,param:"nol_useroptout"}),maskRef:q({data:e,param:"nol_rfrmsk"}),method:J.getRequestMethod(e)}),n&&n(e),d.metadataURL&&("impression"===C&&E||"episode"===C&&(L||O))&&(d.metadataPing=se(e,d.metadataURL),d.hasMetaPingFired||(ye({serverTimeOffset:q({data:e,param:"nolPriv_serverTimeOffset"}),url:d.metadataPing,prod:q({data:e,param:"nol_product"}),maskRef:q({data:e,param:"nol_rfrmsk"}),method:J.getRequestMethod(e)}),me("Metadata Ping -queued @"+Math.floor(x()/1e3)+", timeOffset == "+q({data:e,param:"nolPriv_serverTimeOffset"})+" -- "+d.metadataPing),d.hasMetaPingFired=!0)),q({data:e,param:"nol_viewCount_"+e._currVidType.toLowerCase(),val:"0"}),t.PLSUB&&e.isProductOf(["mtvrsubminute"])&&!e.delayedPingForFdata&&t.PLSUB&&t.PLSUB.clear(e),K.clear(e),h&&h.hasOwnProperty(P)&&h[P].hasOwnProperty("debug")&&"logging"===h[P].debug&&((y=q({data:e,param:"nol_debugUrl"}))||(y=q({data:e,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),y=y+"pli="+P+"&sendPing="+q({data:e,param:"nol_product"})+"&"+p.substring(p.indexOf("?")+1),_e(y)),b++,m.nol_segmentTimeSpent=0,m.nol_count=0,f.nol_segmentTimeSpent=0,f.nol_count=0,g.nol_segmentTimeSpent=0,g.nol_count=0,F&&F.timeElapsed&&(F.timeElapsed=0),q({data:e,param:"nolPriv_priority",val:0}),q({data:e,param:"nol_pingCount",val:b.toString()}),q({data:e,param:"nol_forceFireOnClose_content",val:"0"});var I=rt(q({data:e,param:"nol_segmentLength"}));q({data:e,param:"nol_duration",val:new Array(I.length+1).join("0")})}else if(T)return{len:_,fData:p};return null}}}var t,re=re||{},De=[];function Ie(){try{De.length&&(De.forEach(function(e){e&&e()}),De=[])}catch(e){}}function Ae(e,a,n,r,i,o){var s,d=e.split("id3=")[1].split("&")[0];!n||n.serviceSending[a]&&d===n.serviceSentForTSV?r&&De.push(r):(n.serviceSending[a]=!0,n.serviceSentForTSV=d,re.request(e.replace("fmt=jsonp","fmt=json"),{method:"GET"}).then(function(e){if(200===parseInt(e.status)){var a={};try{a=JSON.parse(e.response)}catch(e){}a.cidParams=i,a.nol_playerId=n.id,t._listeners.fireEvent(o?"tsvUpdateDelayed":"tsvupdate",a)}else t._listeners.fireEvent(o?"tsvUpdateDelayed":"tsvupdate",{nol_playerId:n.id,nol_rtvodEnabled:!1});r&&r&&r(),Ie()}))}var h=h||{},be=be||function(){},oe=(oe=oe||function(){})||function(){},q=(q=q||function(){})||function(){};function Me(e,t,a){var n=q({data:e,param:"iag_"+t});return void 0!==n&&""!==n?a="&pr=iag."+t+","+be(n):a&&a.length>0&&-1===a.indexOf("&pr=iag")?a="&pr=iag."+t+","+be(a):null==a&&(a=""),a}function Re(e,t){var a,n,r,i,o,s,d,l,c,u,p,v,m,f,g,_,y=q({data:e,param:"nol_vidtype"});q({data:e,param:"nol_prod"}).indexOf("iag")>=0&&(a="",n=Me(e,"sid",q({data:e,param:"nol_sid",vidType:"content"})),r=Me(e,"tfid",q({data:e,param:"nol_tfid",vidType:"content"})),i=Me(e,"bcr",q({data:e,param:"nol_clientid",vidType:"content"})),s=Me(e,"epi",q({data:e,param:"nol_title"})||q({data:e,param:"nol_title",vidType:"content"})),(o=Me(e,"pgm",q({data:e,param:"nol_censuscategory"})||q({data:e,param:"nol_category"})||q({data:e,param:"nol_iagcategory"})))||(o=Me(e,"pgm",q({data:e,param:"nol_censuscategory",vidType:"content"})||q({data:e,param:"nol_category",vidType:"content"})||q({data:e,param:"nol_iagcategory",vidType:"content"})))||(o="&pr=iag.pgm,general"),d="&pr=iag.seg,",oe(q({data:e,param:"nol_chapter",vidType:"content"}),"num")>1?d+=q({data:e,param:"iag_seg"})||q({data:e,param:"nol_chapter",vidType:"content"}):d+="1",l=Me(e,"pd",l),c=Me(e,"oad",c),m=Me(e,"fp",m),_=Me(e,"cust1",_),"ad"===t?(u="&pr=iag.brn,"+q({data:e,param:"nol_clientid"}),p="&pr=iag.cte,"+be(q({data:e,param:"nol_adURL"})),v="midroll"===y?"&pr=iag.ap,mid":"postroll"===y?"&pr=iag.ap,post":"&pr=iag.ap,pre",n=Me(e,"sid",n),r=Me(e,"tfid",r),i=Me(e,"bcr",i),u=Me(e,"brn",u),p=Me(e,"cte",p),a=n+r+i+(o=Me(e,"pgm",o))+(s=Me(e,"epi",s))+(d=Me(e,"seg",d))+(l=Me(e,"pd",l))+u+v+p+(c=Me(e,"oad",c))+m+(f=Me(e,"pod",f))+(g=Me(e,"apt",g))+_):a=n+r+i+o+s+d+l+c+m+_,q({data:e,param:"nol_iagData",val:a+="&pr=iag.cp,soc"}))}var t,a=(t=(t=t||{})||{}).PLDPR=t.PLDPR||{},n=n||e.NOLBUNDLE,W=W||{},K=K||{},J=J||{},A=A||{},M=M||{},x=x||function(){},oe=oe||function(){},q=q||function(){},Be=Be||function(){},Ne=Ne||function(){},Ve=Ve||function(){},Ge=Ge||function(){},xe=xe||function(){},h=h||{},U=U||{},I=I||{},m=m||5,D=D||null,V=V||null,me=me||function(){},fe=fe||function(){},Ue=Ue||function(){},Re=Re||function(){},je=je||function(){},ge=ge||function(){},_e=_e||function(){},we=we||function(){},ye=ye||function(){},Pe=Pe||function(){},Se=Se||function(){},be=be||function(){},Ae=Ae||function(){},se=se||function(){},H=H||function(){},ke=ke||function(){},Le=Le||function(){},d=d||"cgi-bin/",ze=ze||n.getConfigAddress?n.getConfigAddress():n.getAddress(),u=u||"error",c=c||"cfg";function He(e){var t,a=null,n="content"==e._currVidType?oe(q({data:e,param:"nol_chnlCountThrshld"}),"num")||m:oe(q({data:e,param:"nol_staticCountThrshld"}),"num")||m,r=e._dataArrObj[e._currVidType],i,o=0,s=e._dataArrObj.count;if(!e._dataArrObj[e._currVidType].hasOwnProperty(e._currAssetid)){if(s[e._currVidType]>=n){for(i in r)if(r.hasOwnProperty(i)){if((o=r[i].nolPriv_priority)<=0){t=i;break}(null===a||a>o)&&(a=o,t=i)}r.hasOwnProperty(t)&&(delete r[t],s[e._currVidType]--)}e._dataArrObj[e._currVidType][e._currAssetid]={nolPriv_priority:0},s[e._currVidType]++}}function We(e,t,a){var n={},r,i=0,o,s=J.getEventsFilter(e),d="PC_"===e.get("nol_cidPrefix"),l="FD_"===e.get("nol_cidPrefix");if(q({data:e,param:"nol_playerId"})===t.target.nol_playerId){for(o in t.target)t.target.hasOwnProperty(o)&&(q({data:e,param:o,val:t.target[o]}),n[o]=t.target[o]);var c=J.findPlayer(e);if(c){var u=void 0!==c.oServiceCall[a.service]&&c.oServiceCall[a.service].hasOwnProperty("status")?c.oServiceCall[a.service].status:"undefined";c.oServiceCall[a.service]={status:"complete",prevStatus:u,station:a.key,data:n},c.serviceSending[a.service]=!1}var p=e.get("nol_serviceFilter");if(ge(e,p?p[a.service]:s),"true"===q({data:e,param:"nol_disabled"}))return;e.serviceFlag[a.service].need&&(q({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[a.service].need=!1,(l&&t.target.hasOwnProperty("nol_fdTimeCode")||d&&t.target.hasOwnProperty("nol_pcTimeCode"))&&"daypart"===q({data:e,param:"nol_cadence"})&&(i=oe(t.target.nol_fdTimeCode,"num"),r=oe(q({data:e,param:"nol_queueTime"}),"num"),q({data:e,param:"nol_queueTime",val:r+i})),Ue(q({data:e,param:"nol_queueTime"}),e))}}function Je(e,a){try{var n=q({data:e,param:"nol_playerId"});h&&h.hasOwnProperty(n)&&(!h[n].hasOwnProperty("nol_sessionId")||h[n].hasOwnProperty("forceStreamRegen")&&!0===h[n].forceStreamRegen)&&(a=a||t.generateGUID(),h[n].nol_sessionId=a,h[n].forceStreamRegen=!1)}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function qe(e){try{var a=q({data:e,param:"nol_playerId"});if(a&&t._players&&t._players.hasOwnProperty(a)){var n=t._players[a],r;if(n&&Object.keys(n.ottStatusObj).length>0)for(r in n.ottStatusObj)q({data:e,param:r,val:n.ottStatusObj[r],vidType:"content"})}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function ie(e,a,n,r,i){J.extendfData(e);var o=e.get("nol_useroptout"),s="",l,c,p="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count",v=q({data:e,param:{}});if(He(e),A=J.getEventsFilter(e),"ad"===e._currVidType.toLowerCase()&&(s="st,a",q({data:e,param:"nol_currSeg",val:"0"})),""===q({data:e,param:"nol_errorURL"})&&q({data:e,param:"nol_errorURL",val:ze+d+u+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===a)for(l in v)v.hasOwnProperty(l)&&-1===p.indexOf(l)&&q({data:e,param:l,val:Ge({data:e,param:l})||""});for(l in n)n.hasOwnProperty(l)&&q({data:e,param:String(l),val:String(n[l])});if(e.set("nol_useroptout",o),q({data:e,param:"nolPriv_sendData",val:!0}),q({data:e,param:"nol_davState",val:"0"}),q({data:e,param:"nol_highWM",val:"0"}),q({data:e,param:"nol_iagData",val:""}),q({data:e,param:"nol_disabled",val:"false"}),q({data:e,param:"nol_sendQual",val:Ge({data:e,param:"nol_sendQual"})||""}),q({data:e,param:"nolPriv_assetid",val:""}),e.set("nolPriv_prevEvent",""),"S"===Ge({data:e,param:"nol_segmentPrefix"})&&q({data:e,param:"nol_segmentPrefix",val:"S"}),q({data:e,param:"nol_c3"})||q({data:e,param:"nol_c3",val:s}),!i){"content"===e._currVidType.toLowerCase()&&Je(e),q({data:e,param:"nol_applyViewInc",val:"1"}),(!q({data:e,param:"nol_minutes"})||"daypart"!==q({data:e,param:"nol_cadence"})&&"dcrstatic"!==q({data:e,param:"nol_product"})||"dcrstatic"===q({data:e,param:"nol_product"})&&"stream"===q({data:e,param:"nol_cadence"}))&&(Ve(e),q({data:e,param:"nol_pingCount",val:0}));var m=q({data:e,param:"nol_adLoadType",vidType:"content"});""!==m&&null!=m&&ge(e,A.onAdLoadFlag),qe(e),r&&r.resetViewability&&r.resetViewability(e),t.PLSUB&&e.isProductOf(["mtvrsubminute"])&&!1===t.PLSUB.subminPlayerInitialized(e)&&t.PLSUB.initTag(e,function(){console.log("plsub initialized at tag level",e.get("nol_comment"))})}}function Ke(e,t){var a,n;h[t].bReInit||(h[t].bReInit=!0,h[t].eventQueue=[],e&&h[t].eventQueue.push(e),H(D))}function Qe(e,t,a){(t&&!0===t.flush||!("dcrstatic"===q({data:e,param:"nol_product"})&&"stream"!==q({data:e,param:"nol_cadence"})||e.isProductOf("vrivideo")))&&("content"===q({data:e,param:"nol_ac"})&&"interval"===e.get("nol_cadence")&&q({data:e,param:"nol_segmentTimeSpent"})>0||"streamduration"===q({data:e,param:"nol_cadence"})&&e.get("nol_segmentTimeSpent","ad")>0||"id3"===q({data:e,param:"nol_product"})&&q({data:e,param:"nol_id3Data"})||"dcrstatic"===q({data:e,param:"nol_product"})&&"stream"===q({data:e,param:"nol_cadence"})||"postroll"===q({data:e,param:"nol_vidtype"})&&"interval"===q({data:e,param:"nol_cadence"})||t&&!0===t.flush&&e.isProductOf("dcrvideo")&&"interval"===e.get("nol_cadence")&&e.get("nol_segmentTimeSpent")>0||t&&!0===t.flush&&e.isProductOf("dcrvideo")&&"streamduration"===e.get("nol_cadence")&&"ad"===e.get("nol_ac")&&e.get("nol_segmentTimeSpent","ad")>0||t&&!0===t.flush&&e.isProductOf("dcrstatic")&&"interval"===e.get("nol_cadence")&&e.get("nol_segmentTimeSpent","static")>0)&&("content"===q({data:e,param:"nol_ac"})||t&&!0===t.save?e.isProductOf("mtvrsubminute")?ke(e,{save:!0},a&&a.onPingFired?a.onPingFired:null,void 0,!0):ke(e,{save:!0},a&&a.onPingFired?a.onPingFired:null):e.isProductOf("mtvrsubminute")?ke(e,null,a&&a.onPingFired?a.onPingFired:null,void 0,!0):ke(e,null,a&&a.onPingFired?a.onPingFired:null),q({data:e,param:"nolPriv_now",val:0}))}function he(a,n,r){var i=J.findPlayer(a),o=J.getEventsFilter(a),s=i.oServiceCall[n.service],d=n.url,l=n.key,c;n.evntCB=q({data:a,param:a.serviceFlag[n.service].callback}),n.callBack=function(e){We(a,e,n)};var u=!1;if("tsvupdate"===n.evntCB){var p,v,m=se(a,d).split("id3=")[1].split("&")[0],f=i.serviceSending[n.service]&&m!==i.serviceSentForTSV,g=!i.serviceSending[n.service]&&m===i.serviceSentForTSV;g&&(i.startCondition=!g,u=!1),!f&&!i.startCondition||g||(void 0!==i.startCondition&&null!==i.startCondition&&""!==i.startCondition||(i.startCondition=f),i.startCondition&&(n.evntCB="tsvUpdateDelayed",u=!0))}if(r)return t._listeners.addListener(n.evntCB,n.callBack,!0,i),void Ae(se(a,d),n.service,i,r,n.cidData,u);if(!s&&l&&d&&d.length>0)"stnupdate"===n.evntCB&&(void 0===i.oServiceCall[n.service]||void 0===i.oServiceCall[n.service].status||"init"!==i.oServiceCall[n.service].status&&"complete"!==i.oServiceCall[n.service].status)&&(i.oServiceCall[n.service]={status:"init",station:null,data:null}),t._listeners.addListener(n.evntCB,n.callBack,!0,i),Ae(se(a,d),n.service,i,null,n.cidData,u);else if(s&&"init"===s.status);else if(s&&"complete"===s.status&&l!==s.station)t._listeners.addListener(n.evntCB,n.callBack,!0,i),Ae(se(a,d),n.service,i,null,n.cidData,u);else if(s&&"complete"===s.status&&l===s.station){for(c in s.data)s.data.hasOwnProperty(c)&&q({data:a,param:c,val:s.data[c]});if(M&&M[i.id]&&M[i.id][n.service]?ge(a,M[i.id][n.service]):ge(a,o),"true"===q({data:a,param:"nol_disabled"}))return;a.serviceFlag[n.service].need&&(q({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[n.service].need=!1,Ue(q({data:a,param:"nol_queueTime"}),a))}else t._listeners.fireEvent(n.evntCB,n),e.setTimeout(function(){he(a,n)},1e3)}function Ye(e,a,n,r,i){var o=null,s=null,d=Math.round(x(e)/1e3);try{var l;if(e)K.isEnabled(e)&&(o=W.inferEvent(a.currEvtType,e,a._param1,d,a._param3))&&(o.event!==W.events.play&&J.state.set(e,o),K.preProcess(e,o)),t.PLSUB&&e.isProductOf(["mtvrsubminute"])&&!e.delayedPingForFdata&&(s=t.PLSUB.inferEvent(a.currEvtType,e,a._param1,d,function(a){if(!a||""!==a.curPos){var n=t.PLSUB.finiteStateMachine(e);!0===t.PLSUB.getFirstPlayheadReceived(e)?e&&e._dataArrObj&&e._dataArrObj.content&&"object"===_typeof(e._dataArrObj.content)&&e._dataArrObj.content[0]&&t._listeners.fireEvent("subMinuteTrackedEvent",{data:a,plid:r.id||r.getId?r.getId():"0",passedFdata:e}):t.PLSUB.setDelayedPlayhead(e,!0)}})),a.currEvtType&&("5"===a.currEvtType.toString()&&"6"===e.get("nolPriv_prevEvent")&&"st,a"===e.get("nol_c3")&&"false"===e.get("nol_disabled")&&"dcrvideo"===e.get("nol_product")&&"streamduration"===e.get("nol_cadence")&&(U[n.timeStamp]=we(e,{type:18,msg:"Event 6 -> 5 detected in ad."},!0,!0)),e.set("nolPriv_prevEvent",a.currEvtType.toString().toLowerCase()),e.set("nolPriv_prevEventState",a.eventState?a.eventState.toString().toLowerCase():"")),(""!==J.cms.parse(i.nol_adobeId,e,{metadata:a._param1,defaultKey:"nol_adobeId",silent:!0})||""!==J.cms.parse(i.nol_adobeSessionId,e,{metadata:a._param1,defaultKey:"nol_adobeSessionId",silent:!0})||r.isAdobe)&&(r.disablePauseTimeout(),r.isAdobe=!0)}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredSubminuteEvent:s,inferredEvent:o,timestamp:d}}function Xe(e,a){try{if(e&&a.inferredEvent){var n=t.PLSUB.finiteStateMachine(e);(t.PLSUB&&t.PLSUB.eventTypes&&a.inferredEvent.event===t.PLSUB.eventTypes.PLAY||a.inferredEvent.event===W.events.play)&&J.state.set(e,a.inferredEvent),t.PLSUB&&e.isProductOf(["mtvrsubminute"])&&!0===t.PLSUB.getDelayedPlayhead(e)&&a.inferredSubminuteEvent&&(t.PLSUB.setDelayedPlayhead(e,!1),t._listeners.fireEvent("subMinuteTrackedEvent",{data:a.inferredSubminuteEvent,plid:e.get("nol_playerId")||"0",passedFdata:e})),K.postProcess(e,a.inferredEvent)}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function $e(e,a,n){var r,i,o,s;return e.staticIFrameFlag||(t._listeners.fireEvent("error",{type:"error",msg:"Error in "+a+' event - enableStaticInIframe flag not set to "true" in config.'}),r=!0),t.browser.isWithinIFrame()||(t._listeners.fireEvent("error",{type:"error",msg:"Error in "+a+" event - DCR Static implementation is not within an iframe."}),i=!0),t.PLDCR&&t.PLDCR.dcrTimer?void 0===t.PLDCR.dcrTimer.isActive&&"stoptimer"===a&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in "+a+' event - Timer not activated, please call ggPM event "starttimer" before calling "'+a+'".'}),o=!0):(t._listeners.fireEvent("error",{type:"error",msg:"Error in "+a+' event - Timer not instantiated, please call ggPM event "staticstart" before calling "'+a+'".'}),o=!0),-1===["focus","touchstart","blur"].indexOf(n)&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in "+a+" event - Invalid event type: "+n+"."}),s=!0),r||i||o||s}var t=t||{},q=q||function(){},J=J||{},I=I||{},ke=ke||function(){},ge=ge||function(){},ie=ie||function(){},U=U||{},we=we||function(){},oe=oe||function(){},h=h||{},Ae=Ae||function(){},he=he||function(){},Ue=Ue||function(){},x=x||function(){},xe=xe||function(){},je=je||function(){},Ve=Ve||function(){},Ke=Ke||function(){},Re=Re||function(){},V=V||null,Be,R={dtvr:(new(Be=function a(){var n=this;return this.Dtvr=function(){var a=this,n={current:{metaData:[]},new:null,index:0};function r(e,t){for(var a=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t),r=[],i=a.length>n.length?a.slice():n.slice(),o=0;o<i.length;o++){var s=i[o];e[s]!==t[s]&&r.push(s)}return r.length?"End event must be called before loading new metadata. The following parameters will not be updated: "+r.join():""}function i(){"object"===_typeof(n.new._param3)&&null!==n.new._param3&&(n.current.metaData[n.index]=n.new._param3,n.index++),"string"==typeof n.new._param3&&-1!==n.new._param3.indexOf("www.nielsen.com")&&(n.current.id3=n.new._param3),n.current.prevEvent=n.new.prevEvent,n.new=null}return this.preHandleGgpm=null,this.postHandleGgpm=null,this.preQueueGgpm=function(){},this.postQueueGgpm=function(){n.new&&i()},this.handleGgpm=function(a,i,o){var s=i.evtInfo,d=s.param1,l=s.param3?s.param3:d.hasOwnProperty("param3")?d.param3:d,c=s.param2||"",u=q({data:a,param:"nol_playerId"}),p=I[u]||{},v=q({data:a,param:"nol_enableFilterMap"}),m=s.eventType.toString().toLowerCase(),f=J.getEventsFilter(a),g=J.findPlayer(a),_=oe(q({data:a,param:"nolPriv_id3Count"}),"num"),y=q({data:a,param:"nolPriv_serverTimeOffset"}),P=q({data:a,param:"nol_prod"}),S=t.PLSUB&&a.isProductOf("mtvrsubminute"),b={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},T="|mtvr|,|dprid3|,|id3|,|mtvrsubminute|",C="nol_assetid",L={},O={},E,w,F,k,D,A,M,R,B,N,G,U,j={onCalcStart:function e(t,n){a.isProductOf(["mtvr","id3","mtvrsubminute"])&&o&&o.tickViewability&&"function"==typeof o.tickViewability?o.tickViewability(a,t,n):n&&n()},onPingFired:function e(t){if(o&&o.resetViewability&&o.resetViewability(t),S){var a=q({data:t,param:"nol_minutes"});for(N=0,G=a.length;N<G;N++)a[N].save=!1,a[N].updated=!1;q({data:t,param:"nol_minutes"},a),q({data:t,param:"nol_eventDataDTVR",val:""})}},onRewind:function e(a){a.isProductOf(["mtvr","id3","mtvrsubminute"])&&t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&t.PLSUB.inferEvent(t.PLSUB.eventTypes.REWIND,a,a.get("nolPriv_currPos"),Math.round(x()/1e3),function(e){t._listeners.fireEvent("subMinuteTrackedEvent",{data:e,plid:a.get("nol_playerId"),passedFdata:a})})},onFastForward:function e(a,n){a.isProductOf(["mtvr","id3","mtvrsubminute"])&&t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&t.PLSUB.inferEvent(t.PLSUB.eventTypes.FORWARD,a,a.get("nolPriv_currPos"),Math.round(x()/1e3),function(e){a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&a._dataArrObj.content[0]&&(t._listeners.fireEvent("subMinuteTrackedEvent",{data:e,plid:a.get("nol_playerId"),passedFdata:a}),n&&"function"==typeof n&&n())})}};switch(n.new||(n.new={},n.new._param3=l),m){case"3":case"15":case"loadmetadata":var z=String(J.cms.parse(p.nol_assetid,a,{metadata:l,defaultKey:"nol_assetid",silent:!0})),H=!0===q({data:a,param:"nol_onCompleteFired"}),W;if(l.nol_ac=a._currVidType,oe(q({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(x()/1e3)+y){xe(a,j.onPingFired),Ke(i,q({data:a,param:"nol_playerId"}));break}if(("15"===m||"loadmetadata"===m)&&"id3"===q({data:a,param:"nol_product"})&&q({data:a,param:"nol_id3Data"})){ke(a,null,j&&j.onPingFired?j.onPingFired:null);break}if(W=a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0]&&!a._dataArrObj.content[a._currAssetid]){ie(a,"loadMetadata",l,o),q({data:a,param:"nol_disabled",val:"true"});break}var K=z!==q({data:a,param:C});if(n.assetIdChanged=K,"false"===q({data:a,param:"nol_disabled"})&&!H&&!K&&!n.new.noEndErr){if(n.current.metaData.length){var Q=r(n.current.metaData[n.index-1],l);Q&&we(a,{type:17,msg:Q},!0,!0)}else we(a,{type:17,msg:"End event must be called before loading new metadata."},!0,!0);n.new.noEndErr=!0}if(K)for(U in"ad"!==q({data:a,param:"nol_ac"})&&(a.set("nol_assetIdChangedInDTVR",!0),xe(a,j.onPingFired)),l)l.hasOwnProperty(U)&&q({data:a,param:String(U),val:String(l[U])});q({data:a,param:"nol_pingStartTimeUTC",val:Math.round(x()/1e3)}),-1!==P.indexOf("iag")&&Re(a,a._currVidType,p);break;case"5":case"play":if(l[E=p.nol_channelName?p.nol_channelName.clientField:"nol_channelName"]&&l[E].length>0)for(U in l)l.hasOwnProperty(U)&&q({data:a,param:U,val:l[U]});break;case"55":case"sendid3":var Y=d.toString().split("/"),X=Y[1],$=Y[2],Z=J.mtvr.fdChanged(a,$),ee=J.mtvr.pcChanged(a,X),te=$===q({data:a,param:"nol_cidNull"}),ae=X===q({data:a,param:"nol_cidNull"}),ne=J.mtvr.isPCTag(a),re=J.mtvr.isFDTag(a),se=!0===q({data:a,param:"nol_onCompleteFired"}),de="1"===a.get("nol_fdrtvod"),le=q({data:a,param:"nol_cidParams"});if(le&&""!==le&&q({data:a,param:"nol_cidParams",val:le={fdChanged:Z,pcChanged:ee}}),"15"===n.current.prevEvent||"loadmetadata"===n.current.prevEvent){var ce=n.current.metaData[n.index-1],ue="0",W;if(se){if(Z||ee&&te||ee&&!te&&(de||ne)){q({data:a,param:C,val:-1}),Ve(a),(t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&Z&&"MTVR subminute duration"===a.get("nol_comment")&&re||ee&&te||ee&&!te&&(de||ne)&&"MTVR subTag subminute duration"===a.get("nol_comment")&&ne)&&t.PLSUB.updatePrevAdModelToDefault(a,ce.adModel,"0");var pe=["nol_nielsenAdSupportFlg","nol_adModelChange"];ne&&!1===te&&!1===Z?pe.push("nol_fdcid"):re&&!1===ae&&!1===ee&&pe.push("nol_pccid"),je({data:a,savedVals:pe,savedReplayParams:O},o)}else if(!n.assetIdChanged)for(U in ce)ce.hasOwnProperty(U)&&q({data:a,param:String(U),val:String(ce[U])});q({data:a,param:"nol_onCompleteFired",val:!1})}if(t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&(te||ae)&&(te&&re||ae&&ne)&&t._listeners.fireEvent("processResetAdModelChange",{passedFdata:a}),W=a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0]&&!a._dataArrObj.content[a._currAssetid]){if(ie(a,"loadMetadata",ce,o),Object.keys(O).length>0){for(var ve in O)O.hasOwnProperty(ve)&&""!==O[ve]&&q({data:a,param:String(ve),val:String(O[ve])});O={}}q({data:a,param:"nol_disabled",val:"true"})}}if("57"!==n.current.prevEvent&&"end"!==n.current.prevEvent&&"oncomplete"!==n.current.prevEvent||(Z||ee&&te||ee&&!te&&(de||ne)?Ve(a):a.isProductOf(["mtvrsubminute"])&&(re&&!Z||ne&&!ee)&&q({data:a,param:"nol_davState",val:"1"})),!a.delayedPingForFdata&&a.isProductOf(["mtvr","id3","mtvrsubminute"])&&t.PLSUB){t.PLSUB&&!1===t.PLSUB.getFirstPlayheadReceived(a)&&t.PLSUB.setFirstPlayheadReceived(a,!0),"1"===q({data:a,param:"nol_tsvChanged"})&&(q({data:a,param:"nol_tsvChanged",val:"0"}),t.PLSUB.processTsvChange(a));var me=a.get("nol_adModelChange"),fe=""!==me?me.split("|"):[];(ne&&!1===ae||re&&!1===te)&&fe.length>0&&"-1"!==fe[0]&&fe[0]!==fe[1]&&t._listeners.fireEvent("processSubminuteAdModel",{amval:fe[0]||"-1",oldamval:fe[1]||"-1",passedFdata:a})}var _e=!1,ye=!1;if(("object"===(void 0===d?"undefined":_typeof(d))&&Object.keys(d).length>0||"string"==typeof d&&d.length>0)&&(!0===q({data:a,param:"nol_onCompleteFired"})&&g&&g.getPauseQueueCount&&g.getPauseQueueCount()>0?t._listeners.fireEvent("flushPauseEventQueue"):!0===q({data:a,param:"nol_onCompleteFired"})&&g&&!g.getPauseQueueCount&&t._listeners.fireEvent("flushPauseEventQueue"),"object"===(void 0===d?"undefined":_typeof(d))))for(G=0;G<d.length;G+=1)if(d[G].key&&"PRIV"===d[G].key){d=d[G].info;break}if(249!==(k=d.toString()).length&&(n.id3LengthErr||(we(a,{type:17,msg:"ID3 tag length is not 249. ID3 Tag: "+k},!0,!0),e.console&&e.console.warn&&e.console.warn("Warning: ID3 tag length is not 249."),n.id3LengthErr=!0)),F=k.split("/"),d={},F.length<oe(V.nol_breakout,"num"))return;for(U in(parseInt(F[4])>86400||parseInt(F[5])>86400)&&(n.offsetErr||(we(a,{type:17,msg:"Invalid offset value, offsets received - PC: "+F[4]+", FD: "+F[5]},!0,!0),n.offsetErr=!0)),V)V.hasOwnProperty(U)&&(d[U]=F[V[U]],"nol_breakout"===U&&(t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&a.set("nol_prevBreakout",a.get("nol_breakout")),d[U]=F[oe(V[U],"num")].substr(0,2)),L[U]=d[U]);if(!d||q({data:a,param:"nol_tsvBreakoutMap"})&&-1===q({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(d.nol_breakout)||-1===d.nol_nWebAddress.indexOf("nielsen.com")||d.nol_fdcid===q({data:a,param:"nol_cidNull"})&&d.nol_pccid===q({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",N=0,G=v.length;N<G;N+=1)w=p[v[N]]?p[v[N]].clientField:v[N],L[v[N]]=d[w]||q({data:a,param:v[N]});if(L.nol_vidtype="content",ge(a,f.onId3Detected,L),"false"!==L.nol_disabled||"nol_cmsoffset"===q({data:a,param:"nol_timer"}))return void 0!==d.nol_fdcid&&d.nol_fdcid!==q({data:a,param:"nol_cidNull"})&&q({data:a,param:"nol_fdcid",val:d.nol_fdcid}),void 0!==d.nol_pccid&&d.nol_pccid!==q({data:a,param:"nol_cidNull"})&&q({data:a,param:"nol_pccid",val:d.nol_pccid}),void q({data:a,param:"nol_id3Raw",val:l});if("daypart"===q({data:a,param:"nol_cadence"})){var Pe=q({data:a,param:"nol_assetid"})||a._currAssetid;!Pe&&d.nol_fdcid&&d.nol_fdcid!==q({data:a,param:"nol_cidNull"})?a._currAssetid=d.nol_fdcid:!a._currAssetid&&Pe&&(a._currAssetid=Pe)}if(d.nol_ac=a._currVidType,d.nol_assetid=q({data:a,param:"nol_assetid"})||a._currAssetid,_>0&&(-1!==q({data:a,param:"nol_product"}).indexOf("id3")||-1!==q({data:a,param:"nol_product"}).indexOf("mtvr")||-1!==q({data:a,param:"nol_product"}).indexOf("mtvrsubminute"))&&(d.nol_pccid!==q({data:a,param:"nol_cidNull"})&&d.nol_pccid!==q({data:a,param:"nol_pccid"})||d.nol_fdcid!==q({data:a,param:"nol_cidNull"})&&d.nol_fdcid!==q({data:a,param:"nol_fdcid"}))){var Se=Z&&"FD_"===q({data:a,param:"nol_cidPrefix"})||ee&&"PC_"===q({data:a,param:"nol_cidPrefix"});!a.isProductOf(["mtvrsubminute"])||!0!==Se||!0!==Z&&!0!==ee||se||a.get("nol_assetIdChangedInDTVR")?Z||ee&&te||ee&&!te&&(de||ne)?(ke(a,null,j.onPingFired,!0),t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&void 0!==d&&(!0===Z&&!0===re||!0===ee&&!0===ne)&&t.PLSUB.processCidChange(a,d,n)):(Z&&!0===re||ee&&!0===ne)&&xe(a,j.onPingFired,null,"onAssetIdChange"):t._listeners.fireEvent("processSubminuteStop",{passedFdata:a,callback:function e(){t.PLSUB.inferEvent(t.PLSUB.eventTypes.PLAY,a,a.get("nolPriv_currPos"),Math.round(x()/1e3),function(e){t._listeners.fireEvent("subMinuteTrackedEvent",{data:e,plid:a.get("nol_playerId"),passedFdata:a})}),t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&t.PLSUB.inferEvent(t.PLSUB.eventTypes.FLUSH,a,a.get("nolPriv_currPos"),Math.round(x()/1e3),function(e){t._listeners.fireEvent("subMinuteTrackedEvent",{data:e,plid:a.get("nol_playerId"),passedFdata:a})}),ke(a,null,j.onPingFired,!0),t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&a.isProductOf(["mtvrsubminute"])&&void 0!==d&&t.PLSUB.processCidChange(a,d,n)}})}var be=J.mtvr.pcChanged(a,d.nol_pccid),Te=J.mtvr.fdChanged(a,d.nol_fdcid),Ce=J.mtvr.isPCTag(a),Le=J.mtvr.isFDTag(a),Oe=be&&(Ce||J.mtvr.isTransPing(a)),Ee=Te&&(Le||J.mtvr.isTransPing(a));if((Oe||Ee)&&(Oe?b.filters.onId3PcCidChanged=!0:Ee&&(b.filters.onId3FdCidChanged=!0),b.count=b.count+1,o&&o.startViewability(a),(Te||J.mtvr.isNullFDCid(a))&&a.set("nol_id3Seq",0)),Te&&J.mtvr.isPCTag(a)&&(_e=!0),Ce&&!J.mtvr.isNullPCCid(a)&&""!==a.get("nol_pccid")&&be||""!==a.get("nol_fdrtvod")&&"0"!==a.get("nol_fdrtvod")&&(Ce||Le)&&!J.mtvr.isNullPCCid(a)&&""!==a.get("nol_pccid")&&!J.mtvr.isNullFDCid(a)&&""!==a.get("nol_fdcid")&&be?(ye=!0,Le&&f&&f.onId3FdCidChanged&&ge(a,f.onId3FdCidChanged)):"interval"===q({data:a,param:"nol_cadence"})&&Te&&Le&&!J.mtvr.isNullFDCid(a)&&d.nol_fdcid===a.get("nol_cidNull")&&xe(a,j.onPingFired),b.count){if(ie(a,"sendID3",d,o),(b.filters.onId3PcCidChanged||b.filters.onId3FdCidChanged||q({data:a,param:"nol_fdcid"})===q({data:a,param:"nol_cidNull"}))&&-1!==q({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(d.nol_breakout)&&(a.serviceFlag.tsv.need=!0),b.count>0)for(U in b.filters)if(b.filters[U]&&(ge(a,f[U]),"true"===q({data:a,param:"nol_disabled"})))return;if(f.onComplete&&(ge(a,f.onComplete),"true"===q({data:a,param:"nol_disabled"})))return}else{for(U in d)d.hasOwnProperty(U)&&q({data:a,param:U,val:d[U]});if("true"===q({data:a,param:"nolPriv_enableDtvr"})&&("true"===q({data:a,param:"nol_disabled"})&&q({data:a,param:"nol_disabled",val:"false"}),q({data:a,param:"nolPriv_enableDtvr",val:"false"}),a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&a._dataArrObj.content[a._currAssetid]&&void 0!==a._dataArrObj.content[a._currAssetid].nol_davty)){var Fe=q({data:a,param:"nol_defaults"}).nol_davty;null!=Fe&&q({data:a,param:"nol_davty",val:Fe})}}if((Te&&Le||be&&Ce)&&a.isProductOf(["mtvr","mtvrsubminute"])&&"impression"===a.get("nol_cadence")&&"false"===a.get("nol_disabled")){var De=h[u].nolPriv_newMTVRStreamId;h[u].nolPriv_newMTVRStreamId=De&&h[u].restEvtTimestamp==i.timeStamp?De:t.generateGUID(),J.mtvr.resetTagSession(a,h[u].nolPriv_newMTVRStreamId),h[u].restEvtTimestamp=i.timeStamp,t._listeners.fireEvent("debug",{type:"debug",msg:a.get("nol_comment")+" new mtvr session is "+De})}if((a.isProductOf(["mtvr","mtvrsubminute"])||a.isProductOf("id3"))&&"false"===a.get("nol_disabled")&&h[u].restEvtTimestamp!=i.timeStamp){var Ie=h[u].nolPriv_newMTVRStreamId;Ie&&Ie!==a.get("nol_sessionId","content")&&J.mtvr.resetTagSession(a,Ie)}if(q({data:a,param:"nol_id3Raw",val:k}),(a.serviceFlag.tsv.need||_e||ye)&&-1!==T.indexOf("|"+q({data:a,param:"nol_product"})+"|")&&"false"===a.get("nol_disabled")){if(["true","1"].indexOf(a.get("nol_rtvodEnabled").toString().toLowerCase())>-1){var Ae=a.get("nol_rtvod"),Me=""!==Ae?Ae:a.get("nol_prevRtvod");a.set("nol_prevRtvod",Me),a.set("nol_rtvod","")}D=ye?q({data:a,param:"nol_pccid"}):_e?q({data:a,param:"nol_fdcid"}):!0!==b.filters.onId3PcCidChanged||J.mtvr.isNullPCCid(a)?q({data:a,param:"nol_fdcid"}):q({data:a,param:"nol_pccid"}),a.get("nol_tsvURL")&&he(a,{service:"tsv",key:D,url:q({data:a,param:"nol_tsvURL"}),cidData:{pcChanged:be,fdChanged:Te,isPc:Ce,isFd:Le}})}if((a.isProductOf("id3")||a.isProductOf(["mtvr","mtvrsubminute"])&&"interval"===a.get("nol_cadence")&&"false"===a.get("nol_disabled"))&&d.nol_watermark&&String(d.nol_watermark).length>0&&(M=q({data:a,param:"nol_id3Data"}),R=Math.round(x()/1e3+y),B=q({data:a,param:"nol_id3Seq"})||0,M?q({data:a,param:"nol_id3Data",val:M=M+"|"+R+","+q({data:a,param:"nol_id3Raw"})}):(q({data:a,param:"nol_id3Data",val:B+":"+q({data:a,param:"nol_clocksrc"})+":"+q({data:a,param:"nol_tsvFlag"})+":"+R+","+q({data:a,param:"nol_id3Raw"})}),q({data:a,param:"nol_id3Seq",val:oe(B,"num")+1,vidType:"content"})),a.isProductOf("id3")))return _>0&&ke(a,{returnLength:!0},j.onPingFired),q({data:a,param:"nolPriv_id3Count",val:_+=1}),q({data:a,param:"nol_davState",val:"1"}),void(n.new.prevEvent=m);if(q({data:a,param:"nolPriv_id3Count",val:_+=1}),A=q({data:a,param:q({data:a,param:"nol_timer"})})||q({data:a,param:"nol_fdoffset"}),"daypart"===q({data:a,param:"nol_cadence"})&&(A=oe(A,"num"),A+="nol_pcoffset"==q({data:a,param:"nol_timer"})?oe(q({data:a,param:"nol_pcTimeCode"}),"num"):oe(q({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)q({data:a,param:"nol_queueTime",val:A});else{if("true"===q({data:a,param:"nol_disabled"}))return;Ue(A,a,j),q({data:a,param:"nol_davState",val:"1"})}g&&g.sivt&&g.sivt.initialized&&g.sivt.addSIVTTag&&g.sivt.initialized()&&"impression"===a.get("nol_cadence")&&g.sivt.dtvrInit&&!g.sivt.dtvrInit()&&g.sivt.addSIVTTag(a),(Te&&J.mtvr.isFDTag(a)||be&&J.mtvr.isPCTag(a))&&(t.PLSUB&&a&&a.isProductOf(["mtvrsubminute"])&&("2"!==q({data:a,param:"nol_davty"})||"2"===q({data:a,param:"nol_davty"})&&!1===t.PLSUB.lastEventIsFlush(a))&&t.PLSUB.processCidChangePlayEntry(a),J.mtvr.isPCTag(a)&&"false"===a.get("nol_disabled")?o&&o.tickViewability(a,d.nol_pcoffset):J.mtvr.isFDTag(a)&&"false"===a.get("nol_disabled")&&o&&o.tickViewability(a,d.nol_fdoffset));break;case"57":case"end":case"oncomplete":"static"!==q({data:a,param:"nol_ac"})&&(a._currVidType="content"),"episode"!==a.get("nol_cadence")&&f.onEndDetected&&"false"===a.get("nol_disabled")&&ge(a,f.onEndDetected),q({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==q({data:a,param:"nol_disabled"})&&"id3"!==q({data:a,param:"nol_product"})||xe(a,j.onPingFired),q({data:a,param:"nol_onCompleteFired",val:!0}),h[u].forceStreamRegen=!0,"sessionReset"!==c&&g.disablePauseTimeout()}n.new.prevEvent=m},this},this})).Dtvr()};function Ze(a,n,r){var i=q({data:a,param:"nol_playerId"});if(i===n.id)if(n.evtInfo&&void 0!==n.evtInfo.eventType&&null!==n.evtInfo.eventType&&""!==n.evtInfo.eventType&&(!n.evtInfo.hasOwnProperty("param1")||null!==n.evtInfo.param1&&void 0!==n.evtInfo.param1)){var o=n.evtInfo,s=o.param1,d=o.param3?o.param3:s.hasOwnProperty("param3")?s.param3:s,l=o.param2||"",c,u=oe(q({data:a,param:"nolPriv_id3Count"}),"num"),p,v,m,f=q({data:a,param:"nol_enableFilterMap"}),g="|mtvr|,|dprid3|,|id3|,|mtvrsubminute|",_,y,P={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},S,b,T=J.getEventsFilter(a),C,L=q({data:a,param:"nol_prod"}),O,E={},w=o.eventType.toString(),F,k="content",D,A,M,B=q({data:a,param:"nolPriv_serverTimeOffset"}),N=I[i]||{},G=N.nol_vidtype?N.nol_vidtype.clientField:"nol_vidtype",j=N.nol_tagSrc?N.nol_tagSrc.clientField:"nol_tagSrc",z=N.nol_ac?N.nol_ac.clientField:"nol_ac",H=N.nol_linearAdLoadFlag?N.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",W=d[G]?d[G].toString().toLowerCase():d.type?d.type.toString().toLowerCase():"",Q="nol_assetid",Y=J.findPlayer(a),X=Y.metadataCtrl,$=q({data:a,param:"nol_cadence"}),Z={};Y.resetSession=Y.resetSession||!1,"object"===(void 0===d?"undefined":_typeof(d))&&Object.prototype.hasOwnProperty.call(d,"type")&&""===d.type&&n.timeStamp&&!U[n.timeStamp]&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Type param is empty"}),U[n.timeStamp]=we(a,{type:17,msg:"Type param is empty in ggPM"},!0,!0)),W&&n.timeStamp&&!U[n.timeStamp]&&-1==["static","content","ad","preroll","postroll","midroll"].indexOf(W.toLowerCase())&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid content type param"}),U[n.timeStamp]=we(a,{type:17,msg:"Invalid content type param in ggPM"},!0,!0));var ee={onTick:function e(t){!a.isProductOf(["mtvr","id3","mtvrsubminute"])&&r&&r.tickViewability&&"function"==typeof r.tickViewability&&r.tickViewability(a,t)},onCalcStart:function e(t,n){a.isProductOf(["mtvr","id3","mtvrsubminute"])&&r&&r.tickViewability&&"function"==typeof r.tickViewability?r.tickViewability(a,t,n):n&&n()},onPingFired:function e(t){r&&r.resetViewability&&r.resetViewability(t),t.isProductOf(["mtvr","id3","mtvrsubminute"])&&r&&r.tickViewability&&"function"==typeof r.tickViewability&&r.tickViewability(t,t.get("nolPriv_currPos"))}};w=w.toLowerCase();var te=Ye(a,{currEvtType:w,_param1:s,eventState:l,_param3:d},n,Y,N),ae=q({data:a,param:"nol_linearAdLoadFlag",vidType:a._currVidType});"object"===_typeof(n.evtInfo.param1)&&n.evtInfo.param1.adModel&&-1==["0","1","2"].indexOf(n.evtInfo.param1.adModel)&&(["0","1","2"].indexOf(ae)>-1?n.evtInfo.param1.adModel=ae:n.evtInfo.param1.adModel=q({data:a,param:"nol_linearAdLoadFlag"})),w="3"===w.toLowerCase()?"15":w.toLowerCase();var ne=Le(n),re=X.pageURL,se=X.pageTitle,de=X.evalPageData(),le=de.pageUrl,ce=de.pageTitle;le===re&&ce===se||(X.pageURL=le,X.pageTitle=ce,X.handleMetadataPingReset(),h[i].nol_pageURLmeta=X.pageURL,h[i].nol_pageTitle=X.pageTitle);var ue="dcrstatic"===q({data:a,param:"nol_product"}),pe="14"===w||"staticstart"===w;switch(w){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if("object"===_typeof(n.evtInfo.param1)&&-1==["0","1","2"].indexOf(n.evtInfo.param1.adModel)&&(n.evtInfo.param1.adModel=q({data:a,param:"nol_linearAdLoadFlag"})),("14"===w||"staticstart"===w)&&"dcrstatic"!==q({data:a,param:"nol_product"}))return;if("14"!==w&&"staticstart"!==w&&"dcrstatic"===q({data:a,param:"nol_product"}))return;if("pauseloadmeta"===w&&a.isProductOf("vrivideo"))return;"14"!==w&&"staticstart"!==w||"dcrstatic"!==q({data:a,param:"nol_product"})||!Y.staticIFrameFlag||t.browser.isWithinIFrame()||n.timeStamp&&!U[n.timeStamp]&&(t._listeners.fireEvent("error",{type:"error",msg:"DCR Static not in iFrame, but enableStaticInIframe is set to true in config"}),U[n.timeStamp]=we(a,{type:17,msg:"DCR Static not in iFrame, but enableStaticInIframe is set to true in config"},!0,!0));var ve=","+q({data:a,param:"nol_contentType"}),me=a._currVidType,fe=q({data:a,param:"nolPriv_prevEvent"}),_e=q({data:a,param:"nol_currPos"}),ye=W&&-1!==ve.indexOf(","+W.toLowerCase())?"content":"dcrstatic"===q({data:a,param:"nol_product"})?"static":"ad";if("ad"===q({data:a,param:"nol_ac"})&&q({data:a,param:"nol_segmentTimeSpent",vidType:"ad"})>0&&"streamduration"===$&&xe(a,ee.onPingFired),a._currVidType=ye,(me!==a._currVidType||a.get("nolPriv_forcedContent"))&&(r&&r.resetViewability(a),a.set("nolPriv_forcedContent",!1)),R.dtvr&&("15"===w||"loadmetadata"===w)&&a.isProductOf(["mtvr","id3","mtvrsubminute"])&&"content"===a._currVidType){var Pe=q({data:a,param:"nol_linearAdLoadFlag",vidType:a._currVidType});if(R.dtvr.handleGgpm(a,ne,r),t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&"false"!==q({data:a,param:"nol_disabled"})){var Se=String(J.cms.parse(N.nol_assetid,a,{metadata:d,defaultKey:"nol_assetid",silent:!0})),be=!0===q({data:a,param:"nol_onCompleteFired"}),Te=Se!==q({data:a,param:Q}),Ce=""!==q({data:a,param:Q});n.evtInfo.param1.adModel&&-1!==["0","1","2"].indexOf(n.evtInfo.param1.adModel)&&(J.mtvr.isFDTag(a)&&!J.mtvr.isNullFDCid(a)||J.mtvr.isPCTag(a)&&!J.mtvr.isNullPCCid(a))&&t._listeners.fireEvent("setSubminuteAdModelChange",{amval:n.evtInfo.param1.adModel,oldamval:Pe,passedFdata:a})}break}"ad"===me&&"content"===a._currVidType&&a.isProductOf("dcrvideo")&&"interval"===a.get("nol_cadence")&&a.set("nolPriv_currPos","");var Oe=null,Ee=null,Se=String(J.cms.parse(N.nol_assetid,a,{metadata:d,defaultKey:"nol_assetid",silent:!0}));pe&&String(a._currAssetid)!==Se&&(xe(a,ee.onPingFired),q({data:a,param:Q,val:-1}),je({data:a,resetStatic:!0}),Y.static.started&&(t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0")));var Fe=!0===a.get("nol_onCompleteFired");if(!0===q({data:a,param:"nol_onCompleteFired"})?("content"!==a._currVidType&&"static"!==a._currVidType||("content"===a._currVidType.toLowerCase()&&h[i].hasOwnProperty("forceStreamRegen")&&!0===h[i].forceStreamRegen&&Je(a),q({data:a,param:Q,val:-1}),"content"===a._currVidType?(Oe=J.state.clone(a),Ee=K.clone(a),je({data:a,savedVals:["nol_nielsenAdSupportFlg"],savedReplayParams:Z},r)):je({data:a,resetStatic:!0},r)),q({data:a,param:"nol_onCompleteFired",val:!1})):"14"!==w&&"staticstart"!==w||"stream"!==q({data:a,param:"nol_cadence"})||(q({data:a,param:Q,val:-1}),je({data:a},r)),"ad"===a._currVidType&&a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){var De=rt(q({data:a,param:"nol_segmentLength"}));q({data:a,param:"nol_minutes",val:De}),q({data:a,param:Q,val:-1}),q({data:a,param:G,val:W}),"1"!==q({data:a,param:"nol_nielsenAdSupportFlg",vidType:"content"})&&q({data:a,param:"nol_nielsenAdSupportFlg",val:"1",vidType:"content"})}if(a._currAssetid=Se&&"daypart"===q({data:a,param:"nol_cadence"})||"stream"!==q({data:a,param:"nol_cadence"})&&"dcrstatic"===q({data:a,param:"nol_product"})?Se:a._currAssetid,d.nol_ac=a._currVidType,oe(q({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(x()/1e3)+B)return xe(a,ee.onPingFired),void Ke(n,q({data:a,param:"nol_playerId"}));for(F=0,D=f.length;F<D;F+=1)c=N[f[F]]?N[f[F]].clientField:f[F],E[f[F]]=String(d[c]||"");p=Se||q({data:a,param:"nolPriv_assetid"}),"15"!==w&&"loadmetadata"!==w||"id3"!==q({data:a,param:"nol_product"})||!q({data:a,param:"nol_id3Data"})||ke(a,null,ee&&ee.onPingFired?ee.onPingFired:null);var Ie=p!==q({data:a,param:Q})||a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0];if(ge(a,T.onCmsDetected,E),"false"!==E.nol_disabled||!d)return void("cms"!==a._currTagSrc&&(Ie?(ie(a,"loadMetadata",d,r),q({data:a,param:"nol_disabled",val:"true"})):J.updateMetadata(a,d,N,{inferred:!0}),"15"!==w&&"loadmetadata"!==w||"id3"!==q({data:a,param:j,vidType:"content"})&&!a.isProductOf(["mtvr","mtvrsubminute"])||!0===q({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||q({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"})));if("static"===a._currVidType&&"dcrstatic"===q({data:a,param:"nol_product"})?(t._listeners.fireEvent("updateCmbStaticPage",{evtInfo:o,plid:i}),k="static"):k="content",p!==q({data:a,param:Q})){"ad"!==q({data:a,param:"nol_ac"})&&xe(a,ee.onPingFired,void 0,"onAssetIdChange");var Ae=q({data:a,param:Q});if(ie(a,"loadMetadata",d,r),Ae&&!Fe&&"content"===a._currVidType.toLowerCase()&&a.isProductOf("dcrvideo")&&"impression"===a.get("nol_cadence")&&(Y.resetSession=!0),Object.keys(Z).length>0){for(var Me in Z)Z.hasOwnProperty(Me)&&""!==Z[Me]&&q({data:a,param:Me,val:Z[Me]});Z={}}if(q({data:a,param:"nolPriv_assetid",val:q({data:a,param:Q})}),"15"!==w&&"loadmetadata"!==w||"id3"!==q({data:a,param:j,vidType:"content"})&&!a.isProductOf(["mtvr","mtvrsubminute"])||!0===q({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||q({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),ge(a,T.onAssetIdChanged),"true"===q({data:a,param:"nol_disabled"}))return;if("drm"===q({data:a,param:"nol_product"}))a.serviceFlag.stn.need=!0;else if(a.serviceFlag.stn.need=!1,"true"===q({data:a,param:"nol_disabled"}))return;if(ge(a,T.onComplete),Oe&&J.state.bind(a,Oe),Ee&&K.bind(a,Ee),"true"===q({data:a,param:"nol_disabled"}))return}"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&"impression"!==q({data:a,param:"nol_cadence"})&&a.set("nolPriv_adCounted",!1),a.isProductOf("vrivideo")&&"impression"===a.get("nol_cadence")&&(a.set("nol_vriEvent","start"),a.set("nol_startPos","")),q({data:a,param:"nol_pingStartTimeUTC",val:Math.round(x()/1e3)}),-1!==L.indexOf("iag")&&Re(a,a._currVidType,N),("ad"===a._currVidType&&!a.isProductOf(["dcrvideo","vrivideo"])||"stream"===q({data:a,param:"nol_cadence"}))&&(q({data:a,param:"nol_pingCount",val:0}),q({data:a,param:"nolPriv_sendData",val:!0}),q({data:a,param:"nol_davState",val:"0"}),a.serviceFlag.stn.need||"content"===a._currVidType||"nol_cmsoffset"!==q({data:a,param:"nol_timer"})&&"nol_pageoffset"!==q({data:a,param:"nol_timer"})||Ue(0,a,ee)),"14"!==w&&"staticstart"!==w||"dcrstatic"!==q({data:a,param:"nol_product"})||!0===Y.static.started||(t.PLDCR.start(!0),Y.static.started=!0);break;case"5":case"play":if("mtvr"===q({data:a,param:"nol_product"})||"mtvrsubminute"===q({data:a,param:"nol_product"})){if(R.dtvr){R.dtvr.handleGgpm(a,ne,r);break}if(d[C=N.nol_channelName?N.nol_channelName.clientField:"nol_channelName"]&&d[C].length>0)for(A in d)d.hasOwnProperty(A)&&q({data:a,param:A,val:d[A]})}else a.isProductOf(["dcrvideo","vrivideo"])&&1==a.get("nolPriv_adStop")&&(a.set("nolPriv_adStop",!1),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&"interval"===a.get("nol_cadence")&&a.set("nolPriv_currPos","","content"),a._currVidType="content",E={nol_vidtype:q({data:a,param:G,vidType:a._currVidType}),nol_tagSrc:q({data:a,param:j,vidType:a._currVidType}),nol_linearAdLoadFlag:q({data:a,param:H,vidType:a._currVidType}),nol_ac:q({data:a,param:z,vidType:a._currVidType})},ge(a,T.onCmsDetected,E));break;case"6":case"pause":t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&t.PLSUB.inferEvent(t.PLSUB.eventTypes.PAUSE,a,a.get("nolPriv_currPos"),Math.round(x()/1e3),function(e){t._listeners.fireEvent("subMinuteTrackedEvent",{data:e,plid:a.get("nol_playerId"),passedFdata:a})}),Qe(a,null,ee);break;case"7":case"stop":Qe(a,null,ee),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&a.set("nolPriv_adStop",!0);break;case"flush":var $;if("interval"===($=a.get("nol_cadence"))||"streamduration"===$){if(a.isProductOf("dcrvideo")){Qe(a,{flush:!0,save:!0},ee);break}var Be=t&&t.PLDCR;a.isProductOf("dcrstatic")&&Be&&(Qe(a,{flush:!0,save:!0},ee),Be.dcrTimer&&Be.dcrTimer.reset(),a.set("nolPriv_currPos","0"),Be.focusTimer.enableTimeout=!!Be.focusTimer.intervalID,Be.focusTimer.enableTimeout&&(Be.focusTimer.timeoutStartTime=Date.now()))}break;case"changecontext":s&&["content","ad"].indexOf(s)>-1&&(a._currVidType=s);break;case"updateott":if(Qe(a,null,ee),s&&s.hasOwnProperty("ottStatus")&&s.ottStatus.length>0){if(s.hasOwnProperty("kGCKMetadataNlsKeyOptout")&&s.hasOwnProperty("kGCKMetadataNlsKeyDeviceID")){var Ve=s.kGCKMetadataNlsKeyOptout.toString().toLowerCase();q({data:a,param:"nol_userSessionId",val:s.kGCKMetadataNlsKeyDeviceID,vidType:"content"}),q({data:a,param:"nol_useroptout",val:"1"===Ve||"true"===Ve?"true":"false",vidType:"content"}),-1===[1,"1","true",0,"0","false"].indexOf(Ve)&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: Invalid kGCKMetadataNlsKeyOptout value."})}for(var Q in s)s.hasOwnProperty(Q)&&(q({data:a,param:Q,val:s[Q],vidType:"content"}),Y.ottStatusObj[Q]=s[Q]);T.onOTTDetected&&ge(a,T.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===w||"staticend"===w)&&"dcrstatic"!==q({data:a,param:"nol_product"}))return;if("56"!==w&&"staticend"!==w&&"dcrstatic"===q({data:a,param:"nol_product"}))return;if(a.isProductOf("vrivideo")&&("57"===w||"end"===w)&&("sessionReset"===l||"modcadence"!=a.get("nol_cadence")))return;if(R.dtvr&&("57"===w||"end"===w||"oncomplete"===w)&&a.isProductOf(["mtvr","id3","mtvrsubminute"])){R.dtvr.handleGgpm(a,ne,r);break}if("ad"===a._currVidType&&("streamduration"===q({data:a,param:"nol_cadence"})?ke(a,null,ee.onPingFired):a.isProductOf(["dcrvideo"])&&"interval"===q({data:a,param:"nol_cadence"})&&(""===q({data:a,param:"nol_dataDate",vidType:"content"})&&""!==q({data:a,param:"nol_dataDate"})&&(q({data:a,param:"nol_dataDate",val:q({data:a,param:"nol_dataDate"}),vidType:"content"}),q({data:a,param:"nol_hourCode",val:q({data:a,param:"nol_hourCode"}),vidType:"content"}),q({data:a,param:"nol_dayId",val:q({data:a,param:"nol_dayId"}),vidType:"content"})),a._currVidType="content","episode"!==a.get("nol_cadence")&&T.onEndDetected&&ge(a,T.onEndDetected),ke(a,null,ee.onPingFired))),a.isProductOf("dcrvideo")&&a.set("nolPriv_currPos",""),a.isProductOf("vrivideo")&&"modcadence"===a.get("nol_cadence")){var Ge=a.get("nol_length")||J.cms.parse(N.nol_length,a,{defaultKey:"nol_length",silent:!0});if("NaN"===parseInt(Ge).toString())return;if(!(parseInt(a.get("nol_currPos"))>=parseInt(a.get("nol_length"))))return;a.set("nol_vriEvent","ended")}"static"!==q({data:a,param:"nol_ac"})&&(a._currVidType="content"),"episode"!==a.get("nol_cadence")&&T.onEndDetected&&ge(a,T.onEndDetected),q({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==q({data:a,param:"nol_disabled"})&&"id3"!==q({data:a,param:"nol_product"})||("static"===q({data:a,param:"nol_ac"})&&t._listeners.fireEvent("removeCmbAssetId",o),xe(a,ee.onPingFired)),q({data:a,param:"nol_onCompleteFired",val:!0}),h[i].forceStreamRegen=!0,"56"!=w&&"staticend"!=w||"dcrstatic"!==q({data:a,param:"nol_product"})||(t.PLDCR.stop(),Y.static.started=!1),"sessionReset"!==l&&Y.disablePauseTimeout();break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===q({data:a,param:"nol_disabled"})||!s||"nol_pageoffset"!==q({data:a,param:"nol_timer"}))return;var ze;"1"===q({data:a,param:"nol_onPaginateFired_static"})&&(q({data:a,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==q({data:a,param:"nol_cadence"})&&Ne(a,{vidType:"static"})),(M=oe(q({data:a,param:"nol_highWM"}),"num"))<oe(s,"num")&&q({data:a,param:"nol_highWM",val:s}),Ue(s,a,ee),q({data:a,param:"nol_davState",val:"1"}),Y&&Y.sivt&&Y.sivt.initialized&&Y.sivt.addSIVTTag&&Y.sivt.initialized()&&"impression"===a.get("nol_cadence")&&Y.sivt.dcrStaticInit&&!Y.sivt.dcrStaticInit()&&Y.sivt.addSIVTTag(a),ze=a.get("nol_cadenceOverrideEnabled")&&a.get("nol_cadenceOverride")?a.get("nol_cadenceOverride"):!(!t.PLDCR.cadenceOverrideEnabled||!t.PLDCR.cadenceOverride)&&t.PLDCR.cadenceOverride;var He=60*parseInt(a.get("nol_segmentLength")||0);"dcrstatic"===a.get("nol_product")&&ze&&ze>0&&ze<=s&&(!He||ze<He)&&(Qe(a,{flush:!0,save:!0},ee),t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0"));break;case"49":case"setplayheadposition":case"playheadposition":if(s>-1){if(!0===q({data:a,param:"nol_onCompleteFired"})&&t._listeners.fireEvent("flushPauseEventQueue"),"number"!=typeof s){if("string"!=typeof s)return;s=oe(s,"num")}else s=Math.floor(s);if(a.isProductOf("dcrvideo")&&q({data:a,param:"nol_isLive",val:(s>86400).toString()}),"true"===q({data:a,param:"nol_disabled"})||!s||"nol_cmsoffset"!==q({data:a,param:"nol_timer"})||"ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"===q({data:a,param:"nol_cadence"}))return;if(Y&&!0===Y.resetSession&&(Y.resetSession=!1,h[i].forceStreamRegen=!0,Je(a)),a.isProductOf("vrivideo")){var We=Math.floor(s);"impression"===a.get("nol_cadence")&&1===We&&We<a.get("nolPriv_prevPos")&&(a.set("nol_pingCount",0),a.set("nol_currPos","")),"modcadence"===a.get("nol_cadence")&&a.set("nol_vriEvent","loop")}var qe;if((M=oe(q({data:a,param:"nol_highWM"}),"num"))<s&&q({data:a,param:"nol_highWM",val:s}),a.serviceFlag.stn.need?(q({data:a,param:"nol_queueTime",val:s}),he(a,{service:"stn",key:q({data:a,param:"nol_assetid"}),url:q({data:a,param:"nol_stationURL"}),nol_playerId:q({data:a,param:"nol_playerId"})})):Ue(s,a,ee),q({data:a,param:"nol_davState",val:"1"}),Y&&Y.sivt&&Y.sivt.initialized&&Y.sivt.addSIVTTag&&Y.sivt.initialized()&&"impression"===a.get("nol_cadence")&&Y.sivt.dcrVideoInit&&!Y.sivt.dcrVideoInit()&&Y.sivt.addSIVTTag(a),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&"impression"!==q({data:a,param:"nol_cadence"})&&!1===a.get("nolPriv_adCounted"))q({data:a,param:"nol_timeSpentViewing"})[a._currVidType].nol_count++,a.set("nolPriv_adCounted",!0);"content"!==a._currVidType||Y.isAdobe||Y._pauseTimeoutEnabled||Y.enablePauseTimeout()}else n.timeStamp&&!U[n.timeStamp]&&(U[n.timeStamp]=we(a,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),U[n.timeStamp]&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if("nol_cmsoffset"===a.get("nol_timer")||"nol_pageoffset"===a.get("nol_timer"))return;if(t.PLSUB&&!1===t.PLSUB.getFirstPlayheadReceived(a)&&a.isProductOf(["mtvrsubminute"])&&t.PLSUB.setFirstPlayheadReceived(a,!0),R.dtvr){R.dtvr.handleGgpm(a,ne,r);break}var Ze=!1,et=!1;if(("object"===(void 0===s?"undefined":_typeof(s))&&Object.keys(s).length>0||"string"==typeof s&&s.length>0)&&(!0===q({data:a,param:"nol_onCompleteFired"})&&Y&&Y.getPauseQueueCount&&Y.getPauseQueueCount()>0?t._listeners.fireEvent("flushPauseEventQueue"):!0===q({data:a,param:"nol_onCompleteFired"})&&Y&&!Y.getPauseQueueCount&&t._listeners.fireEvent("flushPauseEventQueue"),"object"===(void 0===s?"undefined":_typeof(s))))for(D=0;D<s.length;D+=1)if(s[D].key&&"PRIV"===s[D].key){s=s[D].info;break}if(249!==(y=s.toString()).length&&n.timeStamp&&!U[n.timeStamp]&&(U[n.timeStamp]=we(a,{type:17,msg:"ID3 tag length is not 249. ID3 Tag: "+y},!0,!0),e.console&&e.console.warn&&e.console.warn("Warning: ID3 tag length is not 249.")),s={},(_=y.split("/")).length<oe(V.nol_breakout,"num"))return;for(A in V)V.hasOwnProperty(A)&&(s[A]=_[V[A]],"nol_breakout"===A&&(t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&a.set("nol_prevBreakout",a.get("nol_breakout")),s[A]=_[oe(V[A],"num")].substr(0,2)),E[A]=s[A]);if(!s||q({data:a,param:"nol_tsvBreakoutMap"})&&-1===q({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)||-1===s.nol_nWebAddress.indexOf("nielsen.com")||s.nol_fdcid===q({data:a,param:"nol_cidNull"})&&s.nol_pccid===q({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",F=0,D=f.length;F<D;F+=1)c=N[f[F]]?N[f[F]].clientField:f[F],E[f[F]]=s[c]||q({data:a,param:f[F]});if(E.nol_vidtype="content",ge(a,T.onId3Detected,E),"false"!==E.nol_disabled||"nol_cmsoffset"===q({data:a,param:"nol_timer"}))return;if("daypart"===q({data:a,param:"nol_cadence"})){var tt=q({data:a,param:"nol_assetid"})||a._currAssetid;!tt&&s.nol_fdcid&&s.nol_fdcid!==q({data:a,param:"nol_cidNull"})?a._currAssetid=s.nol_fdcid:!a._currAssetid&&tt&&(a._currAssetid=tt)}s.nol_ac=a._currVidType,s.nol_assetid=q({data:a,param:"nol_assetid"})||a._currAssetid,u>0&&(-1!==q({data:a,param:"nol_product"}).indexOf("id3")||-1!==q({data:a,param:"nol_product"}).indexOf("mtvr")||-1!==q({data:a,param:"nol_product"}).indexOf("mtvrsubminute"))&&(s.nol_pccid!==q({data:a,param:"nol_cidNull"})&&s.nol_pccid!==q({data:a,param:"nol_pccid"})||s.nol_fdcid!==q({data:a,param:"nol_cidNull"})&&s.nol_fdcid!==q({data:a,param:"nol_fdcid"}))&&ke(a,null,ee.onPingFired,!0);var at=J.mtvr.pcChanged(a,s.nol_pccid),nt=J.mtvr.fdChanged(a,s.nol_fdcid),it=J.mtvr.isPCTag(a),ot=J.mtvr.isFDTag(a),st=at&&(it||J.mtvr.isTransPing(a)),dt=nt&&(ot||J.mtvr.isTransPing(a));if((st||dt)&&(st?P.filters.onId3PcCidChanged=!0:dt&&(P.filters.onId3FdCidChanged=!0),P.count+=1,r&&r.startViewability(a),(nt||J.mtvr.isNullFDCid(a))&&a.set("nol_id3Seq",0)),nt&&it&&(Ze=!0),""===a.get("nol_fdrtvod")||"0"===a.get("nol_fdrtvod")||!it&&!ot||J.mtvr.isNullPCCid(a)||""===a.get("nol_pccid")||J.mtvr.isNullFDCid(a)||""===a.get("nol_fdcid")||!at||(et=!0,ot&&T&&T.onId3FdCidChanged&&ge(a,T.onId3FdCidChanged)),P.count){if(ie(a,"sendID3",s,r),(P.filters.onId3PcCidChanged||P.filters.onId3FdCidChanged||q({data:a,param:"nol_fdcid"})==q({data:a,param:"nol_cidNull"}))&&-1!==q({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)&&(a.serviceFlag.tsv.need=!0),P.count>0)for(A in P.filters)if(P.filters[A]&&(ge(a,T[A]),"true"===q({data:a,param:"nol_disabled"})))return;if(T.onComplete&&(ge(a,T.onComplete),"true"===q({data:a,param:"nol_disabled"})))return}else for(A in s)s.hasOwnProperty(A)&&q({data:a,param:A,val:s[A]});if((nt&&ot||at&&it)&&a.isProductOf(["mtvr","mtvrsubminute"])&&"impression"===a.get("nol_cadence")&&"false"===a.get("nol_disabled")){var lt=h[i].nolPriv_newMTVRStreamId;h[i].nolPriv_newMTVRStreamId=lt&&h[i].restEvtTimestamp==n.timeStamp?lt:t.generateGUID(),J.mtvr.resetTagSession(a,h[i].nolPriv_newMTVRStreamId),h[i].restEvtTimestamp=n.timeStamp,t._listeners.fireEvent("debug",{type:"debug",msg:a.get("nol_comment")+" new mtvr session is "+lt})}if((a.isProductOf(["mtvr","mtvrsubminute"])||a.isProductOf("id3"))&&"false"===a.get("nol_disabled")&&h[i].restEvtTimestamp!=n.timeStamp){var ct=h[i].nolPriv_newMTVRStreamId;ct&&ct!==a.get("nol_sessionId","content")&&J.mtvr.resetTagSession(a,ct)}if(q({data:a,param:"nol_id3Raw",val:y}),(a.serviceFlag.tsv.need||Ze||et)&&-1!==g.indexOf("|"+q({data:a,param:"nol_product"})+"|")&&"false"===a.get("nol_disabled")&&(["true","1"].indexOf(a.get("nol_rtvodEnabled").toString().toLowerCase())>-1&&(a.set("nol_prevRtvod",a.get("nol_rtvod")),a.set("nol_rtvod","")),b=et?q({data:a,param:"nol_pccid"}):Ze?q({data:a,param:"nol_fdcid"}):!0!==P.filters.onId3PcCidChanged||J.mtvr.isNullPCCid(a)?q({data:a,param:"nol_fdcid"}):q({data:a,param:"nol_pccid"}),a.get("nol_tsvURL")&&he(a,{service:"tsv",key:b,url:q({data:a,param:"nol_tsvURL"}),cidData:{pcChanged:at,fdChanged:nt,isPc:it,isFd:ot}})),(a.isProductOf("id3")||a.isProductOf(["mtvr","mtvrsubminute"])&&"interval"===a.get("nol_cadence")&&"false"===a.get("nol_disabled"))&&s.nol_watermark&&String(s.nol_watermark).length>0&&(v=q({data:a,param:"nol_id3Data"}),m=Math.round(x()/1e3+B),O=q({data:a,param:"nol_id3Seq"})||0,v?q({data:a,param:"nol_id3Data",val:v+="|"+m+","+q({data:a,param:"nol_id3Raw"})}):(q({data:a,param:"nol_id3Data",val:O+":"+q({data:a,param:"nol_clocksrc"})+":"+q({data:a,param:"nol_tsvFlag"})+":"+m+","+q({data:a,param:"nol_id3Raw"})}),q({data:a,param:"nol_id3Seq",val:oe(O,"num")+1,vidType:"content"})),a.isProductOf("id3")))return u>0&&ke(a,{returnLength:!0},ee.onPingFired),q({data:a,param:"nolPriv_id3Count",val:u+=1}),void q({data:a,param:"nol_davState",val:"1"});if(q({data:a,param:"nolPriv_id3Count",val:u+=1}),S=q({data:a,param:q({data:a,param:"nol_timer"})})||q({data:a,param:"nol_fdoffset"}),"daypart"===q({data:a,param:"nol_cadence"})&&(S=oe(S,"num"),S+="nol_pcoffset"==q({data:a,param:"nol_timer"})?oe(q({data:a,param:"nol_pcTimeCode"}),"num"):oe(q({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)q({data:a,param:"nol_queueTime",val:S});else{if("true"===q({data:a,param:"nol_disabled"}))return;Ue(S,a,ee),q({data:a,param:"nol_davState",val:"1"})}(nt&&J.mtvr.isFDTag(a)||at&&J.mtvr.isPCTag(a))&&(t.PLSUB&&a&&a.isProductOf(["mtvrsubminute"])&&t.PLSUB.processCidChangePlayEntry(a),J.mtvr.isPCTag(a)&&"false"===a.get("nol_disabled")?r&&r.tickViewability(a,s.nol_pcoffset):J.mtvr.isFDTag(a)&&"false"===a.get("nol_disabled")&&r&&r.tickViewability(a,s.nol_fdoffset));break;case"subminutetagtick":if(a.isProductOf(["mtvrsubminute"])||"true"===q({data:a,param:"nol_disabled"})||!s)return;(M=oe(q({data:a,param:"nol_highWM"}),"num"))<s&&q({data:a,param:"nol_highWM",val:s}),Ue(s,a,r,ee),q({data:a,param:"nol_davState",val:"1"});break;case"60":case"mute":break;case"61":case"setvolume":if(oe(s,"num")<0||oe(s,"num")>100)return;var ut=q({data:a,param:"nol_volumeLevel"});q({data:a,param:"nol_volumeLevel",val:s}),r&&r.viewability&&r.viewability.setVolume(s,a),t.PLSUB&&a.isProductOf(["mtvrsubminute"])&&(("0"!==ut&&"-1"!==ut||"0"===s)&&("0"===ut&&"-1"!==ut||"0"!==s)||t._listeners.fireEvent("processSubminuteMute",{volume:s,passedFdata:a}));break;case"30":case"onpaginate":"dcrstatic"===q({data:a,param:"nol_product"})&&T.onPaginateDetected&&"stream"!==q({data:a,param:"nol_cadence"})&&ge(a,T.onPaginateDetected),q({data:a,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":if(a.isProductOf(["dcrvideo","vrivideo"])){J.updateMetadata(a,d,N,n.evtInfo);var pt=q({data:a,param:"nol_adLoadType",vidType:"content"});""!==pt&&null!=pt&&ge(a,T.onAdLoadFlag)}break;case"buffer":case"buttonevent":break;case"starttimer":if(a.isProductOf("dcrstatic")&&"impression"===a.get("nol_cadence")){var vt;if($e(Y,w,s="string"==typeof s?s.toLowerCase():""))break;var mt="focus"===s,ft="touchstart"===s;t.PLDCR.dcrTimer.isActive||(mt&&(t.PLDCR.dcrTimer.play(t.PLDCR._reset),t.PLDCR._reset=!1),ft&&t.PLDCR.safeFocus({type:s}))}break;case"stoptimer":if(a.isProductOf("dcrstatic")&&"interval"===a.get("nol_cadence")){var gt;if($e(Y,w,s="string"==typeof s?s.toLowerCase():""))break;t.PLDCR.dcrTimer.isActive&&"blur"===s&&(Qe(a,{flush:!0,save:!0},ee),t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0"),t.PLDCR.dcrTimer.pause(),t.PLDCR.safeFocusOn&&(t.PLDCR.safeFocusOn=!1))}}Xe(a,te)}else n.timeStamp&&!U[n.timeStamp]&&"true"!==a.get("nol_disabled")&&(n.evtInfo&&!n.evtInfo.eventType&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid event type param"}),U[n.timeStamp]=we(a,{type:17,msg:"Missing event type param in ggPM"},!0,!0)),!n.evtInfo||null!==n.evtInfo.param1&&void 0!==n.evtInfo.param1||(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"}),U[n.timeStamp]=we(a,{type:17,msg:"Missing param1 detected on event "+n.evtInfo.eventType},!0,!0)))}var N,t,L=L||null,h=h||{},U=U||{},W=W||{},J,K=K||{},ke,Ze=Ze||function(){},_e=_e||function(){},we=we||function(){},ye=ye||function(){},Ve=Ve||function(){},q;function et(e,t,a){var n=!1,r=a.toString().toLowerCase().indexOf(t.toString().toLowerCase());return"-"===e&&-1===r?n=!0:"+"===e&&(a===t||-1!==r&&a&&t)?n=!0:"--"===e&&-1===t.toString().toLowerCase().indexOf(a.toString().toLowerCase())?n=!0:"++"===e&&-1!==t.toString().toLowerCase().indexOf(a.toString().toLowerCase())&&(n=!0),n}function ge(e,t,a,n){var r=t||e.get("nol_finalFilter",n),i,o,s,d,l,c,u,p,v,m,f,g=a||{};if(r&&void 0!==r)for(i=0,o=r.length;i<o;i++){if((p=r[i]).tagVar.length)for(s=0,d=p.tagVar.length;s<d&&(m=e.get(p.tagVar[s].name,n));s++);else m=e.get(p.tagVar.name,n);if(m&&p.tagVar.value===m){for(s=0,d=p.cond.length;s<d;s++){if(u=g[p.cond[s]]||e.get(p.cond[s],n),c=0===p.is.value.indexOf("nol_")&&e.get(p.is.value,n)?e.get(p.is.value,n):p.is.value,void 0===u||void 0===c||!et(p.is.type,u,c)){v=!1;break}v=!0}if(void 0!==v&&void 0!==(f=v?p.then:p.else))for(l in f)f.hasOwnProperty(l)&&(void 0!==g.nol_vidtype?g[l]=f[l]:e.set(l,f[l],n))}}}function tt(t,a){var n,r,i=t.split("||"),o=i[0]||t;if(e)for(n=0,r=i.length;n<r;n++)o=i[n],void 0!==e["on"+o]&&(e.addEventListener?e.addEventListener(o,a,!1):e.attachEvent&&e.attachEvent("on"+o,a))}function je(e,a){var n;try{if(!e||!e.hasOwnProperty("data"))return;if(e.hasOwnProperty("savedVals")&&e.hasOwnProperty("savedReplayParams"))if(Array.isArray(e.savedVals))for(n in e.savedVals)e.savedVals.hasOwnProperty(n)&&(e.savedReplayParams[e.savedVals[n]]=q({data:e.data,param:e.savedVals[n]}));else"string"==typeof e.savedVals&&(e.savedReplayParams[e.savedVals]=q({data:e.data,param:e.savedVals}));e.hasOwnProperty("resetStatic")&&!0===e.resetStatic&&(e.data._dataArrObj.static={}),e.data._dataArrObj.ad={},e.data._dataArrObj.content={},e.data._dataArrObj.count={content:0,ad:0,static:0},e.data._currAssetid="0"}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetDataObj"+e})}}function at(e){var t=q({data:e,param:"nol_cidNull"}),a=q({data:e,param:"nol_cidPrefix"});return void 0!==e&&("PC_"===a&&q({data:e,param:"nol_pccid"})!==t||"FD_"===a&&q({data:e,param:"nol_fdcid"})!==t)}function xe(e,a,n,r){var r=r||"";"id3"===q({data:e,param:"nol_product"})&&q({data:e,param:"nol_id3Data"})?ke(e,null,a||null,n):e.isProductOf("vrivideo")&&"ended"!==e.set("nol_vriEvent")||"true"!==q({data:e,param:"nol_disabled"})&&("1"===q({data:e,param:"nol_davState"})||"onbeforeunload"===r&&"1"===e.get("nol_davState","ad"))&&("episode"!==e.get("nol_cadence")&&"onAssetIdChange"===r&&"1"===q({data:e,param:"nol_davty"})&&q({data:e,param:"nol_davty",val:"2"}),!e.delayedPingForFdata&&e.isProductOf(["mtvrsubminute"])?t._listeners.fireEvent("processSubminuteStop",{passedFdata:e,callback:function a(){t.PLSUB&&!1===t.PLSUB.lastEventIsFlush(e)&&t.PLSUB.inferEvent(t.PLSUB.eventTypes.PLAY,e,e.get("nolPriv_currPos"),Math.round(x()/1e3),function(a){t._listeners.fireEvent("subMinuteTrackedEvent",{data:a,plid:e.get("nol_playerId"),passedFdata:e})})}}):e.isProductOf(["mtvrsubminute"])&&(["57","end","oncomplete"].indexOf(e.get("nolPriv_prevEvent"))>-1||e.delayedPingForFdata&&e.get("nol_assetIdChangedInDTVR"))&&t._listeners.fireEvent("processSubminuteStop",{passedFdata:e,callback:function a(){t.PLSUB&&!1===t.PLSUB.lastEventIsFlush(e)&&t._listeners.fireEvent("processSubminuteFlush",{flush:"1",passedFdata:e})}}),"episode"!==e.get("nol_cadence")&&q({data:e,param:"nol_davState",val:"2"}),"daypart"===q({data:e,param:"nol_cadence"})?ke(e,{save:!0},a||null,n):e.isProductOf(["mtvrsubminute"])&&!e.delayedPingForFdata&&""!==e.get("nol_eventDataDTVR")&&"2"===q({data:e,param:"nol_davState"})?(t.PLSUB&&!1===t.PLSUB.lastEventIsFlush(e)&&t._listeners.fireEvent("processSubminuteFlush",{flush:"1",passedFdata:e}),!0===at(e)&&ke(e,null,a||null,n,!0)):e.isProductOf(["mtvr","mtvrsubminute"])&&!0===at(e)?ke(e,null,a||null,!0):!1===e.isProductOf(["mtvr","mtvrsubminute"])&&ke(e,null,a||null,n),e.isProductOf(["mtvr","id3","mtvrsubminute"])?q({data:e,param:"nolPriv_enableDtvr",val:"true"}):Ve(e),q({data:e,param:"nol_disabled",val:"true"}))}function nt(a,n){var r=n.id||n.getId?n.getId():"0",i=h[r].nol_tagMap.nol_url,o,s,d,l=0,c=i?i[a.nol_url]||a.nol_url||"":a.nol_url||"",u={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},p={ad:{},content:{},static:{},count:{content:0,static:0}},v={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:e.location.href,nol_sendTime:"0",nol_pageURL:e.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:e.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_random:Math.round(1e9*Math.random()),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0",nol_viVersion:"",nol_omidsdkVersion:""},m=a;m.nol_playerId=r;var f=this,g={_dataArrObj:p,_settings:m,_currVidType:"ad",_currAssetid:"0",serviceFlag:u};for(d in J.extendfData(g),this.name=g.get("nol_comment"),this.playerId=r,t.PLSUB&&g.isProductOf(["mtvrsubminute"])&&!1===t.PLSUB.subminPlayerInitialized(g)&&t.PLSUB.initTag(g,function(){console.log("plsub initialized at tag level",g.get("nol_comment"))}),this.resetViewability=function(e,t){f&&f.viewability&&f.viewability.initialized&&f.viewability.initialized()&&f.viewability.clear(e,t)},this.startViewability=function(e){f&&f.viewability&&f.viewability.initialized&&f.viewability.initialized()&&"function"==typeof f.viewability.start&&f.viewability.start(e)},this.stopViewability=function(){f&&f.viewability&&f.viewability.initialized&&f.viewability.initialized()&&"function"==typeof f.viewability.stop&&f.viewability.stop()},this.tickViewability=function(e,t,a){f&&f.viewability&&f.viewability.initialized&&f.viewability.initialized()?f.viewability.tick(t,e,function(){f.viewability.setData(e),a&&a()}):a&&a()},t._listeners.addListener("tick",function(){if(n.pauseObj.eventPauseTime>=n.pauseObj.cmsPauseTime&&J.state.status.current(g)!==J.states.stopped&&J.state.status.current(g)!==J.states.paused&&K.isEnabled(g)){var e={event:W.events.pause,curPos:J.state.position.current(g),prevPos:null,timestamp:J.state.timeStamp.current(g)};J.state.set(g,e),K.preProcess(g,e),n.pauseObj.eventPauseTime=0}n.pauseObj.pauseTime>n.pauseObj.maxPauseTime&&"dcrstatic"!==q({data:g,param:"nol_product"})&&"vrivideo"!==q({data:g,param:"nol_product"})&&(n.pauseObj.pauseTime=0,t._listeners.fireEvent("handleSessionReset",{plid:r,passedFdata:g}),t._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),je({data:g},f),v)a.hasOwnProperty(d)?m[d]=a[d]:m[d]=h[r][d]||v[d];if(m.nol_customExtension&&c){for(o=0,s=m.nol_customExtension.length;o<s;o++)c=c.replace("|!["+m.nol_customExtension[o]+"]!|",h[r][m.nol_customExtension[o]]||"");m.nol_url=c}if(t.PLVBL&&g.get("nol_vizuURL")&&("interval"===g.get("nol_cadence")||"streamduration"===g.get("nol_cadence"))&&(this.viewability=new t.PLVBL(g,n)),"true"!==q({data:g,param:"nol_fireStop"})&&-1==="interval,episode,streamduration".indexOf(q({data:g,param:"nol_cadence"}))||tt("pagehide||beforeunload",function(){L&&(e.clearInterval(L),L=0,ye({serverTimeOffset:q({data:g,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:q({data:g,param:"nol_rfrmsk"}),uoo:q({data:g,param:"nol_useroptout"}),method:J.getRequestMethod(g),prod:q({data:g,param:"nol_product"})})),"sendBeacon"in navigator&&(N=!0),q({data:g,param:"nol_forceFireOnClose_content",val:"1"});var t=J.getEventsFilter(g);"episode"!==g.get("nol_cadence")&&t&&t.onEndDetected&&(ge(g,t.onEndDetected,null,"ad"),ge(g,t.onEndDetected,null,"content"),ge(g,t.onEndDetected,null,"static")),K.setNextTick(g,null,"content"),xe(g,!1,!0,"onbeforeunload")}),this.eventListener=function(e){Ze(g,e,f)},h[r].eventQueue.length>l)for(o=0;o<h[r].eventQueue.length;o++)h[r]&&h[r].eventQueue&&(h[r].eventQueue[o].timeStamp="queued"+o),Ze(g,h[r].eventQueue[o]),l=o;t._listeners.addListener("sendError",function(e){if(!e.target||r===e.target.id){var a=e.target.id+"_"+e.target.timeStamp;U[a]||(t._listeners.fireEvent("error",{type:"error",msg:e.target.data?e.target.data.msg:""}),U[a]=we(g,e.target.data,!0,!0))}})}var N=(N=N||!1)||!1,t=(t=t||{})||{},J=(J=J||{})||{},oe=oe||function(){},x=x||function(){},ke=(ke=ke||function(){})||function(){},ge=ge||function(){},q=(q=q||function(){})||function(){};function rt(e){var t,a=[];for(t=0;t<oe(e,"num");t++)a.push({tsv:0,save:!1,updated:!1});return a}function it(e,t){var a=e||6;return Math.ceil(t/a)*a||"0"}function fe(e,t,a){var n=!1,r=0,i=!1,o=oe(q({data:e,param:"nol_unQualSegmentValue"}),"num"),s=q({data:e,param:"nol_minutes"}),d=[],l=!!t&&t.save,c,u,p,v=oe(q({data:e,param:"nol_segmentTimeSpent"}),"num"),m=oe(q({data:e,param:"nol_sendQual"}),"num"),f=q({data:e,param:"nol_cadence"});for(c=0,u=s.length;c<u;c++)(p=Math.floor(s[c].tsv/q({data:e,param:"nol_creditValue"})))>=1?(s[c].save&&"daypart"!==q({data:e,param:"nol_cadence"})?d.push(0):(d.push(q({data:e,param:"nol_creditFlag"})),r++,n=!0),i=!0):(d.push(0),i=!1),!0!==a&&(l?s[c].save=i:(s[c].tsv=0,s[c].save=!1,s[c].updated=!1));return m&&(n=r>=m),!0===oe(q({data:e,param:"nol_minWonOverride"}),"bool")&&(n=!0),!0===a?n:(q({data:e,param:"nol_duration",val:d.join("")}),n||"interval"!==f&&"streamduration"!==f||l||("S"===q({data:e,param:"nol_segmentPrefix"})&&o&&q({data:e,param:"nol_duration",val:it(o,v)}),n=v>1),n)}function Se(e){return void 0!==e?(x()/1e3>>0)+e:x()/1e3>>0}function Pe(t){Number(t)===t&&t%1!=0&&e.console&&e.console.warn&&e.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function Ne(e,a){try{if("1"===q({data:e,param:"nol_unifiedEnabled"})){var n=a&&a.hasOwnProperty("vidType")?a.vidType:e._currVidType.toLowerCase(),r=oe(q({data:e,param:"nol_viewCount_"+n}),"num");q({data:e,param:"nol_viewCount_"+n,val:r++}),"1"===q({data:e,param:"nol_applyViewInc"})&&q({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function Ve(e){try{if(void 0===e)return;var a=rt(q({data:e,param:"nol_segmentLength"}));q({data:e,param:"nol_minutes",val:a}),q({data:e,param:"nol_duration",val:new Array(a.length+1).join("0")})}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function ot(e,t){var a=oe(q({data:e,param:"nol_segmentLength"}),"num")*oe(q({data:e,param:"nol_segmentValue"}),"num"),n;return{segmentEnd:0===Math.floor(t%a),segment:Math.floor(t/a+1),minute:Math.floor(t%a/q({data:e,param:"nol_segmentValue"})),seconds:t%q({data:e,param:"nol_segmentValue"})}}function Ue(e,a,n){var r,i=q({data:a,param:"nol_tagSrc"}),e=""!==e?e:"id3"===i&&q({data:a,param:"nol_fdcid"})!==q({data:a,param:"nol_cidNull"})?q({data:a,param:"nol_fdoffset"}):"id3"===i&&q({data:a,param:"nol_pccid"})!==q({data:a,param:"nol_cidNull"})?q({data:a,param:"nol_pcoffset"}):e,o=J.getEventsFilter(a),s=q({data:a,param:"nol_minutes"}),d=oe(q({data:a,param:"nol_pingCount"}),"num"),l,c,u,p,v,m,f,g,_=q({data:a,param:"nol_playerId"}),y=t._players&&t._players.hasOwnProperty(_)?t._players[_]:-1,h=q({data:a,param:"nol_localDay"}),P=q({data:a,param:"nol_dayQhr"}),S=q({data:a,param:"nol_weekQhr"}),b,T,C,L=q({data:a,param:"nol_wmDay"}),O=q({data:a,param:"nol_wmDayQhr"}),E,w,F=oe(q({data:a,param:"nol_weekEndUTC"}),"num"),k,D=F-oe(q({data:a,param:"nol_weekStartUTC"}),"num"),I,A=oe(q({data:a,param:"nolPriv_serverTimeOffset"}),"num"),M,R=q({data:a,param:"nol_timer"})||"nol_fdoffset",B=oe(q({data:a,param:"nolPriv_currMin"}),"num"),N=oe(q({data:a,param:"nol_maxPingCount"}),"num"),V=oe(q({data:a,param:"nol_creditValue"}),"num"),G=oe(e,"num"),U=oe(q({data:a,param:"nol_intrvlThrshld"}),"num")||86400,j="nol_cmsoffset"===R||"nol_pageoffset"===R?oe(q({data:a,param:"nol_cmsIntrvlGp"}),"num")||2:oe(q({data:a,param:"nol_id3IntrvlGp"}),"num"),z=oe(q({data:a,param:"nol_segmentLength"}),"num")*oe(q({data:a,param:"nol_segmentValue"}),"num"),H=oe(q({data:a,param:"nol_currSeg"}),"num"),W=oe(q({data:a,param:"nolPriv_now"}),"num"),K,Q,Y=q({data:a,param:"nol_timeSpentViewing"})[a._currVidType],X=a.get("nolPriv_currPos"),$=""===X,Z=!1,ee=!1;if(a.set("nolPriv_prevPos",oe(q({data:a,param:"nol_currPos"}),"num")),1===e?a.set("nol_currPos","0"):a.set("nol_currPos",e),"modcadence"===a.get("nol_cadence"))e%a.get("nol_segmentValue")==0&&(e<a.get("nol_length")||!a.get("nol_length"))&&ke(a,null,n&&n.onPingFired?n.onPingFired:null);else{if(E=Math.floor(G/86400)+1,L||q({data:a,param:"nol_wmDay",val:E}),w=Math.floor(G%86400/900)+1,O||q({data:a,param:"nol_wmDayQhr",val:w}),G>86400&&"nol_cmsoffset"===R?m=(g=(G+=A)+oe(q({data:a,param:"nol_startDayTimeOffset"}),"num"))+oe(q({data:a,param:"nol_GMTOffset"}),"num"):g=m=G,b=Math.floor(m/86400)+1,h&&h!=b&&(ke(a,null,n&&n.onPingFired?n.onPingFired:null),h=null),h||q({data:a,param:"nol_localDay",val:b}),G>F&&(o.onWeekEndUTC?ge(a,o.onWeekEndUTC):(q({data:a,param:"nol_week",val:q({data:a,param:"nol_nextWeek"})}),q({data:a,param:"nol_period",val:q({data:a,param:"nol_nextPeriod"})}),q({data:a,param:"nol_weekStartUTC",val:F+1}),q({data:a,param:"nol_weekEndUTC",val:F+1+D}))),T=Math.floor((G-oe(q({data:a,param:"nol_weekStartUTC"}),"num"))/900)+1,S&&T===S||q({data:a,param:"nol_weekQhr",val:T}),"nol_cmsoffset"===R&&(G=m%86400),C=Math.floor(G/900)+1,P||q({data:a,param:"nol_dayQhr",val:C}),G=Math.floor(G),"1"===q({data:a,param:"nol_applyViewInc"})&&(Ne(a),q({data:a,param:"nol_applyViewInc",val:"0"})),"true"===q({data:a,param:"nol_disabled"})||void 0===G||N>0&&N<=d&&"daypart"!==q({data:a,param:"nol_cadence"}))return;if("stream"!==q({data:a,param:"nol_cadence"})&&"impression"!==q({data:a,param:"nol_cadence"})){X=$?G:oe(X,"num"),W||(W=x()),M=Math.ceil((x()-W)/1e3)||1,K=ot(a,a.isProductOf(["mtvr","id3","dcrvideo","mtvrsubminute"])?X:G),Q=ot(a,G),r=K.segment,I=K.minute,l=K.seconds,Z=G-X<0,v=a.isProductOf(["mtvr","mtvrsubminute"])?G-X:$&&0!==X||Z?1:G-X;var te=($||Z)&&(H!==r||a.isProductOf(["mtvrsubminute"])&&Q.segment!==r);if(q({data:a,param:"nolPriv_currPos",val:G}),Z&&n&&n.onRewind&&"function"==typeof n.onRewind&&n.onRewind(a),(H&&void 0!==r&&H!==r&&"dcrvideo"===a.get("nol_product")&&a.get("nol_segmentTimeSpent")>0||H&&void 0!==r&&(!a.isProductOf(["mtvr","id3","mtvrsubminute"])&&te||a.isProductOf(["mtvr","id3","mtvrsubminute"])&&(H!==r||Z&&a.get("nol_segmentTimeSpent")>a.get("nol_segmentValue")&&"daypart"!==q({data:a,param:"nol_cadence"})))||a.isProductOf(["mtvrsubminute"])&&Z&&"interval"===q({data:a,param:"nol_cadence"}))&&(("dcrvideo"!==q({data:a,param:"nol_product"})||"dcrvideo"===q({data:a,param:"nol_product"})&&q({data:a,param:"nol_segmentTimeSpent"})>0)&&(!1===a.isProductOf(["mtvrsubminute"])?ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null):!0===a.isProductOf(["mtvrsubminute"])&&a.get("nol_segmentTimeSpent")>0?(a.set("nol_subminSegmentScrub","1"),ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null,!0)):a.isProductOf(["mtvrsubminute"])&&Z&&"interval"===q({data:a,param:"nol_cadence"})&&ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null)),"episode"!==q({data:a,param:"nol_cadence"})&&q({data:a,param:"nol_pingCount",val:0}),s=rt(q({data:a,param:"nol_segmentLength"})),!0===a.isProductOf(["mtvrsubminute"])&&(Y.nol_cumeTimeSpent=0,Y.nol_segmentTimeSpent=0),q({data:a,param:"nol_minutes",val:s}),P&&P!==C&&(q({data:a,param:"nol_dayQhr",val:C}),q({data:a,param:"nol_weekQhr",val:T}),h&&h!==b&&q({data:a,param:"nol_localDay",val:b})),O&&O!==w&&q({data:a,param:"nol_wmDayQhr",val:w}),L&&L!==E&&q({data:a,param:"nol_wmDay",val:E})),H=r,void 0!==I&&v>0){if(B===I||K.segmentEnd||s[I].save||"daypart"===q({data:a,param:"nol_cadence"})||(s[I].tsv>=V?ke(a,null,n&&n.onPingFired?n.onPingFired:null):(s[I].tsv=0,s[I].updated=!1)),v<j||v<=Math.ceil(1.5*M)&&v<U){var ae=function e(){for(c=0;c<v;c+=1){if(a.isProductOf(["mtvrsubminute"])&&(l+c+1)%q({data:a,param:"nol_segmentValue"})!=0||a.isProductOf(["mtvr","id3"])&&(l+c)%q({data:a,param:"nol_segmentValue"})!=0||!a.isProductOf(["mtvr","id3","mtvrsubminute"])&&0!==l){if("daypart"!==q({data:a,param:"nol_cadence"})&&s[I].tsv>=q({data:a,param:"nol_segmentValue"})&&(s[I].save?(s[I].tsv=0,s[I].save=!1,s[I].updated=!1):a.isProductOf(["dcrstatic"])||ke(a,null,n&&n.onPingFired?n.onPingFired:null)),s[I].tsv+=1,Y.nol_cumeTimeSpent=Y.nol_cumeTimeSpent+1,Y.nol_segmentTimeSpent=Y.nol_segmentTimeSpent+1,s[I].tsv>=V&&f){for(s[I].updated||(q({data:a,param:"nolPriv_priority",val:x()}),s[I].updated=!0),u=0,p=0;u<s.length;u+=1)if((p+=s[u].tsv>=V?1:0)>=f){f="send";break}"send"===f&&oe(q({data:a,param:"nol_sendQual"}),"num")&&(o.onViewWon&&ge(a,o.onViewWon),a.isProductOf(["dcrstatic"])||ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),f=0,"daypart"!==q({data:a,param:"nol_cadence"})&&q({data:a,param:"nol_sendQual",val:"0"}))}}else{var t=!1;0!==c&&(I+=1),a.isProductOf("mtvrsubminute")&&H!==Q.segment||s.length<=I?(a.isProductOf("mtvrsubminute")&&(Y.nol_cumeTimeSpent=Y.nol_cumeTimeSpent+1,Y.nol_segmentTimeSpent=Y.nol_segmentTimeSpent+1,t=!0),ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),I=0,q({data:a,param:"nol_currSeg",val:H+=1}),q({data:a,param:"nol_pingCount",val:0}),s=rt(q({data:a,param:"nol_segmentLength"})),q({data:a,param:"nol_minutes",val:s}),P&&P!==C&&(q({data:a,param:"nol_dayQhr",val:C}),q({data:a,param:"nol_weekQhr",val:T}),h&&h!==b&&q({data:a,param:"nol_localDay",val:b})),O&&O!==w&&q({data:a,param:"nol_wmDayQhr",val:w}),L&&L!==E&&q({data:a,param:"nol_wmDay",val:E})):"daypart"!==q({data:a,param:"nol_cadence"})&&!s[I].save&&s[I].tsv>=V&&(!K.segmentEnd||a.isProductOf(["mtvr","id3","mtvrsubminute"]))?ke(a,null,n&&n.onPingFired?n.onPingFired:null):s[I].save||K&&K.segmentEnd&&a.isProductOf(["dcrvideo"])||(s[I].tsv=1,s[I].updated=!1),!1===t&&(Y.nol_cumeTimeSpent=Y.nol_cumeTimeSpent+1,Y.nol_segmentTimeSpent=Y.nol_segmentTimeSpent+1)}a.set("nolPriv_currMin",I),n&&n.onTick&&n.onTick(G-(v-c)+1,Y.nol_cumeTimeSpent)}};f=oe(q({data:a,param:"nol_sendQual"}),"num"),n&&n.onCalcStart&&"function"==typeof n.onCalcStart?n.onCalcStart(G,ae):ae()}else{if(a.isProductOf(["mtvr","id3","mtvrsubminute"])){var ne,re=a.get("nol_id3Raw").split("/"),ie=re[1],se=re[2];if("FD_"===q({data:a,param:"nol_cidPrefix"})&&se===q({data:a,param:"nol_cidNull"})||"PC_"===q({data:a,param:"nol_cidPrefix"})&&ie===q({data:a,param:"nol_cidNull"}))return}a.isProductOf("dcrvideo")&&(Y.nol_cumeTimeSpent=Y.nol_cumeTimeSpent+1,Y.nol_segmentTimeSpent=Y.nol_segmentTimeSpent+1),(ee=!0)&&n&&n.onFastForward&&"function"==typeof n.onFastForward&&n.onFastForward(a,function(){a.isProductOf(["mtvrsubminute"])&&K&&Q&&K.segment&&Q.segment&&K.segment!==Q.segment&&q({data:a,param:"nol_segmentTimeSpent"})>1&&ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null)})}a.isProductOf(["mtvr","id3","mtvrsubminute"])||!K||!K.segmentEnd||$||ee||Z||(("dcrvideo"!==q({data:a,param:"nol_product"})||"dcrvideo"===q({data:a,param:"nol_product"})&&q({data:a,param:"nol_segmentTimeSpent"})>1)&&ke(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),"episode"!==q({data:a,param:"nol_cadence"})&&q({data:a,param:"nol_pingCount",val:0}),s=rt(q({data:a,param:"nol_segmentLength"})),q({data:a,param:"nol_minutes",val:s}),P&&P!==C&&(q({data:a,param:"nol_dayQhr",val:C}),q({data:a,param:"nol_weekQhr",val:T}),h&&h!==b&&q({data:a,param:"nol_localDay",val:b})),O&&O!==w&&q({data:a,param:"nol_wmDayQhr",val:w}),L&&L!==E&&q({data:a,param:"nol_wmDay",val:E})),q({data:a,param:"nolPriv_now",val:x()}),-1!==y&&"dcrstatic"!==q({data:a,param:"nol_product"})&&(y.pauseObj.pauseTime=0)}}else r=Math.floor(G/z+1),"content"===q({data:a,param:"nol_ac"})&&q({data:a,param:"nol_currSeg",val:H=r}),!1===a.isProductOf(["mtvr","id3","mtvrsubminute"])||!0===a.isProductOf(["mtvr","id3","mtvrsubminute"])&&"impression"!==q({data:a,param:"nol_cadence"})||!0===a.isProductOf(["mtvr","id3","mtvrsubminute"])&&"impression"===q({data:a,param:"nol_cadence"})&&("PC_"===q({data:a,param:"nol_cidPrefix"})&&q({data:a,param:"nol_cidNull"})!==q({data:a,param:"nol_pccid"})||"FD_"===q({data:a,param:"nol_cidPrefix"})&&q({data:a,param:"nol_cidNull"})!==q({data:a,param:"nol_fdcid"}))?ke(a,null,n&&n.onPingFired?n.onPingFired:null):n&&n.onPingFired&&n.onPingFired(a);q({data:a,param:"nol_currSeg",val:H})}}function st(e){return{tags:[],eventQueue:e&&e.eventQueue?e.eventQueue:[],tagSize:1,bReInit:!1,debug:F,eventQueueIndex:0}}function me(){var e=Array.prototype.slice.call(arguments);t._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function be(e){return encodeURIComponent(e).replace("'","%27")}function ye(e){var t=0===l.indexOf("https")?"https":"http",a,n,r,i=e.url,o=e.hasOwnProperty("maskRef")?e.maskRef:-1,s=e.method||"GET",d=e.prod||"";if("__sendIt"!==i&&"https"===t&&-1===i.indexOf("https")&&(i=t+i.substr(i.indexOf("://"))),e.prod&&"ocr"===e.prod&&-1!==i.indexOf("&ty=js"))H(i);else if(L||"__sendIt"===i)if(i&&L&&E)w.push(i);else if("__sendIt"!==i||E)i&&L&&!E&&C.push(i);else{for(E=!0,a=0,n=C.length;a<n;a+=1)G.setup({pingSendTime:Se(e.serverTimeOffset),url:C.shift(),uoo:e.uoo,maskRefUrl:o,method:s,product:e.prod});C=C.concat(w),E=!1,w=[]}else G.setup({pingSendTime:Se(e.serverTimeOffset),url:i,uoo:e.uoo,maskRefUrl:o,method:s,product:d})}function _e(e){var t=!1}function dt(e){var a;if(h[e.id]&&h[e.id].tags.length===h[e.id].tagSize){if(t._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e),evtType:e.evtInfo.eventType}),h[e.id].debug!==F&&"logging"===h[e.id].debug){if((a=h[e.id].nol_debugUrl)||(a=h[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),h[e.id].eventQueue.length>h[e.id].eventQueueIndex+1)for(var n=h[e.id].eventQueueIndex;n<h[e.id].eventQueue.length;n++)_e(a+"pli="+e.id+"&ggpm="+JSON.stringify(h[e.id].eventQueue[n])),h[e.id].eventQueueIndex=n;a+="pli="+e.id+"&ggpm="+JSON.stringify(e),_e(a)}e.timeStamp=x();for(var n=0,r=h[e.id].tags.length;n<r;n+=1)h.hasOwnProperty(e.id)&&h[e.id].tags[n].eventListener(e)}else h[e.id]&&h[e.id].eventQueue||(h[e.id]=st(h[e.id])),h[e.id].eventQueue.push(e);R.dtvr&&R.dtvr.postQueueGgpm&&R.dtvr.postQueueGgpm()}function Ge(e,t){var a,n=e.data._settings,r=e.param;return null==t?void 0===(a=n.hasOwnProperty(r)&&h[n.nol_playerId].nol_tagMap.hasOwnProperty(r)&&("object"===_typeof(h[n.nol_playerId].nol_tagMap[r])||"array"==typeof h[n.nol_playerId].nol_tagMap[r])?h[n.nol_playerId].nol_tagMap[r][n[r]]:n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]:h[n.nol_playerId].nol_tagMap.nol_defaults[r]||h[n.nol_playerId][r])&&(a=n.hasOwnProperty(r)?n[r]:h[n.nol_playerId].nol_tagMap[r]):n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]=t:n[r]=t,a}function q(a){try{if(a){var n=[];if("string"==typeof a.param){a.param=a.param.trim(),n=a.param.split("_");var r=a.param.indexOf("nol_");if(-1===r&&-1===a.param.indexOf("nolPriv_")&&!n.length)return}else n=a.param;var i="";if(Array.isArray(n)&&n.length>2&&r>-1&&("content"===n[n.length-1]||"ad"===n[n.length-1]||"static"===n[n.length-1])){i=n.splice(0,n.length-1).join("_");var o=n[0];"ad"!==o&&"content"!==o||(a.vidType=o)}else i=a.param;var s=a.vidType||a.data._currVidType,d=a.data._currAssetid?String(a.data._currAssetid):"0",l=void 0!==a.data._dataArrObj[s][d]?a.data._dataArrObj[s][d]:a.data._dataArrObj[s][Object.keys(a.data._dataArrObj[s]).splice(-1,1)],c=I[a.data._settings.nol_playerId]||{},u=c&&c[i]?c[i].clientField:i,p="";if("object"===(void 0===u?"undefined":_typeof(u)))p=l;else if("nol_segmentTimeSpent"===u||"nol_cumeTimeSpent"===u||"nol_count"===u){var v;p=q({data:a.data,param:"nol_timeSpentViewing"})[s][u]}else void 0===a.val||null===a.val?void 0!==(p=l&&l.hasOwnProperty(u)?l[u]:h[a.data._settings.nol_playerId][u])&&""!==p||void 0!==(p=Ge(a)||"")&&""!==p||(0===u.indexOf("nol_")?a.param=u:a.param=i,p=Ge(a)||""):l&&(l[u]=a.val);return p}return null}catch(a){e.console&&e.console.error&&e.console.error("Error in Data(): "+a.message+" params: "+n),t._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+a.message})}}function lt(a){a&&a.hasOwnProperty("configReq")&&a.hasOwnProperty("player")&&a.configReq.length>0&&void 0!==a.player?(H(a.configReq),e.clearInterval(a.player.lsPopulatedInterval),a.player.lsPopulatedInterval=0):t._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}function ct(e,t){return t?(t._dataArrObj||(t={_dataArrObj:{content:{0:t}},_settings:t,_currVidType:"content"}),J.extendfData(t),se(t,e,null,{vidType:"content",silent:!0,noClone:!0})):e}return a.initFromConfig=function(a,r,i){t._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(a&&a.nol_GLOBALS){var o,d,l=x(),c,u,p,v,m="localhost",f=a.nol_GLOBALS.debugSfcode||"uat-cert",g=a.nol_GLOBALS.nol_appid||"",y=a.nol_GLOBALS.nol_lsid||"",S=a.nol_GLOBALS.nol_emmURL||(a.nol_GLOBALS.nol_tagMap&&a.nol_GLOBALS.nol_tagMap.nol_defaults?a.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",C=a.nol_GLOBALS.enableStaticInIframe&&"true"===a.nol_GLOBALS.enableStaticInIframe.toString().toLowerCase(),O,E,w,F,k,D,R,B;if(C&&t.browser.isWithinIFrame()&&t.PLDCR.removeListeners(),t&&t.PLDCR&&(t.PLDCR.nol_idleTimeout=parseInt(a.nol_GLOBALS.nol_idleTimeout)||1800),i&&(t.optoutCookie&&"TOTAL"===t.optoutCookie&&"OPTOUT"!==t.localStorageId&&(y="OPTOUT",t._listeners.fireEvent("debug",{type:"debug",msg:'Optout cookie was set but lsid was "'+t.localStorageId+'". Setting lsid to OPTOUT'})),""===y&&("-1"===t.localStorageId?y="999":""===t.localStorageId?y=t.generateGUID():t.localStorageId&&(y=t.localStorageId))),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+t.localStorageId+"; config lsid: "+y}),t._listeners.fireEvent("sendOptOutStatus","OPTOUT"==y),void 0!==a.nol_GLOBALS.nol_maxRetry&&null!==a.nol_GLOBALS.nol_maxRetry&&""!==a.nol_GLOBALS.nol_maxRetry){var N=parseInt(a.nol_GLOBALS.nol_maxRetry);N>-1&&(b=N)}if(a&&a.hasOwnProperty("nol_GLOBALS")){var G=r||a.nol_GLOBALS.nol_playerId||0;if(!(d=t._players[G]))return;for(c in m=a.nol_GLOBALS.nol_sfcode||m,t._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+d.name+'" initialized with globals '+JSON.stringify(d.getConfigParams().ggParams)}),d.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(a.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(a.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},d.staticIFrameFlag=C,i&&(a.nol_GLOBALS.nol_serverTime=x()/1e3>>0),(B=t.localStorage?h[G]?h[G].nol_serverTime||t.localStorage.getItem("nol_serverTime"):t.localStorage.getItem("nol_serverTime")||0:h[G]?h[G].nol_serverTime:0)===a.nol_GLOBALS.nol_serverTime?P=h[G]?h[G].nolPriv_serverTimeOffset:a.nol_GLOBALS.nol_serverTime-Math.round(l/1e3):(P=a.nol_GLOBALS.nol_serverTime-Math.round(l/1e3),t.localStorage&&t.localStorage.setItem("nol_serverTime",a.nol_GLOBALS.nol_serverTime)),T=a.nol_GLOBALS.nol_errorWait||T,o=d.getConfigParams().ggParams||{},h[G]=st(h[G]),h[G].nolPriv_serverTimeOffset=P,h&&h.hasOwnProperty(G)?h[G].nol_nielsenAdSupportFlg=0:t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),L&&(e.clearInterval(L),L=0),a.nol_GLOBALS.nol_sendTimer&&(L=e.setInterval(function(){ye({serverTimeOffset:h[G].nolPriv_serverTimeOffset,url:"__sendIt",uoo:q({data:fData,param:"nol_useroptout"}),method:h[G].nol_requestMethod})},1e3*a.nol_GLOBALS.nol_sendTimer)),o)o.hasOwnProperty(c)&&(h[G][c]=o[c]);for(c in a.nol_GLOBALS)a.nol_GLOBALS.hasOwnProperty(c)&&(h[G][c]=a.nol_GLOBALS[c]);for(c in A[G]=h[G].nol_eventFilter||{},M[G]=h[G].nol_serviceFilter||{},V=h[G].nol_id3Map||{},I[G]=I[G]||{},h[G].nol_clientCMSmap)h[G].nol_clientCMSmap.hasOwnProperty(c)&&(w=(E=h[G].nol_clientCMSmap[c].toString()||"").replace(_,""),k=E.match(_)||[],F={clientField:w.toString(),encoding:k.join("")},I[G][c]=F);if(o&&o.hasOwnProperty("nol_override")&&Object.keys(o.nol_override).length>0)for(c in o.nol_override)o.nol_override[c].length>0&&(h[G][c]=o.nol_override[c]);a.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&n.hasOwnProperty("setTotalNumAssetsAllowed")&&n.setTotalNumAssetsAllowed(a.nol_GLOBALS.nol_maxStaticInstances),d.configLoaded=!0,i&&(h[G].nol_prefProtocol=t.getPrefProtocol(a),h[G].nol_playerId=G,h[G].nol_nuid=y,h[G].nol_lsid=y,h[G].nol_bldv=s,h[G].nol_sdkv=d.sdkvForConfig,h[G].nol_assetName=a.nol_GLOBALS.hasOwnProperty("nol_assetName")&&a.nol_GLOBALS.nol_assetName.length>0?a.nol_GLOBALS.nol_assetName:"defChnAsset",h[G].nol_sfcode=o.sfcode,h[G].nol_dcrsfcode=o.sfcode,h[G].nol_apn=o.apn||(a.nol_GLOBALS.hasOwnProperty("nol_apn")&&a.nol_GLOBALS.nol_apn.length>0?a.nol_GLOBALS.nol_apn:""),h[G].nol_nmspc="NOLBUNDLE"),h[G].nol_lstrg="",h[G].nol_userSessionId=d.sessionId,h[G].nol_pageURLmeta=d.metadataCtrl.pageURL,h[G].nol_pageTitle=d.metadataCtrl.pageTitle,!0===d.optout||"true"===h[G].nol_useroptout?h[G].nol_useroptout="true":h[G].nol_useroptout="",t.userAgent.isAndroid()?h[G].nol_vriDeviceTypeId="0003":t.userAgent.isIOS()?h[G].nol_vriDeviceTypeId="0002":h[G].nol_vriDeviceTypeId="0001",t.userAgent.isIpadOS()&&(h[G].nol_devGroup="TAB",h[G].nol_platform="MBL",h[G].nol_osGroup="IOS",h[G].nol_phtype="Tablet",h[G].nol_dvcnm="Apple iPad"),y&&"999"!==y&&!t.userAgent.isFB()&&(h[G].nol_lstrg="lstrg-"+y),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+t.EMMURL+"; config emm: "+S}),S=t.evalTemplate(S,h[G]),h[G].nol_emmURL=S;var U=a.nol_GLOBALS.hasOwnProperty("nol_emmsfcodelist")?a.nol_GLOBALS.nol_emmsfcodelist:[];t.setLsId(y,S,d,U)}if(a&&a.hasOwnProperty("nol_TAGS"))for(h[G].tagSize=a.nol_TAGS.length,h[G].tags=[],t._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),c=0;c<h[G].tagSize;c+=1)t._listeners.fireEvent("debug",{type:"debug",msg:String(a.nol_TAGS[c].nol_comment)}),h[G].tags.push(new nt(JSON.parse(JSON.stringify(a.nol_TAGS[c])),d));void 0!==t.enablePlayer&&t.enablePlayer(G,"PLDPR"),h[G].bReInit=!1,o.nol_hybridCfg&&e&&e.JSON&&((O=e.document.createElement("script")).text="(function() {if (typeof "+o.nol_hybridCfg+" === 'function'){"+o.nol_hybridCfg+"('"+JSON.stringify(a)+"')}}())",e.document.head?(e.document.head.appendChild(O),e.document.head.removeChild(O)):(e.document.getElementsByTagName("head")[0].appendChild(O),e.document.getElementsByTagName("head")[0].removeChild(O))),h[G].forceStreamRegen=!1;var j=t.getSdkvGlobal(h[G].nsdkvOverride,"CADENCEOVERRIDE");h[G].hasOwnProperty("nsdkvOverride")&&j&&(h[G].nol_cadenceOverride||(h[G].nol_cadenceOverride=j),h[G].nol_cadenceOverrideEnabled=!0),t._listeners.addListener("tick",function(){d&&d.hasOwnProperty("pauseObj")&&d.pauseObj.hasOwnProperty("pauseTime")&&(!0===d._pauseTimeoutEnabled?d.pauseObj.pauseTime+=1:d.pauseObj.pauseTime=0,d.pauseObj.eventPauseTime+=1)}),d&&d.configLoaded&&e.NOLBUNDLE&&e.NOLBUNDLE.controllers&&e.NOLBUNDLE.controllers.util&&e.NOLBUNDLE.controllers.util.fireCustomEvent&&e.NOLBUNDLE.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:d.name,instance:d}),t._listeners.fireEvent("flushQueue")}else e.console&&e.console.warn&&e.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),t._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."});return h[G]}catch(a){e.console&&e.console.error&&e.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct. "+a.message),t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response. "+a.message})}},a.getCmsMap=function(e){try{if(void 0!==e&&"string"==typeof e||t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),h&&h.hasOwnProperty(e)&&void 0!==h[e].nol_clientCMSmap)return h[e].nol_clientCMSmap}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},a.resolveExpression=ct,a.init=function(a){var n=a.getConfigParams()||{},i,o,u=t.getIfLsidShouldSend()?t.getLsId():void 0,p,m="",f=0===l.indexOf("https")?"https":"http",g=n.nol_playerId||0;for(i in p={pli:{val:g,protect:!0},nmspc:{val:"NOLBUNDLE",protect:!0},sdkv:{val:r,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:v,protect:!0},bldv:{val:s,protect:!0},prefprotocol:{val:f,protect:!1}},a.addListener("ggPM",function(e){dt(e)}),a.lsPopulatedInterval=0,a.lsCurrentRetry=0,a.serviceSending={tsv:!1,stn:!1},a.ottStatusObj={},a.oServiceCall={},a.serviceSentForTSV="",a.static={started:!1},n.ggParams)!n.ggParams.hasOwnProperty(i)||p[i]&&p[i].protect||0==i.indexOf("nol_")||(p[i]={val:be(n.ggParams[i])});for(i in p)p.hasOwnProperty(i)&&(m+=i+"="+p[i].val+"&");m=m.substr(0,m.length-1),o=l.replace(/[\w\W]*?:\/\//g,""),a.useCachedConfig||(void 0===u||a.lsPopulatedInterval?void 0===u&&lt({configReq:D=f+"://"+o+d+c+"?"+m+"&sendTime="+Math.floor(x()/1e3),player:a}):a.lsPopulatedInterval=e.setInterval(function(){"-1"!==(u=t.getLsId())?lt({configReq:D=f+"://"+o+d+c+"?"+m+"&lsid="+u+"&sendTime="+Math.floor(x()/1e3),player:a}):2===a.lsCurrentRetry?lt({configReq:D=f+"://"+o+d+c+"?"+m+"&lsid=999&sendTime="+Math.floor(x()/1e3),player:a}):a.lsCurrentRetry+=1},1e3))},a.built||(a.built=!0,a.BUILDVERSION=s,a.dataObj=h,t.bindPlayers(a,"PLDPR"),t._listeners.fireEvent("flushQueue")),a}),e.NOLBUNDLE.registerLib("PLDCR",function(t){"use strict";var a=t.PLDCR=t.PLDCR||{dcrTimer:void 0,startDcrTime:0,latestDcrTickVal:0,_reset:!1,nol_idleTimeout:1800,nol_maxTickDelta:10,cadenceOverrideEnabled:!1,cadenceOverride:30,safeFocusOn:!1,focusTimer:{intervalID:null,timeElapsed:0,enableTimeout:!1,timeoutStartTime:0}},n="6.0.0",r="1",i=e.NOLBUNDLE,o=t.getBaseBuildVer?t.getBaseBuildVer()+"1":"6.0.01",a,s;function d(t,n){var r={set:function(e,t){return r.init=!0,r.elapsed=0,r.startTimeStamp=0,"function"==typeof e&&(r.funcCall=e),isNaN(t)||(r.intervalTime=t),r},play:function(e){return r.isActive||(e?(r.startTimeStamp=0,r.elapsed=0,r.setTimer()):r.setTimer(r.remaining),r.isActive=!0),r},pause:function(){return r.isActive&&(r.isActive=!1,r.remaining=r.remaining-(Date.now()-r.last),r.clearTimer()),r},stop:function(){return r.isActive=!1,r.remaining=r.intervalTime,r.clearTimer(),r},clearTimer:function(){e.clearTimeout(r.timeoutObject)},setTimer:function(t){var a=r;"function"==typeof r.funcCall&&(isNaN(t)&&(t=r.intervalTime),r.remaining=t,r.last=Date.now(),r.clearTimer(),r.timeoutObject=e.setTimeout(function(){a.tick()},t))},tick:function(){if(r.isActive){var e=r.last;r.remaining<r.intervalTime&&(e-=r.intervalTime-r.remaining),r.setTimer();var t=(r.last-e)/1e3;t<a.nol_maxTickDelta&&t>=0?r.elapsed=r.elapsed+t:r.elapsed++,r.funcCall()}},reset:function(){r.startTimeStamp=0,r.elapsed=0,r.remaining=r.intervalTime}};return r.init?r:(r.set(t,n),r)}function l(){a.dcrTimer&&(a.latestDcrTickVal=a.dcrTimer.elapsed,t._listeners.fireEvent("dcrHeartbeat",a.dcrTimer)),a.focusTimer.enableTimeout&&a.focusTimer.timeElapsed&&(a.focusTimer.enableTimeout=!1)}function c(e){s&&clearTimeout(s),t.globalHasFocus&&!t.globalHasFocus()&&(s=setTimeout(function(){a.safeFocusOn&&a.dcrTimer&&(a.safeFocusOn=!1,t.globalHasFocus&&!t.globalHasFocus()&&(t._listeners.fireEvent("info",{type:"info",msg:"Safe Focus timeout"}),a.dcrTimer.pause(),t.flushEvent(e))),clearTimeout(s)},1e3*a.nol_idleTimeout),!a.safeFocusOn&&a.dcrTimer&&(t._listeners.fireEvent("info",{type:"info",msg:"Safe Focus initiated"}),a.safeFocusOn=!0,a.dcrTimer.play(a._reset),a._reset=!1))}function u(e){t.globalHasFocus&&t.globalHasFocus()?a.focusTimer.intervalID=v():a.dcrTimer&&(a.dcrTimer.pause(),t._listeners.fireEvent("info",{type:"info",msg:"Page onBlur fired and stopping static timer: "+(e?JSON.stringify(e,["type","isTrusted"]):"{}")}))}function p(n){(self===top||self!==top&&t.globalHasFocus&&!t.globalHasFocus())&&(setTimeout(function(){return u(n)},0),a.safeFocusOn&&(a.safeFocusOn=!1)),t.browser.isWithinIFrame()&&e.top.postMessage({action:"bsdk_pause",evt:n.type},e.document.referrer?e.document.referrer:"*")}function v(){if(!a.focusTimer.intervalID&&!t.browser.isWithinIFrame())return setInterval(function(){if(a.dcrTimer&&!a.dcrTimer.isActive&&t.globalHasFocus&&t.globalHasFocus()&&(a.dcrTimer.play(!0),a._reset=!1,t._listeners.fireEvent("info",{type:"info",msg:"Page has focus via focus interval timer. Playing DCR Static timer!"})),a.focusTimer.enableTimeout){var e=Date.now(),n=(e-a.focusTimer.timeoutStartTime)/1e3;a.focusTimer.timeElapsed=a.focusTimer.timeElapsed+n,a.focusTimer.timeElapsed>a.nol_idleTimeout&&(clearInterval(a.focusTimer.intervalID),a.focusTimer.intervalID=null),a.focusTimer.timeoutStartTime=e}},1e3)}function m(e){a.dcrTimer&&(a.dcrTimer.play(a._reset),t._listeners.fireEvent("info",{type:"info",msg:"Page onFocus fired and playing static timer: "+(e?JSON.stringify(e,["type","isTrusted"]):"{}")})),a.focusTimer.intervalID&&(clearInterval(a.focusTimer.intervalID),a.focusTimer.intervalID=null),a._reset=!1}function f(e){c(e)}(i.GLCFG.userAgent.isAndroid()||i.GLCFG.userAgent.isIOS())&&(i.GLCFG.userAgent.isFB()||i.GLCFG.userAgent.isInstagram())&&(t.PLDCR.cadenceOverrideEnabled=!0),(a=a||{}).startDcrTick=function(){},a.latestDcrTick=function(){return a.latestDcrTickVal};var g=!0;function _(e){g?g=!1:c(e)}function y(){a.dcrTimer&&t.globalHasFocus&&t.globalHasFocus()&&(a.dcrTimer.play(a._reset),a._reset=!1)}function h(e){"visible"===document.visibilityState&&(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - VISIBLE"}),setTimeout(function(){return y()},500)),"hidden"===document.visibilityState&&(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - HIDDEN"}),a.dcrTimer&&a.dcrTimer.pause(),a.safeFocusOn&&(a.safeFocusOn=!1))}function P(e){a.dcrTimer&&a.dcrTimer.stop()}return a.start=function(e){var n=!t.globalHasFocus||t.globalHasFocus();a._reset=e,(null===a.dcrTimer||void 0===a.dcrTimer||e)&&(n?(a.dcrTimer=d(l,1e3).play(!0),a._reset=!1):a.dcrTimer=d(l,1e3))},a.stop=function(){a.dcrTimer&&a.dcrTimer.stop()},a.init=function(t){i.browserSafeAddEventListener({element:e,eventType:"blur",func:p,useCapture:!1}),i.browserSafeAddEventListener({element:e,eventType:"focus",func:m,useCapture:!1}),i.browserSafeAddEventListener({element:e,eventType:"touchstart",func:f,useCapture:!1}),i.browserSafeAddEventListener({element:e,eventType:"beforeunload",func:P,useCapture:!1}),i.browserSafeAddEventListener({element:e,eventType:"pagehide",func:P,useCapture:!1}),document.addEventListener&&document.addEventListener("visibilitychange",h)},a.removeListeners=function(){i.browserSafeRemoveEventListener({element:e,eventType:"blur",func:p,useCapture:!1}),i.browserSafeRemoveEventListener({element:e,eventType:"focus",func:m,useCapture:!1}),i.browserSafeRemoveEventListener({element:e,eventType:"touchstart",func:f,useCapture:!1}),i.browserSafeRemoveEventListener({element:e,eventType:"pagehide",func:P,useCapture:!1}),t.browser.removeEventListener({element:e,eventType:"blur",useCapture:!1,func:t.flushEvent}),t.browser.removeEventListener({element:e,eventType:"pagehide",useCapture:!1,func:t.flushEvent}),t.userAgent.isFB()||t.userAgent.isInstagram()||(t.browser.removeEventListener({element:e.document,eventType:t.browser.visibilityEvent,useCapture:!1,func:t.flushEvent}),document.removeEventListener&&document.removeEventListener("visibilitychange",h))},a.safeFocus=c,a.built||(a.built=!0,a.BUILDVERSION=o,t.bindPlayers(a,"PLDCR")),a}),e.NOLBUNDLE.registerLib("PLLOG",function(t){"use strict";var a=t.PLLOG=t.PLLOG||{},n=e.NOLBUNDLE,r="6.0.0",i="0",o=t.getBaseBuildVer?t.getBaseBuildVer()+"0":"6.0.0"+_localBuildVer,s={INFO:{info:c},DEBUG:{info:c,debug:u,warn:v,error:m},WARN:{info:c,warn:v},ERROR:{info:c,error:m},CONSOLE:{info:c},TRUE:{info:c},LOGGER:{logger:p}};function d(e){if(e){var a=String(e).toUpperCase();if(s.hasOwnProperty(a))for(var n in s[a]){var r=String(n).toLowerCase();t._listeners.addListenerSingle(r,s[a][r])}}}function l(e){return e&&e.target&&e.target.hasOwnProperty("msg")?e.target.evtType?e.target.msg+" - ("+Math.floor(Date.now()/1e3)+")":e.target.msg:""}function c(t){e.console&&console.info("Nielsen Log: Info - ",l(t))}function u(t){e.console&&console.log("Nielsen Log: Debug - ",l(t))}function p(t){e.console&&console.log("Nielsen Log: Logger - ",l(t))}function v(t){e.console&&console.warn("Nielsen Log: Warn - ",l(t))}function m(t){e.console&&console.error("Nielsen Log: Error - ",l(t))}return a.init=function(e){if(e&&e.getConfigParams){var t=e.getConfigParams();t.hasOwnProperty("ggParams")&&t.ggParams.hasOwnProperty("nol_sdkDebug")&&d(t.ggParams.nol_sdkDebug)}},a.built||(a.built=!0,a.BUILDVERSION=o,t.bindPlayers(a,"PLLOG")),a})):console&&console.warn&&console.warn("Warning: Your current browser environment does not sufficiently support ECMA5 standards. Nielsen SDK will not be initialized.")}catch(e){n("ERROR: "+e.message)}}(window);