!async function(w,d){"use strict";var version="3.35.0",cs=d.currentScript,loadedFromPrebid=cs&&(cs.src||"").match(/[\/]remote(\.min)?\.js/),params=cs&&cs.src&&URLSearchParams?new URLSearchParams("?"+(cs.src.split("?")[1]||"")):{get:function(){}},windowParams=new URL(window.location.href).searchParams,global=(void 0!==cs&&cs?cs.getAttribute("ns")||params.get("ns")||cs.getAttribute("global")||params.get("global"):d.querySelector('script[id="tnc_core"]')?d.querySelector('script[id="tnc_core"]').getAttribute("global"):null)||(loadedFromPrebid?"__tncPbjs":"__tnc"),bd_url="/bd/pv",tp_modules_path="/modules/%s.js",config_path_tpl="/%s/config.js",isFF="true"==windowParams.get("tncff")||-1!=(navigator.userAgent||"").toLowerCase().indexOf("firefox")||((navigator.userAgentData||{}).brands||[]).some(t=>"firefox"==(t&&t.brand?t.brand:"").toLowerCase()),emitter,reservedEvents=["abortable","added-custom-variable","cacheid-found","data-sent"],FPKeys=["Lu","Wd","Bl","Cd","Dm","Hc","Sh","Sw","Ah","Aw","To","Tz","Ss","Ls","Idb","Ab","Odb","Cc","Pl","Pg","Ca","Wgl","Wvr","Adb","Hll","Hlr","Hlo","Hlb","Ts","Ft","Au"],NOT_AVAILABLE="not available",options=Object.assign({audio:{timeout:1e3,excludeIOS11:!0},componentList:["userAgent","webdriver","language","colorDepth","deviceMemory","hardwareConcurrency","screenResolution","availableScreenResolution","timezoneOffset","timezone","sessionStorage","localStorage","indexedDb","addBehavior","openDatabase","cpuClass","platform","plugins","canvas","webgl","webglVendorAndRenderer","adBlock","hasLiedLanguages","hasLiedResolution","hasLiedOs","hasLiedBrowser","touchSupport","fonts","audio"],exclude:["adBlock","devices","doNotTrack","pixelRatio"]},w.__tnc_options||{}),realParseFloat=function(t){if((t=t.replace(/[\s]+/gim,"")).indexOf(".")>-1&&t.indexOf(",")>-1){let e=t.split(/[\.,]+/gim),i=e.pop();return parseFloat(e.join("")+"."+i)}if(t.indexOf(",")>-1){let e=t.split(/[,]+/gim);return e.length>2?parseFloat(e.join("")):parseFloat(e.join("."))}if(t.indexOf(".")>-1){let e=t.split(/[.]+/gim);return e.length>2?parseFloat(e.join("")):parseFloat(e.join("."))}return parseFloat(t)},each=function(t,e){if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e(t[i],i,t);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)},map=function(t,e){var i=[];return null==t?i:Array.prototype.map&&t.map===Array.prototype.map?t.map(e):(each(t,(function(t,r,n){i.push(e(t,r,n))})),i)},sha1=function(){var t="0123456789abcdef".split(""),e=[-2147483648,8388608,32768,128],i=[24,16,8,0],r=["hex","array","digest","arrayBuffer"],n=[],s=function(t){return function(e){return new o(!0).update(e)[t]()}};function o(t){t?(n[0]=n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0,this.blocks=n):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}return o.prototype.update=function(t){if(!this.finalized){var e="string"!=typeof t;e&&t.constructor===root.ArrayBuffer&&(t=new Uint8Array(t));for(var r,n,s=0,o=t.length||0,a=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(n=this.start;s<o&&n<64;++s)a[n>>2]|=t[s]<<i[3&n++];else for(n=this.start;s<o&&n<64;++s)(r=t.charCodeAt(s))<128?a[n>>2]|=r<<i[3&n++]:r<2048?(a[n>>2]|=(192|r>>6)<<i[3&n++],a[n>>2]|=(128|63&r)<<i[3&n++]):r<55296||r>=57344?(a[n>>2]|=(224|r>>12)<<i[3&n++],a[n>>2]|=(128|r>>6&63)<<i[3&n++],a[n>>2]|=(128|63&r)<<i[3&n++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++s)),a[n>>2]|=(240|r>>18)<<i[3&n++],a[n>>2]|=(128|r>>12&63)<<i[3&n++],a[n>>2]|=(128|r>>6&63)<<i[3&n++],a[n>>2]|=(128|63&r)<<i[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},o.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,i=this.lastByteIndex;t[16]=this.block,t[i>>2]|=e[3&i],this.block=t[16],i>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},o.prototype.hash=function(){var t,e,i=this.h0,r=this.h1,n=this.h2,s=this.h3,o=this.h4,a=this.blocks;for(t=16;t<80;++t)e=a[t-3]^a[t-8]^a[t-14]^a[t-16],a[t]=e<<1|e>>>31;for(t=0;t<20;t+=5)i=(e=(r=(e=(n=(e=(s=(e=(o=(e=i<<5|i>>>27)+(r&n|~r&s)+o+1518500249+a[t]<<0)<<5|o>>>27)+(i&(r=r<<30|r>>>2)|~i&n)+s+1518500249+a[t+1]<<0)<<5|s>>>27)+(o&(i=i<<30|i>>>2)|~o&r)+n+1518500249+a[t+2]<<0)<<5|n>>>27)+(s&(o=o<<30|o>>>2)|~s&i)+r+1518500249+a[t+3]<<0)<<5|r>>>27)+(n&(s=s<<30|s>>>2)|~n&o)+i+1518500249+a[t+4]<<0,n=n<<30|n>>>2;for(;t<40;t+=5)i=(e=(r=(e=(n=(e=(s=(e=(o=(e=i<<5|i>>>27)+(r^n^s)+o+1859775393+a[t]<<0)<<5|o>>>27)+(i^(r=r<<30|r>>>2)^n)+s+1859775393+a[t+1]<<0)<<5|s>>>27)+(o^(i=i<<30|i>>>2)^r)+n+1859775393+a[t+2]<<0)<<5|n>>>27)+(s^(o=o<<30|o>>>2)^i)+r+1859775393+a[t+3]<<0)<<5|r>>>27)+(n^(s=s<<30|s>>>2)^o)+i+1859775393+a[t+4]<<0,n=n<<30|n>>>2;for(;t<60;t+=5)i=(e=(r=(e=(n=(e=(s=(e=(o=(e=i<<5|i>>>27)+(r&n|r&s|n&s)+o-1894007588+a[t]<<0)<<5|o>>>27)+(i&(r=r<<30|r>>>2)|i&n|r&n)+s-1894007588+a[t+1]<<0)<<5|s>>>27)+(o&(i=i<<30|i>>>2)|o&r|i&r)+n-1894007588+a[t+2]<<0)<<5|n>>>27)+(s&(o=o<<30|o>>>2)|s&i|o&i)+r-1894007588+a[t+3]<<0)<<5|r>>>27)+(n&(s=s<<30|s>>>2)|n&o|s&o)+i-1894007588+a[t+4]<<0,n=n<<30|n>>>2;for(;t<80;t+=5)i=(e=(r=(e=(n=(e=(s=(e=(o=(e=i<<5|i>>>27)+(r^n^s)+o-899497514+a[t]<<0)<<5|o>>>27)+(i^(r=r<<30|r>>>2)^n)+s-899497514+a[t+1]<<0)<<5|s>>>27)+(o^(i=i<<30|i>>>2)^r)+n-899497514+a[t+2]<<0)<<5|n>>>27)+(s^(o=o<<30|o>>>2)^i)+r-899497514+a[t+3]<<0)<<5|r>>>27)+(n^(s=s<<30|s>>>2)^o)+i-899497514+a[t+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+r<<0,this.h2=this.h2+n<<0,this.h3=this.h3+s<<0,this.h4=this.h4+o<<0},o.prototype.hex=function(){this.finalize();var e=this.h0,i=this.h1,r=this.h2,n=this.h3,s=this.h4;return t[e>>28&15]+t[e>>24&15]+t[e>>20&15]+t[e>>16&15]+t[e>>12&15]+t[e>>8&15]+t[e>>4&15]+t[15&e]+t[i>>28&15]+t[i>>24&15]+t[i>>20&15]+t[i>>16&15]+t[i>>12&15]+t[i>>8&15]+t[i>>4&15]+t[15&i]+t[r>>28&15]+t[r>>24&15]+t[r>>20&15]+t[r>>16&15]+t[r>>12&15]+t[r>>8&15]+t[r>>4&15]+t[15&r]+t[n>>28&15]+t[n>>24&15]+t[n>>20&15]+t[n>>16&15]+t[n>>12&15]+t[n>>8&15]+t[n>>4&15]+t[15&n]+t[s>>28&15]+t[s>>24&15]+t[s>>20&15]+t[s>>16&15]+t[s>>12&15]+t[s>>8&15]+t[s>>4&15]+t[15&s]},o.prototype.toString=o.prototype.hex,o.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3,n=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n]},o.prototype.array=o.prototype.digest,o.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t},function(){var t=s("hex");t.create=function(){return new o},t.update=function(e){return t.create().update(e)};for(var e=0;e<r.length;++e){var i=r[e];t[i]=s(i)}return t}()}(),sha256=function(){var t="input is invalid type",e="undefined"!=typeof ArrayBuffer,i="0123456789abcdef".split(""),r=[-2147483648,8388608,32768,128],n=[24,16,8,0],s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=["hex","array","digest","arrayBuffer"],a=[];Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),e&&!ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var h=function(t,e){return function(i){return new c(e,!0).update(i)[t]()}};function c(t,e){e?(a[0]=a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0,this.blocks=a):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function d(i,r,n){var s,o=typeof i;if("string"===o){var a,h=[],d=i.length,l=0;for(s=0;s<d;++s)(a=i.charCodeAt(s))<128?h[l++]=a:a<2048?(h[l++]=192|a>>6,h[l++]=128|63&a):a<55296||a>=57344?(h[l++]=224|a>>12,h[l++]=128|a>>6&63,h[l++]=128|63&a):(a=65536+((1023&a)<<10|1023&i.charCodeAt(++s)),h[l++]=240|a>>18,h[l++]=128|a>>12&63,h[l++]=128|a>>6&63,h[l++]=128|63&a);i=h}else{if("object"!==o)throw new Error(t);if(null===i)throw new Error(t);if(e&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!(Array.isArray(i)||e&&ArrayBuffer.isView(i)))throw new Error(t)}i.length>64&&(i=new c(r,!0).update(i).array());var u=[],p=[];for(s=0;s<64;++s){var f=i[s]||0;u[s]=92^f,p[s]=54^f}c.call(this,r,n),this.update(p),this.oKeyPad=u,this.inner=!0,this.sharedMemory=n}return c.prototype.update=function(i){if(!this.finalized){var r,s=typeof i;if("string"!==s){if("object"!==s)throw new Error(t);if(null===i)throw new Error(t);if(e&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!(Array.isArray(i)||e&&ArrayBuffer.isView(i)))throw new Error(t);r=!0}for(var o,a,h=0,c=i.length,d=this.blocks;h<c;){if(this.hashed&&(this.hashed=!1,d[0]=this.block,d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0),r)for(a=this.start;h<c&&a<64;++h)d[a>>2]|=i[h]<<n[3&a++];else for(a=this.start;h<c&&a<64;++h)(o=i.charCodeAt(h))<128?d[a>>2]|=o<<n[3&a++]:o<2048?(d[a>>2]|=(192|o>>6)<<n[3&a++],d[a>>2]|=(128|63&o)<<n[3&a++]):o<55296||o>=57344?(d[a>>2]|=(224|o>>12)<<n[3&a++],d[a>>2]|=(128|o>>6&63)<<n[3&a++],d[a>>2]|=(128|63&o)<<n[3&a++]):(o=65536+((1023&o)<<10|1023&i.charCodeAt(++h)),d[a>>2]|=(240|o>>18)<<n[3&a++],d[a>>2]|=(128|o>>12&63)<<n[3&a++],d[a>>2]|=(128|o>>6&63)<<n[3&a++],d[a>>2]|=(128|63&o)<<n[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=d[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},c.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=r[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},c.prototype.hash=function(){var t,e,i,r,n,o,a,h,c,d=this.h0,l=this.h1,u=this.h2,p=this.h3,f=this.h4,g=this.h5,m=this.h6,v=this.h7,y=this.blocks;for(t=16;t<64;++t)e=((n=y[t-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,i=((n=y[t-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,y[t]=y[t-16]+e+y[t-7]+i<<0;for(c=l&u,t=0;t<64;t+=4)this.first?(this.is224?(o=300032,v=(n=y[0]-1413257819)-150054599<<0,p=n+24177077<<0):(o=704751109,v=(n=y[0]-210244248)-1521486534<<0,p=n+143694565<<0),this.first=!1):(e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(o=d&l)^d&u^c,v=p+(n=v+(i=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&g^~f&m)+s[t]+y[t])<<0,p=n+(e+r)<<0),e=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),r=(a=p&d)^p&l^o,m=u+(n=m+(i=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&f^~v&g)+s[t+1]+y[t+1])<<0,e=((u=n+(e+r)<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(h=u&p)^u&d^a,g=l+(n=g+(i=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&v^~m&f)+s[t+2]+y[t+2])<<0,e=((l=n+(e+r)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),r=(c=l&u)^l&p^h,f=d+(n=f+(i=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&m^~g&v)+s[t+3]+y[t+3])<<0,d=n+(e+r)<<0;this.h0=this.h0+d<<0,this.h1=this.h1+l<<0,this.h2=this.h2+u<<0,this.h3=this.h3+p<<0,this.h4=this.h4+f<<0,this.h5=this.h5+g<<0,this.h6=this.h6+m<<0,this.h7=this.h7+v<<0},c.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,s=this.h4,o=this.h5,a=this.h6,h=this.h7,c=i[t>>28&15]+i[t>>24&15]+i[t>>20&15]+i[t>>16&15]+i[t>>12&15]+i[t>>8&15]+i[t>>4&15]+i[15&t]+i[e>>28&15]+i[e>>24&15]+i[e>>20&15]+i[e>>16&15]+i[e>>12&15]+i[e>>8&15]+i[e>>4&15]+i[15&e]+i[r>>28&15]+i[r>>24&15]+i[r>>20&15]+i[r>>16&15]+i[r>>12&15]+i[r>>8&15]+i[r>>4&15]+i[15&r]+i[n>>28&15]+i[n>>24&15]+i[n>>20&15]+i[n>>16&15]+i[n>>12&15]+i[n>>8&15]+i[n>>4&15]+i[15&n]+i[s>>28&15]+i[s>>24&15]+i[s>>20&15]+i[s>>16&15]+i[s>>12&15]+i[s>>8&15]+i[s>>4&15]+i[15&s]+i[o>>28&15]+i[o>>24&15]+i[o>>20&15]+i[o>>16&15]+i[o>>12&15]+i[o>>8&15]+i[o>>4&15]+i[15&o]+i[a>>28&15]+i[a>>24&15]+i[a>>20&15]+i[a>>16&15]+i[a>>12&15]+i[a>>8&15]+i[a>>4&15]+i[15&a];return this.is224||(c+=i[h>>28&15]+i[h>>24&15]+i[h>>20&15]+i[h>>16&15]+i[h>>12&15]+i[h>>8&15]+i[h>>4&15]+i[15&h]),c},c.prototype.toString=c.prototype.hex,c.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3,n=this.h4,s=this.h5,o=this.h6,a=this.h7,h=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||h.push(a>>24&255,a>>16&255,a>>8&255,255&a),h},c.prototype.array=c.prototype.digest,c.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},d.prototype=new c,d.prototype.finalize=function(){if(c.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();c.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),c.prototype.finalize.call(this)}},function(t){var e=h("hex",t);e.create=function(){return new c(t)},e.update=function(t){return e.create().update(t)};for(var i=0;i<o.length;++i){var r=o[i];e[r]=h(r,t)}return e}()}(),md5=function(){var t=function(t){return function(t){for(var e,i="0123456789abcdef",r="",n=0;n<t.length;n++)e=t.charCodeAt(n),r+=i.charAt(e>>>4&15)+i.charAt(15&e);return r}(function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}(function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var a=1732584193,h=-271733879,c=-1732584194,d=271733878,l=0;l<t.length;l+=16){var u=a,p=h,f=c,g=d;h=s(h=s(h=s(h=s(h=n(h=n(h=n(h=n(h=r(h=r(h=r(h=r(h=i(h=i(h=i(h=i(h,c=i(c,d=i(d,a=i(a,h,c,d,t[l+0],7,-680876936),h,c,t[l+1],12,-389564586),a,h,t[l+2],17,606105819),d,a,t[l+3],22,-1044525330),c=i(c,d=i(d,a=i(a,h,c,d,t[l+4],7,-176418897),h,c,t[l+5],12,1200080426),a,h,t[l+6],17,-1473231341),d,a,t[l+7],22,-45705983),c=i(c,d=i(d,a=i(a,h,c,d,t[l+8],7,1770035416),h,c,t[l+9],12,-1958414417),a,h,t[l+10],17,-42063),d,a,t[l+11],22,-1990404162),c=i(c,d=i(d,a=i(a,h,c,d,t[l+12],7,1804603682),h,c,t[l+13],12,-40341101),a,h,t[l+14],17,-1502002290),d,a,t[l+15],22,1236535329),c=r(c,d=r(d,a=r(a,h,c,d,t[l+1],5,-165796510),h,c,t[l+6],9,-1069501632),a,h,t[l+11],14,643717713),d,a,t[l+0],20,-373897302),c=r(c,d=r(d,a=r(a,h,c,d,t[l+5],5,-701558691),h,c,t[l+10],9,38016083),a,h,t[l+15],14,-660478335),d,a,t[l+4],20,-405537848),c=r(c,d=r(d,a=r(a,h,c,d,t[l+9],5,568446438),h,c,t[l+14],9,-1019803690),a,h,t[l+3],14,-187363961),d,a,t[l+8],20,1163531501),c=r(c,d=r(d,a=r(a,h,c,d,t[l+13],5,-1444681467),h,c,t[l+2],9,-51403784),a,h,t[l+7],14,1735328473),d,a,t[l+12],20,-1926607734),c=n(c,d=n(d,a=n(a,h,c,d,t[l+5],4,-378558),h,c,t[l+8],11,-2022574463),a,h,t[l+11],16,1839030562),d,a,t[l+14],23,-35309556),c=n(c,d=n(d,a=n(a,h,c,d,t[l+1],4,-1530992060),h,c,t[l+4],11,1272893353),a,h,t[l+7],16,-155497632),d,a,t[l+10],23,-1094730640),c=n(c,d=n(d,a=n(a,h,c,d,t[l+13],4,681279174),h,c,t[l+0],11,-358537222),a,h,t[l+3],16,-722521979),d,a,t[l+6],23,76029189),c=n(c,d=n(d,a=n(a,h,c,d,t[l+9],4,-640364487),h,c,t[l+12],11,-421815835),a,h,t[l+15],16,530742520),d,a,t[l+2],23,-995338651),c=s(c,d=s(d,a=s(a,h,c,d,t[l+0],6,-198630844),h,c,t[l+7],10,1126891415),a,h,t[l+14],15,-1416354905),d,a,t[l+5],21,-57434055),c=s(c,d=s(d,a=s(a,h,c,d,t[l+12],6,1700485571),h,c,t[l+3],10,-1894986606),a,h,t[l+10],15,-1051523),d,a,t[l+1],21,-2054922799),c=s(c,d=s(d,a=s(a,h,c,d,t[l+8],6,1873313359),h,c,t[l+15],10,-30611744),a,h,t[l+6],15,-1560198380),d,a,t[l+13],21,1309151649),c=s(c,d=s(d,a=s(a,h,c,d,t[l+4],6,-145523070),h,c,t[l+11],10,-1120210379),a,h,t[l+2],15,718787259),d,a,t[l+9],21,-343485551),a=o(a,u),h=o(h,p),c=o(c,f),d=o(d,g)}return[a,h,c,d]}(function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}(t),8*t.length)))};function e(t,e,i,r,n,s){return o(function(t,e){return t<<e|t>>>32-e}(o(o(e,t),o(r,s)),n),i)}function i(t,i,r,n,s,o,a){return e(i&r|~i&n,t,i,s,o,a)}function r(t,i,r,n,s,o,a){return e(i&n|r&~n,t,i,s,o,a)}function n(t,i,r,n,s,o,a){return e(i^r^n,t,i,s,o,a)}function s(t,i,r,n,s,o,a){return e(r^(i|~n),t,i,s,o,a)}function o(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}return function(e){e instanceof Uint8Array||(e=(new TextEncoder).encode("string"==typeof e?e:JSON.stringify(e)));for(var i=[],r=new Uint8Array(e),n=0,s=r.byteLength;n<s;n++)i.push(String.fromCharCode(r[n]));return t(i.join(""))}}(),lz=function(){function t(t,e){if(!n[t]){n[t]={};for(var i=0;i<t.length;i++)n[t][t.charAt(i)]=i}return n[t][e]}var e=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={},s={compressToBase64:function(t){if(null==t)return"";var e=s._compress(t,6,(function(t){return i.charAt(t)}));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,(function(r){return t(i,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":s._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=s.compress(t),i=new Uint8Array(2*e.length),r=0,n=e.length;n>r;r++){var o=e.charCodeAt(r);i[2*r]=o>>>8,i[2*r+1]=o%256}return i},decompressFromUint8Array:function(t){if(null==t)return s.decompress(t);for(var i=new Array(t.length/2),r=0,n=i.length;n>r;r++)i[r]=256*t[2*r]+t[2*r+1];var o=[];return i.forEach((function(t){o.push(e(t))})),s.decompress(o.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":s._compress(t,6,(function(t){return r.charAt(t)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,(function(i){return t(r,e.charAt(i))})))},compress:function(t){return s._compress(t,16,(function(t){return e(t)}))},_compress:function(t,e,i){if(null==t)return"";var r,n,s,o={},a={},h="",c="",d="",l=2,u=3,p=2,f=[],g=0,m=0;for(s=0;s<t.length;s+=1)if(h=t.charAt(s),Object.prototype.hasOwnProperty.call(o,h)||(o[h]=u++,a[h]=!0),c=d+h,Object.prototype.hasOwnProperty.call(o,c))d=c;else{if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(r=0;p>r;r++)g<<=1,m==e-1?(m=0,f.push(i(g)),g=0):m++;for(n=d.charCodeAt(0),r=0;8>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1}else{for(n=1,r=0;p>r;r++)g=g<<1|n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n=0;for(n=d.charCodeAt(0),r=0;16>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1}0==--l&&(l=Math.pow(2,p),p++),delete a[d]}else for(n=o[d],r=0;p>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1;0==--l&&(l=Math.pow(2,p),p++),o[c]=u++,d=String(h)}if(""!==d){if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(r=0;p>r;r++)g<<=1,m==e-1?(m=0,f.push(i(g)),g=0):m++;for(n=d.charCodeAt(0),r=0;8>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1}else{for(n=1,r=0;p>r;r++)g=g<<1|n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n=0;for(n=d.charCodeAt(0),r=0;16>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1}0==--l&&(l=Math.pow(2,p),p++),delete a[d]}else for(n=o[d],r=0;p>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1;0==--l&&(l=Math.pow(2,p),p++)}for(n=2,r=0;p>r;r++)g=g<<1|1&n,m==e-1?(m=0,f.push(i(g)),g=0):m++,n>>=1;for(;;){if(g<<=1,m==e-1){f.push(i(g));break}m++}return f.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(t,i,r){var n,s,o,a,h,c,d,l=[],u=4,p=4,f=3,g="",m=[],v={val:r(0),position:i,index:1};for(n=0;3>n;n+=1)l[n]=n;for(o=0,h=Math.pow(2,2),c=1;c!=h;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=i,v.val=r(v.index++)),o|=(a>0?1:0)*c,c<<=1;switch(o){case 0:for(o=0,h=Math.pow(2,8),c=1;c!=h;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=i,v.val=r(v.index++)),o|=(a>0?1:0)*c,c<<=1;d=e(o);break;case 1:for(o=0,h=Math.pow(2,16),c=1;c!=h;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=i,v.val=r(v.index++)),o|=(a>0?1:0)*c,c<<=1;d=e(o);break;case 2:return""}for(l[3]=d,s=d,m.push(d);;){if(v.index>t)return"";for(o=0,h=Math.pow(2,f),c=1;c!=h;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=i,v.val=r(v.index++)),o|=(a>0?1:0)*c,c<<=1;switch(d=o){case 0:for(o=0,h=Math.pow(2,8),c=1;c!=h;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=i,v.val=r(v.index++)),o|=(a>0?1:0)*c,c<<=1;l[p++]=e(o),d=p-1,u--;break;case 1:for(o=0,h=Math.pow(2,16),c=1;c!=h;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=i,v.val=r(v.index++)),o|=(a>0?1:0)*c,c<<=1;l[p++]=e(o),d=p-1,u--;break;case 2:return m.join("")}if(0==u&&(u=Math.pow(2,f),f++),l[d])g=l[d];else{if(d!==p)return null;g=s+s.charAt(0)}m.push(g),l[p++]=s+g.charAt(0),s=g,0==--u&&(u=Math.pow(2,f),f++)}}};return s}();function adBlock(){return new Promise((t,e)=>{var i=document.createElement("div");i.innerHTML="&nbsp;",i.className="adsbox";var r=!1;try{document.body.appendChild(i),r=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(i)}catch(t){r=!1}t({adBlock:r})})}async function audioFP(){let{audioFP:t}=await audioFP2024(),{audioFP:e}=await audioFP2020();return{audioFP:[t,e].join("|")}}async function audioFP2020(){let t=await new Promise((t,e)=>{if(options.audio.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return t(null);var i=w.OfflineAudioContext||w.webkitOfflineAudioContext;if(null==i)return t(null);var r=new i(1,44100,44100),n=r.createOscillator();n.type="triangle",n.frequency.setValueAtTime(1e4,r.currentTime);var s=r.createDynamicsCompressor();each([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(t){void 0!==s[t[0]]&&"function"==typeof s[t[0]].setValueAtTime&&s[t[0]].setValueAtTime(t[1],r.currentTime)})),n.connect(s),s.connect(r.destination),n.start(0),r.startRendering();var o=setTimeout((function(){return console.warn("Audio fp timed out."),r.oncomplete=function(){},r=null,t("audioTimeout")}),options.audio.timeout||1e3);r.oncomplete=function(e){var i;try{clearTimeout(o),i=e.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(t,e){return t+Math.abs(e)}),0).toString(),n.disconnect(),s.disconnect()}catch(e){return void t(e)}t(i)}});return t=(t||"").toString()||NOT_AVAILABLE,{audioFP:t}}async function audioFP2024(){function t(){return function(){const t=window,e=navigator;return["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===(e.vendor||"").indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t].filter(Boolean).length>=4}()&&!function(){const t=window,{HTMLElement:e,Document:i}=t;return["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),i&&"pointerLockElement"in i.prototype].filter(Boolean).length>=4}()&&!function(){const t=window;return["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t].filter(Boolean).length>=3}()}let e=await async function(){let e=-1,i=-2,r=-3;function n(t){return new Promise((e,i)=>{let r=25;t.oncomplete=t=>e(t.renderedBuffer);const n=()=>{try{const i=t.startRendering();!i||"Promise"!=typeof i&&"function"!=typeof i.then||i.then(void 0,()=>{}),"suspended"===t.state&&(document.hidden||r--,r>0?setTimeout(n,200):e(null))}catch(t){i(t)}};n()})}async function s(){const s=window,o=s.OfflineAudioContext||s.webkitOfflineAudioContext;if(!o)return i;if(t())return e;const a=await async function(t){const e=new t(1,3396,44100),i=e.createOscillator();i.type="square",i.frequency.value=1e3;const r=e.createDynamicsCompressor();r.threshold.value=-70,r.knee.value=40,r.ratio.value=12,r.attack.value=0,r.release.value=.25;const s=e.createBiquadFilter();return s.type="allpass",s.frequency.value=5.239622852977861,s.Q.value=.1,i.connect(r),r.connect(s),s.connect(e.destination),i.start(0),await n(e)}(o);if(!a)return r;const h=new o(1,a.length-1+4e4,44100),c=h.createBufferSource();c.buffer=a,c.loop=!0,c.loopStart=(a.length-1)/44100,c.loopEnd=a.length/44100,c.connect(h.destination),c.start();const d=await n(h);if(!d)return r;const l=function(t,e){let i=void 0,r=!1;for(let t=0;t<e.length;t+=Math.floor(e.length/10))if(0===e[t]);else if(void 0===i)i=e[t];else if(i!==e[t]){r=!0;break}return void 0===i?i=t.getChannelData(0)[t.length-1]:r&&(i=getMiddle(e)),i}(a,d.getChannelData(0).subarray(a.length-1));return Math.abs(l)}const o=await async function(){let t;const e=new Promise(t=>{const e=document,i=()=>{e.hidden||(e.removeEventListener("visibilitychange",i),t())};e.addEventListener("visibilitychange",i),i()}).then(()=>sleep(500)),i=s().then(e=>t=[!0,e],e=>t=[!1,e]);return await Promise.race([e,i]),()=>{if(!t)return r;if(!t[0])throw t[1];return t[1]}}();return()=>function(t,e){if(0===t)return t;const i=10**-(Math.floor(Math.log10(Math.abs(t)))-Math.floor(e)+1)*(10*e%10||1);return Math.round(t*i)/i}(o(),6.2)}(t()),i=e();return i=e().toString()||NOT_AVAILABLE,{audioFP:i}}function browserMatch(){return new Promise((t,e)=>{var i,r=navigator.userAgent.toLowerCase(),n=navigator.productSub;r.indexOf("edge/")>=0||r.indexOf("iemobile/")>=0||r.indexOf("opera mini")>=0?t(!0):i=r.indexOf("firefox/")>=0?"Firefox":r.indexOf("opera/")>=0||r.indexOf(" opr/")>=0?"Opera":r.indexOf("chrome/")>=0?"Chrome":r.indexOf("safari/")>=0?r.indexOf("android 1.")>=0||r.indexOf("android 2.")>=0||r.indexOf("android 3.")>=0||r.indexOf("android 4.")>=0?"AOSP":"Safari":r.indexOf("trident/")>=0?"Internet Explorer":"Other","Chrome"!==i&&"Safari"!==i&&"Opera"!==i||"20030107"===n||t(!1);var s,o=eval.toString().length;(37===o&&"Safari"!==i&&"Firefox"!==i&&"Other"!==i||39===o&&"Internet Explorer"!==i&&"Other"!==i||33===o&&"Chrome"!==i&&"AOSP"!==i&&"Opera"!==i&&"Other"!==i)&&t(!1);try{throw"a"}catch(t){try{t.toSource(),s=!0}catch(t){s=!1}}t(!(s&&"Firefox"!==i&&"Other"!==i))}).then(t=>({browserMatch:t}))}async function canvasFP(){let t=await async function(t){let e=!1,i="",r="",n="unsupported",s="unstable",o="Skipped";function a(t){return t.toDataURL()}const[h,c]=function(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}();return!function(t,e){return!(!e||!t.toDataURL)}(h,c)?i=r=n:(e=function(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}(c),t?i=r=o:[i,r]=await async function(t,e){!function(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const i="Cwm fjordbank gly "+String.fromCharCode(55357,56835);e.fillText(i,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(i,4,45)}(t,e),await sleep();const i=a(t);return i!==a(t)?[s,s]:(function(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[t,i,r]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=t,e.beginPath(),e.arc(i,r,40,0,2*Math.PI,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,2*Math.PI,!0),e.arc(60,60,20,0,2*Math.PI,!0),e.fill("evenodd")}(t,e),await sleep(),[i,a(t)])}(h,c)),{winding:e,geometry:i,text:r}}(function(){const t=window,e=navigator;return["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===(e.vendor||"").indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t].filter(Boolean).length>=4}()&&function(){const t=window,e=navigator,{CSS:i,HTMLButtonElement:r}=t;return[!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,i.supports("font-size-adjust: ex-height 0.5"),i.supports("text-transform: full-width")].filter(Boolean).length>=4}()&&function(){const t=window;return e=t.print,!!/^function\s.*?\{\s*\[native code]\s*}$/.test(String(e))&&["[object WebPageNamespace]"===String(t.browser),"MicrodataExtractor"in t].filter(Boolean).length>=1;var e}());return{canvas:[JSON.stringify(t)]}}function doNotTrack(){return Promise.resolve({doNotTrack:void 0!==navigator.doNotTrack?navigator.doNotTrack:void 0!==navigator.msDoNotTrack?navigator.msDoNotTrack:void 0!==w.doNotTrack?w.doNotTrack:NOT_AVAILABLE})}function devices(){return Promise.resolve({devices:navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(t=>t.map(t=>"id="+t.deviceId+";gid="+t.groupId+";"+t.kind+";"+t.label)):NOT_AVAILABLE})}function getOrientation(){return Promise.resolve({orientation:(screen.orientation||{}).type||screen.mozOrientation||screen.msOrientation||NOT_AVAILABLE})}function loseWebglContext(t){var e=t.getExtension("WEBGL_lose_context");null!=e&&e.loseContext()}function osMatch(){return new Promise((t,e)=>{var i,r=navigator.userAgent.toLowerCase(),n=navigator.oscpu,s=navigator.platform.toLowerCase();if(i=r.indexOf("windows phone")>=0?"Windows Phone":r.indexOf("windows")>=0||r.indexOf("win16")>=0||r.indexOf("win32")>=0||r.indexOf("win64")>=0||r.indexOf("win95")>=0||r.indexOf("win98")>=0||r.indexOf("winnt")>=0||r.indexOf("wow64")>=0?"Windows":r.indexOf("android")>=0?"Android":r.indexOf("linux")>=0||r.indexOf("cros")>=0||r.indexOf("x11")>=0?"Linux":r.indexOf("iphone")>=0||r.indexOf("ipad")>=0||r.indexOf("ipod")>=0||r.indexOf("crios")>=0||r.indexOf("fxios")>=0?"iOS":r.indexOf("macintosh")>=0||r.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows"!==i&&"Windows Phone"!==i&&"Android"!==i&&"iOS"!==i&&"Other"!==i&&-1===r.indexOf("cros")&&t(!1),void 0!==n&&((n=n.toLowerCase()).indexOf("win")>=0&&"Windows"!==i&&"Windows Phone"!==i||n.indexOf("linux")>=0&&"Linux"!==i&&"Android"!==i||n.indexOf("mac")>=0&&"Mac"!==i&&"iOS"!==i||(-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===i))&&t(!1),s.indexOf("win")>=0&&"Windows"!==i&&"Windows Phone"!==i)t(!1);else if((s.indexOf("linux")>=0||s.indexOf("android")>=0||s.indexOf("pike")>=0)&&"Linux"!==i&&"Android"!==i)t(!1);else if((s.indexOf("mac")>=0||s.indexOf("ipad")>=0||s.indexOf("ipod")>=0||s.indexOf("iphone")>=0)&&"Mac"!==i&&"iOS"!==i)t(!1);else if(s.indexOf("arm")>=0&&"Windows Phone"===i)t(!0);else if(s.indexOf("pike")>=0&&r.indexOf("opera mini")>=0)t(!0);else{(s.indexOf("win")<0&&s.indexOf("linux")<0&&s.indexOf("mac")<0&&s.indexOf("iphone")<0&&s.indexOf("ipad")<0&&s.indexOf("ipod")<0)!==("Other"===i)&&t(!1)}t(!(void 0===navigator.plugins&&"Windows"!==i&&"Windows Phone"!==i))}).then(t=>({osMatch:t}))}function pixelRatio(){return Promise.resolve({pixelRatio:w.devicePixelRatio||0})}function pluginList(){var t=Object.values(navigator.plugins||[]).filter(t=>"undefined"!=typeof Plugin&&t instanceof Plugin).sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}));return{plugins:t=map(t,(function(t){var e=map(t,(function(t){return[t.type,t.suffixes]}));return[t.name,t.description,e]}))}}function touchScreenSupport(){var t=void 0!==navigator.maxTouchPoints?navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints?navigator.msMaxTouchPoints:0,e=function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}(),i="ontouchstart"in w;return Promise.resolve({touchScreenSupport:[t,e,i]})}function webglCanvas(){return new Promise((t,e)=>{var i=null;try{var r=document.createElement("canvas");i=r.getContext("webgl")||r.getContext("experimental-webgl")}catch(t){}finally{i||(i=null),t(i)}})}function webglFP(){var t,e=function(e){return t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"};return webglCanvas().then(i=>{if(!i)return null;var r=[],n=(t=i).createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);var s=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),n.itemSize=3,n.numItems=3;var o=t.createProgram(),a=t.createShader(t.VERTEX_SHADER);t.shaderSource(a,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),t.compileShader(a);var h=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(h,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),t.compileShader(h),t.attachShader(o,a),t.attachShader(o,h),t.linkProgram(o),t.useProgram(o),o.vertexPosAttrib=t.getAttribLocation(o,"attrVertex"),o.offsetUniform=t.getUniformLocation(o,"uniformOffset"),t.enableVertexAttribArray(o.vertexPosArray),t.vertexAttribPointer(o.vertexPosAttrib,n.itemSize,t.FLOAT,!1,0,0),t.uniform2f(o.offsetUniform,1,1),t.drawArrays(t.TRIANGLE_STRIP,0,n.numItems);try{r.push(t.canvas.toDataURL())}catch(t){}r.push("extensions:"+(t.getSupportedExtensions()||[]).join(";")),r.push("webgl aliased line width range:"+e(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),r.push("webgl aliased point size range:"+e(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),r.push("webgl alpha bits:"+t.getParameter(t.ALPHA_BITS)),r.push("webgl antialiasing:"+(t.getContextAttributes().antialias?"yes":"no")),r.push("webgl blue bits:"+t.getParameter(t.BLUE_BITS)),r.push("webgl depth bits:"+t.getParameter(t.DEPTH_BITS)),r.push("webgl green bits:"+t.getParameter(t.GREEN_BITS)),r.push("webgl max anisotropy:"+function(t){var e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic");if(e){var i=t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===i&&(i=2),i}return null}(t)),r.push("webgl max combined texture image units:"+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),r.push("webgl max cube map texture size:"+t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),r.push("webgl max fragment uniform vectors:"+t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),r.push("webgl max render buffer size:"+t.getParameter(t.MAX_RENDERBUFFER_SIZE)),r.push("webgl max texture image units:"+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),r.push("webgl max texture size:"+t.getParameter(t.MAX_TEXTURE_SIZE)),r.push("webgl max varying vectors:"+t.getParameter(t.MAX_VARYING_VECTORS)),r.push("webgl max vertex attribs:"+t.getParameter(t.MAX_VERTEX_ATTRIBS)),r.push("webgl max vertex texture image units:"+t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),r.push("webgl max vertex uniform vectors:"+t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),r.push("webgl max viewport dims:"+e(t.getParameter(t.MAX_VIEWPORT_DIMS))),r.push("webgl red bits:"+t.getParameter(t.RED_BITS)),r.push("webgl renderer:"+t.getParameter(t.RENDERER)),r.push("webgl shading language version:"+t.getParameter(t.SHADING_LANGUAGE_VERSION)),r.push("webgl stencil bits:"+t.getParameter(t.STENCIL_BITS)),r.push("webgl vendor:"+t.getParameter(t.VENDOR)),r.push("webgl version:"+t.getParameter(t.VERSION));try{var c=t.getExtension("WEBGL_debug_renderer_info");c&&(r.push("webgl unmasked vendor:"+t.getParameter(c.UNMASKED_VENDOR_WEBGL)),r.push("webgl unmasked renderer:"+t.getParameter(c.UNMASKED_RENDERER_WEBGL)))}catch(t){}return t.getShaderPrecisionFormat?(each(["FLOAT","INT"],(function(e){each(["VERTEX","FRAGMENT"],(function(i){each(["HIGH","MEDIUM","LOW"],(function(n){each(["precision","rangeMin","rangeMax"],(function(s){var o=t.getShaderPrecisionFormat(t[i+"_SHADER"],t[n+"_"+e])[s];"precision"!==s&&(s="precision "+s);var a=["webgl ",i.toLowerCase()," shader ",n.toLowerCase()," ",e.toLowerCase()," ",s,":",o].join("");r.push(a)}))}))}))})),loseWebglContext(t),r):(loseWebglContext(t),r)}).then(t=>({webgl:null!==t?t:[NOT_AVAILABLE]}))}function webglVR(){return webglCanvas().then(t=>{var e=null;try{var i=t.getExtension("WEBGL_debug_renderer_info");e=t.getParameter(i.UNMASKED_VENDOR_WEBGL)+"~"+t.getParameter(i.UNMASKED_RENDERER_WEBGL),loseWebglContext(t)}catch(t){e=null}finally{return{webglVR:null!==e?e:""}}})}function sleep(t){return new Promise(e=>{setTimeout(e,t||0)})}let Errors={MISSING_CONF:"TNC - "+global+".conf is empty or undefined",MISSING_TNCID:"TNCID has not been generated"},UUIDv4=new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);class GetFonts{avaliableVersions=["v2020","v2024","v2024beta","v2024alpha"];defaultVersion="v2020";testString="mmMwWLliI0O&1";textSize="48px";baseFonts=["monospace","sans-serif","serif"];fontList=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];presets={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};tnc;version;constructor({version:t="v2020",textSize:e="",testString:i="",fontList:r=[],tnc:n=null}){this.version=this.avaliableVersions.includes(t)?t:this.defaultVersion,"v2020"==this.version?(this.textSize="72px",this.testString="mmmmmmmmmmlli",this.fontList=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"]):(this.textSize=e||this.textSize,this.testString=i||this.testString,this.fontList=Array.isArray(r)&&r.length?r:this.fontList),this.tnc=n}async wait(t,e){return await new Promise(i=>setTimeout(i,t,e))}async withIframe(t=(async()=>{}),e="",i=50){const r=document;for(;!r.body;)await this.wait(i);const n=r.createElement("iframe");try{for(await new Promise((t,i)=>{let s=!1;const o=()=>{s=!0,t()};n.onload=o,n.onerror=t=>{s=!0,i(t)};const{style:a}=n;a.setProperty("display","block","important"),a.position="absolute",a.top="0",a.left="0",a.visibility="hidden",e&&"srcdoc"in n?n.srcdoc=e:n.src="about:blank",r.body.appendChild(n);const h=()=>{s||(n.contentWindow&&n.contentWindow.document&&"complete"===n.contentWindow.document.readyState?o():setTimeout(h,10))};h()});!n.contentWindow||!n.document||!n.document.body;)await this.wait(i);return await t(n,n.contentWindow)}finally{n.parentNode&&n.parentNode.removeChild(n)}}async withDiv(t=(async()=>{}),e="",i=50){for(;!document.body;)await this.wait(i);return await t(window,{document:document})}async get(){return this.tnc.options.exclude&&this.options.exclude.includes("fonts")?[]:await this[this.version]()}async v2020(){var t=document.getElementsByTagName("body")[0],e=document.createElement("div"),i=document.createElement("div"),r={},n={},s=()=>{var t=document.createElement("span");return t.style.position="absolute",t.style.left="-9999px",t.style.fontSize=this.textSize,t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="normal",t.style.lineBreak="auto",t.style.lineHeight="normal",t.style.textTransform="none",t.style.textAlign="left",t.style.textDecoration="none",t.style.textShadow="none",t.style.whiteSpace="normal",t.style.wordBreak="normal",t.style.wordSpacing="normal",t.innerHTML=this.testString,t},o=function(t,e){var i=s();return i.style.fontFamily="'"+t+"',"+e,i},a=t=>{for(var e=!1,i=0;i<this.baseFonts.length;i++)if(e=t[i].offsetWidth!==r[this.baseFonts[i]]||t[i].offsetHeight!==n[this.baseFonts[i]])return e;return e},h=(()=>{for(var t=[],i=0,r=this.baseFonts.length;i<r;i++){var n=s();n.style.fontFamily=this.baseFonts[i],e.appendChild(n),t.push(n)}return t})();t.appendChild(e);for(var c=0,d=this.baseFonts.length;c<d;c++)r[this.baseFonts[c]]=h[c].offsetWidth,n[this.baseFonts[c]]=h[c].offsetHeight;var l=(()=>{for(var t={},e=0,r=this.fontList.length;e<r;e++){for(var n=[],s=0,a=this.baseFonts.length;s<a;s++){var h=o(this.fontList[e],this.baseFonts[s]);i.appendChild(h),n.push(h)}t[this.fontList[e]]=n}return t})();t.appendChild(i);for(var u=[],p=0,f=this.fontList.length;p<f;p++)a(l[this.fontList[p]])&&u.push(this.fontList[p]);return t.removeChild(i),t.removeChild(e),u}async v2024(){return await this.withIframe(async(t,{document:e})=>{const i=e.body;i.style.fontSize=this.textSize;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const n={},s={},o=t=>{const i=e.createElement("span"),{style:n}=i;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=t,i.textContent=this.testString,r.appendChild(i),i},a=(t,e)=>o(`'${t}',${e}`),h=t=>{for(let e=0,i=this.baseFonts.length;e<i;e++){let i=this.baseFonts[e];if(t[e].offsetWidth!==n[i]||t[e].offsetHeight!==s[i])return!0}return!1},c=(()=>this.baseFonts.map(o))(),d=(()=>{const t={};for(var e=0,i=this.fontList.length;e<i;e++){let i=this.fontList[e];t[i]=this.baseFonts.map(t=>a(i,t))}return t})();i.appendChild(r);for(let t=0,e=this.baseFonts.length;t<e;t++)n[this.baseFonts[t]]=c[t].offsetWidth,s[this.baseFonts[t]]=c[t].offsetHeight;return this.fontList.filter(t=>h(d[t]))})}async v2024beta(){return await this.withDiv(async(t,{document:e})=>{const i=e.body;i.style.fontSize=this.textSize;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const n={},s={},o=t=>{const i=e.createElement("span"),{style:n}=i;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=t,i.textContent=this.testString,r.appendChild(i),i},a=(t,e)=>o(`'${t}',${e}`),h=t=>{for(let e=0,i=this.baseFonts.length;e<i;e++){let i=this.baseFonts[e];if(t[e].offsetWidth!==n[i]||t[e].offsetHeight!==s[i])return!0}return!1},c=(()=>this.baseFonts.map(o))(),d=(()=>{const t={};for(var e=0,i=this.fontList.length;e<i;e++){let i=this.fontList[e];t[i]=this.baseFonts.map(t=>a(i,t))}return t})();i.appendChild(r);for(let t=0,e=this.baseFonts.length;t<e;t++)n[this.baseFonts[t]]=c[t].offsetWidth,s[this.baseFonts[t]]=c[t].offsetHeight;return this.fontList.filter(t=>h(d[t]))})}async v2024alpha(){return await this.withIframe(async(t,{document:e})=>{const i=e.body;i.style.fontSize=this.textSize;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important"),r.style.setProperty("position","absolute","important"),r.style.setProperty("top","0","important"),r.style.setProperty("left","0","important"),r.style.setProperty("z-index","-1","important"),i.appendChild(r);const n={},s={},o=t=>{const i=e.createElement("span"),{style:n}=i;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=t,i.textContent=this.testString,r.appendChild(i),i},a=(t,e)=>o(`'${t}',${e}`),h=()=>this.baseFonts.map(o),c=(t,e)=>{const i={};for(var r=t,n=Math.min(t+e,this.fontList.length);r<n;r++){let t=this.fontList[r];i[t]=this.baseFonts.map(e=>a(t,e))}return i},d=t=>{for(let e=0,i=this.baseFonts.length;e<i;e++){let i=this.baseFonts[e];if(t[e].offsetWidth!==n[i]||t[e].offsetHeight!==s[i])return!0}return!1};let l,u=new Promise(t=>{l=t});requestAnimationFrame(()=>{l(h())});const p=await u;let f={},g=0,m=this.fontList.length;for(;g<m;){u=new Promise(t=>{l=t}),requestAnimationFrame(()=>{l(c(g,50))});let t=await u;Object.assign(f,t),g+=50}console.log("fontsSpans",f);for(let t=0,e=this.baseFonts.length;t<e;t++)n[this.baseFonts[t]]=p[t].offsetWidth,s[this.baseFonts[t]]=p[t].offsetHeight;return this.fontList.filter(t=>d(f[t]))})}isChromium(){const t=window,e=navigator;return["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,0===e.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t].reduce((t,e)=>t+(e?1:0),0)>=5}isWebKit(){const t=window;return["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===navigator.vendor.indexOf("Apple"),"RGBColor"in t,"WebKitMediaKeys"in t].reduce((t,e)=>t+(e?1:0),0)>=4}async preferences(){return await this.withNaturalFonts((t,e)=>{const i={},r={};for(const r of Object.keys(this.presets)){const[n={},s=this.testString]=this.presets[r],o=t.createElement("span");o.textContent=s,o.style.whiteSpace="nowrap";for(const t of Object.keys(n)){const e=n[t];void 0!==e&&(o.style[t]=e)}i[r]=o,e.append(t.createElement("br"),o)}for(const t of Object.keys(this.presets))r[t]=i[t].getBoundingClientRect().width;return r})}async withNaturalFonts(t=(async()=>{}),e=4e3){return this.withIframe((i,r)=>{const n=r.document,s=n.body,o=s.style;o.width=e+"px",o.webkitTextSizeAdjust=o.textSizeAdjust="none",this.isChromium()?s.style.zoom=""+1/r.devicePixelRatio:this.isWebKit()&&(s.style.zoom="reset");const a=n.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(n,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}}class GettersSetters{constructor(){this._cbqueue=[],this._prqueue=[],this._conf=[],this._counters={domain:1,global:1},this._hasher=new Hasher({parent:this}),this._WWFetch,this._fetch,this.fetch="",this._ppid=null}addCustomVariable(t,e,i){try{if("object"==typeof t&&void 0===e&&void 0===i){var{N:r,n:t,Name:n,name:s,T:o,t:e,Type:a,type:h,V:d,v:i,Value:l,value:u}=t;return this.CustomVariable={N:r,n:t,Name:n,name:s,T:o,t:e,Type:a,type:h,V:d,v:i,Value:l,value:u},this}if(t="string"==typeof t?t.trim():"",e="string"==typeof e?e.trim().toLowerCase():"string",i=null!=i?"object"==typeof i?JSON.stringify(i):i.toString().trim():null,""===t||null===i)throw"Wrong custom variable:"+JSON.stringify(Array.from(arguments));"int"===e&&(i=parseInt(i).toString()),"uint"===e&&(i=Math.abs(parseInt(i)).toString()),"float"!==e&&"float64"!==e||(i=realParseFloat(i).toString()),"object"==typeof i&&null!==i&&(i=JSON.stringify(i)||"");var p={N:t.trim(),T:e,V:i};this.customVariables=this.customVariables||[];var f=this.customVariables.findIndex(t=>t.N==p.N);f>-1?this.customVariables[f]=p:this.customVariables.push(p),emitter.emit("added-custom-variable",p)}catch(t){console.error(t,c,"Error while adding TNC Custom Variable")}finally{return this}}removeCustomVariable(t){let e=this.customVariables.findIndex(e=>e.N.toLowerCase()==t.toLowerCase());if(e>-1)return this.customVariables.splice(e,1)[0]}bindWithProps(t,e){const i=t.bind(e),r=Object.getOwnPropertyNames(t);for(const e of r)if("length"!==e&&"name"!==e&&"prototype"!==e)try{i[e]=t[e]}catch(t){this.log(`Non posso copiare la proprietÃ  ${e}:`,t)}return i}get cacheid(){return this._cacheid}set cacheid(t){this._cacheid=t,this.setCookie({name:"cacheid",value:t,duration:365,firstParty:!0})}get CacheID(){return this.cacheid}set CacheID(t){this.cacheid=t}get callback(){return this._cbqueue}set callback(t){void 0!==t&&Array.isArray(t)?t.forEach(t=>{this.callback=t}):"function"==typeof t&&(t._id&&this._cbqueue.some(e=>e._id==t._id)||this._cbqueue.push(this.bindWithProps(t,this)))}get conf(){return this._conf=this._conf.filter(t=>this.validConfig(t)),this._conf}set conf(t){Array.isArray(t)?this._conf=Object.values(t).filter(t=>this.validConfig(t)):this.validConfig(t)&&(this._conf=[t]);var e=(this._conf||[]).findIndex(t=>void 0!==t.p||void 0!==t.e||void 0!==t.st||void 0!==t.pc||void 0!==t.pn),i={};for(e>-1&&(i=this._conf.splice(e,1)[0]),i={...i,p:this.providerId||i.p,st:i.st||"pageview"},this._conf.unshift(i),this.mainConf=this._conf[0];this._conf.length>1;){var r=this._conf.splice(1,1)[0];"object"==typeof r&&null!==r&&this.addCustomVariable(r.n,r.t,r.v)}}get counters(){return this._counters}set counters(t){try{this._counters.domain="object"==typeof t&&null!==t&&void 0!==t.counter?+t.counter:this._counters.domain,this._counters.global="object"==typeof t&&null!==t&&void 0!==t.global?+t.global:this._counters.global}catch(t){}return this._counters}get debug(){return(this.options||{}).debug}set debug(t){t=!!t,this.options.debug=t,this.log.timers=this.log.timers||new Set,1==t?(this.logName=this.logName||`Debug ${this.UUID()} - ${global}`,this.log.timers.has(this.logName)||(this.log.timers.add(this.logName),console.time(this.logName))):0==t&&(this.log.timers.forEach(t=>console.timeEnd(t)),this.log.timers.clear(),this.logName=void 0)}get events(){return Object.values(this.sent).sort((t,e)=>t.timestamp<e.timestamp?-1:+(t.timestamp>e.timestamp)||0)}get hasher(){return this._hasher}get PPID(){return this._ppid}getPPID(){return this._ppid}set PPID(t){try{this._ppid=t;var e=100;let i=async()=>{let t;return this.log("PPID pushdata",e),googletag&&googletag.pubads?(this.log("PPID pushdata","googletage exists"),googletag.pubads().setPublisherProvidedId(this._ppid),googletag.enableServices(),t=this._ppid,this.log("PPID pushdata","PPID pushed",t)):e>0&&(e--,await sleep(50),t=await i()),t};this.waitFor(window,"googletag").then(i)}catch(t){console.log("Error while setting PPID:",t)}}setPPID(t){return this._ppid=t,t&&(async()=>{let e=await this.getTNCID(),i=new URLSearchParams({eid:this.eid,tncid:e,providerId:this.providerId,publisherId:this.options.PublisherID,ppid:t}),r=`${this.script_origin}/im/ppid-collect?${i.toString()}`;this.fetch(r,{headers:{Referer:window.location.href},method:"GET",mode:"cors",credentials:"omit"})})(),this._ppid}get prepare(){return this._prqueue}set prepare(t){void 0!==t&&Array.isArray(t)?t.forEach(t=>{this.prepare=t}):"function"==typeof t&&(t._id&&this._prqueue.some(e=>e._id==t._id)||this._prqueue.push(this.bindWithProps(t,this)))}get publisherId(){return this.options.PublisherID}get PublisherID(){return this.publisherId}set publisherId(t){this.options.PublisherID=t}set PublisherID(t){return this.publisherId=t}get reservedEvents(){return JSON.parse(JSON.stringify(reservedEvents))}get script_origin(){this.log("script_origin",d,cs,this.bd_url);let t=(this.bd_url&&URL?new URL(this.bd_url):cs&&cs.src&&URL?new URL(cs.src):{origin:"https://run.tncid.app"}).origin;return"https://securepubads.g.doubleclick.net"==t?(this.log("script_origin","SecurePubAds is doing something",t),t="https://run.tncid.app"):t||(this.log("script_origin","Missing origin",t),t="https://run.tncid.app"),t}get tncid(){return this._tncid}set tncid(t){if((t=(t||"").toString().trim())&&!t.match(UUIDv4))throw"Wrong tncid assigned";t?this._tncid!==t&&(this._tncid=t,this.emit("tncid",{tncid:t})):this._tncid=void 0;let e=!!t;this.setCookie({name:"tncid",value:t,firstParty:!0,duration:365*+e})}get vendors(){return void 0!==this._vendors||(this.vendors=null),this._vendors}set vendors(t){let e=this,i=this.cachebuster,r=this.script_origin+"/im/gif",n=this.providerId,s=this.options.PublisherID||"",o=async t=>{let e=await this.getTCF();if(!(e.vendors||[]).includes(t))throw`vendor ${t} not allowed because of missing user consent`;return 1==+(e.gdpr||0)?e.tcString:void 0},a={UNDEFINED:0,SYNC_STARTED:1,SYNC_ENDED:2,ID_MATCH_READY:3,ID_MATCH_STARTED:4,ID_MATCH_ENDED:5,ERROR:6};t=t||{adform:{VendorID:"55b2bb61-cdc3-434a-ac07-704b66d42956",IABVendorID:50,async endpoint(){return`https://c1.adform.net/serving/cookie/match?party=1218&cid=${this.eid}|${this.tncid}|${n}|${s}`},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},adobeid:{VendorID:"adobeid",IABVendorID:565,get VendorDeviceUID(){if(this.value)return this.value;let t;"undefined"!=typeof _satellite&&_satellite.company&&_satellite.company.orgId&&(t=("undefined"!=typeof Visitor&&"function"==typeof Visitor.getInstance?Visitor.getInstance(_satellite.company.orgId):_satellite.getVisitorId())||null);let i=t&&t.getMarketingCloudVisitorID()||"";if(t&&!i&&(i=t._fields&&t._fields.MCMID?t._fields.MCMID:""),!i){if(t&&t.getVisitorValues)return new Promise(e=>{t.getVisitorValues(t=>e(t.MCMID||""))});{let t={s_ecid:function(t){var e=decodeURIComponent(t||"").split("|"),i=e.findIndex(t=>"MCMID"==t);return i>-1&&e[i+1]||""},s_vi:function(t){return decodeURIComponent(t)},s_fid:function(t){return decodeURIComponent(t)}};for(var r in t)if(i=e.getCookie(r)||"",i=t[r](i),i)break}}return this.value=i,this.value},set VendorDeviceUID(t){this.value=t}},audiencerate:{VendorID:"182165e5-676d-49c3-8934-aac404e25e83",IABVendorID:742,type:"image",async endpoint(){let t=await o(this.IABVendorID),e=t?`gdpr=1&gdpr_consent=${encodeURIComponent(t)}&`:"gdpr=0&",i=`${r}?eid=${this.eid||""}&tncid=${this.tncid||""}&p=${n||""}&pu=${s}&3puuid=$UID&3pid=${this.VendorID}`;return`https://a.audrte.com/get?${e}p=M895510061&r=${encodeURIComponent(i)}`},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},dynamicyield:{VendorID:"d60f8402-5a2c-4281-9d44-8933b17a0bdb",IABVendorID:null,get VendorDeviceUID(){return this.value=this.value||("object"==typeof DY&&null!==DY&&DY.dyid?DY.dyid:void 0),this.value},set VendorDeviceUID(t){this.value=t}},equativ:{VendorID:"4f7daa00-8479-4d63-91d4-c49c149dabec",IABVendorID:45,type:"image",async endpoint(){let t=await o(this.IABVendorID),e=t?"gdpr=1&gdpr_consent="+encodeURIComponent(t):"gdpr=0",i=`${r}?eid=${this.eid}&tncid=${this.tncid}&p=${n}&pu=${s}&3puuid=[sas_uid]&3pid=${this.VendorID}`;return`https://sync.smartadserver.com/getuid?${e}&url=${encodeURIComponent(i)}`},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},gaid:{VendorID:"gaid",IABVendorID:755,get VendorDeviceUID(){return this.value?this.value:e.getGAID().then(({GAID:t})=>t).then(t=>(this.value=t,this.value))},set VendorDeviceUID(t){this.value=t}},improvedigital:{VendorID:"3f19fb7e-2cb0-47b3-a20e-7f2b93cdad23",IABVendorID:253,async endpoint(){let t=`${r}?eid=${this.eid}&tncid=${this.tncid}&p=${n}&pu=${s}&3puuid={PUB_USER_ID}&3pid=${this.VendorID}`;return"https://ad.360yield.com/ux?publisher_id=908&publisher_dmp_id=14&r="+encodeURIComponent(t)},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},liveramp:{VendorID:"db11b092-c51b-4904-b45f-795e0c0ebc66",IABVendorID:97,type:"image",async endpoint(){let t=await o(this.IABVendorID);return`https://idsync.rlcdn.com/710906.gif?partner_uid=${this.tncid}&ct=4&cv=${t}`},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},neodata:{VendorID:"7c6b220a-3cb1-4c05-8174-c8bec9cde845",IABVendorID:null,type:"image",async endpoint(){let t=`${r}?eid=${this.eid}&tncid=${this.tncid}&p=${n}&pu=${s}&3puuid=@@neo_user_id@@&3pid=${this.VendorID}`;return"https://tra.neodatagroup.com/cm?"+new URLSearchParams({pv:"TNC",sid:this.tncid?1:0,eid:this.tncid||0,rnd:i(),rd:t}).toString()},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},nielsen:{VendorID:"df6b1e0a-aac5-4d38-ab92-0803ad691a3d",IABVendorID:373,async endpoint(){return`https://loadus.exelator.com/load/?p=1541&g=1&buid=${this.eid}|${this.tncid}|${n}|${s}&j=0`},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},pubmatic:{VendorID:"22ddc501-2405-4124-96a6-b12c2f0afda9",IABVendorID:76,type:"fetch"==new URL(w.location.href).searchParams.get("requestType")?"fetch":"image",async endpoint(){let t=await o(this.IABVendorID),e=`${r}?eid=${this.eid}&tncid=${this.tncid}&p=${n}&pu=${s}&3puuid=#PM_USER_ID&3pid=${this.VendorID}`;return`https://image6.pubmatic.com/AdServer/UCookieSetPug?gdpr=1&rd=${encodeURIComponent(e)}&gdpr_consent=${encodeURIComponent(t)}`},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},tealium:{VendorID:"e29f3c5b-11b6-47fe-9464-65686f290972",IABVendorID:373,get VendorDeviceUID(){return this.value=this.value||("undefined"!=typeof utag&&utag&&utag.data&&utag.data["cp.utag_main_v_id"]?utag.data["cp.utag_main_v_id"]:void 0),this.value},set VendorDeviceUID(t){this.value=t}},ttd:{VendorID:"5db8fb88-d21d-4930-961b-b062ea59c0c9",IABVendorID:21,async endpoint(){let t=await o(this.IABVendorID),e=+!!t,i=this.tncid,r=this.eid,a=this.VendorDeviceUID,h=new URLSearchParams({...r&&{eid:r},...i&&{tncid:i},...n&&{p:n},...s&&{pu:s}}).toString();return"https://match.adsrvr.org/track/cmf/generic?"+new URLSearchParams({...!a&&{ttd_pid:"ghui0ta"},...a&&{ttd_id:a},...i&&{ttd_puid:i},ttd_tpi:1,gdpr:e,...e&&{gdpr_consent:t},...h&&{ttd_passthrough:h},...(!e||!t)&&window.location.hostname&&{domain:window.location.hostname}}).toString()},get VendorDeviceUID(){return this.value=this.value||e.getCookie("ttd_id"),this.value},set VendorDeviceUID(t){this.value=t}},weborama:{VendorID:"a0f846a5-be22-4884-b857-fa3a0cda1601",IABVendorID:284,async endpoint(){let t=`${r}?eid=${this.eid}&tncid=${this.tncid}&p=${n}&pu=${s}&3puuid={WEBO_CID}&3pid=${this.VendorID}`;return"https://redirect.frontend.weborama.fr/redirect/standard?url="+encodeURIComponent(t)},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}},xandr:{VendorID:"f55a3084-694f-4cde-8690-baf77cc1de98",IABVendorID:32,async endpoint(){let t=`${r}?eid=${this.eid}&tncid=${this.tncid}&p=${n}&pu=${s}&3puuid=$UID&3pid=${this.VendorID}`;return"https://secure.adnxs.com/getuidnb?"+encodeURIComponent(t)},get VendorDeviceUID(){return this.value},set VendorDeviceUID(t){this.value=t}}},Object.keys(t).forEach(i=>{let s,o={};t[i].name=i,t[i].eid="",t[i].tncid="",t[i].observe=async function(t,e){o[t]=o[t]||[],-1==(o[t]||[]).findIndex(e)&&o[t].push(e)}.bind(t[i]),t[i].unobserve=async function(t,e){let i=(o[t]||[]).findIndex(e);i>-1&&o[t].splice(i,1)}.bind(t[i]),Object.defineProperty(t[i],"status",{enumerable:!0,get:()=>s||a.UNDEFINED,set(t){e.log("Changed vendor status",i,s,t),s=t,Array.isArray(o.status)&&o.status.forEach(t=>t(this))}}),t[i].sync=async function(t={}){try{if("function"!=typeof this.endpoint)return e.log(`the tag "${this.name}" doesn't need an endpoint for syncing`),this;if(this.status>a.SYNC_STARTED)return this;if(this.status==a.SYNC_STARTED)return await this.wait(a.SYNC_ENDED),this;if(t=t||{},this.tncid=this.tncid||t.tncid||"",this.eid=this.eid||t.eid||"",!e.options.scripts.includes(i)&&!e.options.scripts.includes(i.replace(/[\-_]+/gim,"")))throw`the script ${this.name} wouldn't be fired`;if(!this.VendorID)throw"missing VendorID for cookie sync with "+this.name;let r=await this.VendorDeviceUID;if(r&&(this.VendorDeviceUID=r,this.status=Math.max(this.status,this.eid&&this.tncid?a.ID_MATCH_READY:a.SYNC_ENDED)),this.status>a.SYNC_STARTED)throw null;if(this.type&&"image"==this.type&&(!this.tncid||!this.eid))return e.log(`can't sync images tag for ${this.name} without tncid and eid`),this.status=a.SYNC_ENDED,this;this.status=a.SYNC_STARTED;let n=await this.endpoint();if(!n)throw`missing or wrong endpoint for vendor ${this.name} for cookieSync`;if(this.type&&"image"==this.type){this.status=a.ID_MATCH_STARTED,e.log(`loading ${this.name} as image`);let t={height:0,width:0,tabindex:-1,"aria-hidden":!0,style:"position:absolute!important;top:0px!important;left:0px!important;width:0!important;height:0!important;border:0!important;"};await e.loadIMG(n,t),this.status=a.ID_MATCH_ENDED}else{e.log(`loading ${this.name} via fetch`,this);let t=await fetch(n,{method:"GET",mode:"cors",credentials:"include"});if(t&&t.ok){let e=new URL(t.url).searchParams;this.VendorDeviceUID=e.get("3puuid")||""}}}catch(t){t&&e.log("LIST VENDOR ERROR",i,this.status,t),t&&(this.status=a.ERROR)}return this.status=Math.max(this.status,a.SYNC_ENDED),this}.bind(t[i]),t[i].idmatch=async function(t={}){try{if(t=t||{},this.tncid=this.tncid||t.tncid||"",this.eid=this.eid||t.eid||"",this.status>a.ID_MATCH_READY)return this;let e=await this.VendorDeviceUID;if(this.status<a.ID_MATCH_READY&&this.VendorID&&e&&this.eid&&this.tncid&&(this.VendorDeviceUID=e,this.status=a.ID_MATCH_READY),this.status<a.ID_MATCH_READY)throw`id match: wrong status for ${this.name}. status.ID_MATCH_READY is mandatory`;if(!this.VendorID)throw this.name+": missing VendorID";if(!e)throw this.name+": missing VendorDeviceUID";if(!this.eid)throw this.name+": missing eid";if(!this.tncid)throw this.name+": missing tncid";let i=new URLSearchParams({eid:this.eid,tncid:this.tncid,p:n,"3pid":this.VendorID,"3puuid":e}).toString();this.status=a.ID_MATCH_STARTED;let s=await fetch(`${r}?${i}`,{method:"GET",mode:"cors",credentials:"omit"});return this.status=s.ok?a.ID_MATCH_ENDED:a.ERROR,s.ok}catch(t){e.log("ID MATCH VENDOR",i,this.status,t),this.status=a.ERROR}return!1}.bind(t[i]);let h={};for(let e in a)h[e]=new Promise(r=>{let n=()=>{t[i].status>=e&&(t[i].unobserve("status",n),r(t[i].status))};t[i].observe("status",n)});t[i].wait=async function(t=a.UNDEFINED){return await(h[t]||void 0)}}),this._vendors=t,Object.defineProperty(this._vendors,"statuses",{enumerable:!1,get:()=>a})}get WWFetch(){return this._WWFetch}set WWFetch(t){const e="file:"==w.location.protocol?"https:":w.location.protocol,i=(...t)=>{let i={url:"",options:{}},r=t.shift()||{};return"string"==typeof r?(i.url=r,i.options=t[0]||{}):"object"==typeof r&&(i.url=r.url||"",i.options=r),i.url=(i.url||"").replace(/^\/\//,e+"//"),i};try{const t=`let controllers = {};\n\t\t\t\tself.onmessage = function(event) {\n\t\t\t\t\tconst { requestId, request, abort } = event.data;\n\t\n\t\t\t\t\tif (controllers[requestId] && abort) {\n\t\t\t\t\t\tcontrollers[requestId].abort();\n\t\t\t\t\t\tdelete controllers[requestId];\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tcontrollers[requestId] = new AbortController();\n\t\t\t\t\tconst signal = controllers[requestId].signal;\n\t\n\t\t\t\t\tlet { url, options } = request; // riceve l'url del file (o piÃ¹ parametri) dal main thread\n\t\t\t\t\turl = (url||'').replace(/^\\/\\//,'${e}//');\n\t\n\t\t\t\t\toptions = {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tsignal\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tfetch(url, options)\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t\tthrow new Error('Error ' + response.status);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn response.text();\n\t\t\t\t\t})\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\tself.postMessage({ requestId, data });\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\tself.postMessage({ requestId, error: error.name === 'AbortError' ? 'Aborted request' : error.message });\n\t\t\t\t\t});\n\t\t\t\t}`,r=new Blob([t],{type:"application/javascript"}),n=URL.createObjectURL(r),s=new Worker(n);let o={};this._WWFetch=(...t)=>{let e=i(...t),r=e.options.controller||null;return delete e.options.controller,delete e.options.signal,new Promise((t,i)=>{const n=this.UUID();o[n]={resolve:t,reject:i},r&&(r.abort=()=>{s.postMessage({requestId:n,request:{},abort:!0})}),s.onmessage=t=>{let e=t&&t.data?t.data.requestId:null,i=t&&t.data?t.data.error:null,r=t&&t.data?t.data.data:null;e&&o[e]&&(i?o[e].reject(i):o[e].resolve(r),delete o[e])},s.postMessage({requestId:n,request:e})})}}catch(t){this._WWFetch=function(...t){let{url:e,options:r}=i(...t);return fetch(e,r).then(t=>t.text()).catch(t=>{throw t&&"AbortError"==t.name?new Error("Aborted request"):t})}}}get fetch(){return this._fetch}set fetch(t){this._fetch=(...t)=>{let{url:e,options:i}=((...t)=>{const e="file:"==w.location.protocol?"https:":w.location.protocol;let i={url:"",options:{}},r=t.shift()||{};return"string"==typeof r?(i.url=r,i.options=t[0]||{}):"object"==typeof r&&(i.url=r.url||"",i.options=r),i.url=(i.url||"").replace(/^\/\//,e+"//"),i})(...t);i=i||{};let{returns:r}=i;return delete i.returns,i.controller&&i.controller.signal&&!i.signal&&(i.signal=i.controller.signal),new Promise(async(t,n)=>{fetch(e,i).then(e=>{if(200!==e.status)throw e;t("response"==r?e:e.text())}).catch(t=>{t&&"AbortError"==t.name?n("aborted request"):n(t&&t.message?t.message:t)})})}}validConfig(t){return"object"==typeof t&&null!==t&&(t.hasOwnProperty("n")&&"string"==typeof t.n&&t.hasOwnProperty("t")&&"string"==typeof t.t&&t.hasOwnProperty("v")||t.hasOwnProperty("p")&&"string"==typeof t.p&&""!==t.p||t.hasOwnProperty("st")&&("string"==typeof t.st||null===t.st)||t.hasOwnProperty("e")&&("string"==typeof t.e||"object"==typeof t.e)||t.hasOwnProperty("pc")&&("string"==typeof t.pc||"object"==typeof t.pc)||t.hasOwnProperty("pn")&&("string"==typeof t.pn||"object"==typeof t.pn)||1==Object.keys(t).length&&"string"==typeof Object.keys(t)[0])}}class TNCEventEmitter{on(t,e,i){return this[t]=this[t]||{listeners:[],onces:[]},"boolean"==typeof e&&(i=e,e=void 0),this[t].onces.push(!!i),void 0!==e&&"function"!=typeof e&&(e=function(){return e}),void 0!==e?(this[t].listeners.push(e),this):new Promise(e=>{this[t].listeners.push(e)})}dispatch(t,e){var i=(this[t]||{}).listeners,r=(this[t]||{}).onces||[];if(void 0!==i&&Array.isArray(i)){i.forEach(t=>{"function"==typeof t&&t(e)});do{var n=r.indexOf(!0);n>-1&&(i.splice(n,1),r.splice(n,1))}while(n>-1);0==this[t].listeners.length&&delete this[t]}return this}emit(t,e){return this.dispatch(t,e)}fire(t,e){return this.dispatch(t,e)}listen(t,e,i){return this.on(t,e,i)}off(t,e){try{return setTimeout(()=>{if("function"!=typeof e)delete this[t];else if(void 0!==this[t]&&Array.isArray((this[t]||{}).listeners)){do{var i=this[t].listeners.indexOf(e);i>-1&&this[t].listeners.splice(i,1),i>-1&&this[t].onces.splice(i,1)}while(i>-1);0==this[t].listeners.length&&delete this[t]}},0),this}catch(t){console.log(t)}}remove(t,e){return this.off(t,e)}trigger(t,e){return this.dispatch(t,e)}}class TCF2ConsentString{defaultVendorListVersion=109;maxVendors={48:1053,109:1053,default:1053};binMap={core:{version:6,created:36,lastUpdated:36,cmpId:12,cmpVersion:12,consentScreen:6,consentLanguage:12,vendorListVersion:12,policyVersion:6,isServiceSpecific:1,useNonStandardStacks:1,specialFeatureOptins:12,purposeConsents:24,purposeLegitimateInterests:24,purposeOneTreatment:1,publisherCountryCode:12,vendorConsents:!0,vendorLegitimateInterests:!0,publisherRestrictions:!0},disclosedVendors:{segmentType:3},publisherTC:{segmentType:3,purposeConsents:24,purposeLegitimateInterests:24,numCustomPurposes:6}};constructor(t={}){try{t.core=t.core||{},this.vendorListVersion=parseInt(t.core.vendorListVersion||this.defaultVendorListVersion);let e=new Date,i=new Date(t.core.created||+e),r=new Date(t.core.lastUpdated||+e);this.data={core:{version:parseInt(t.core.version)>0?parseInt(t.core.version):2,created:Math.round(i.getTime()/100),lastUpdated:Math.round(r.getTime()/100),cmpId:parseInt(t.core.cmpId||0),cmpVersion:parseInt(t.core.cmpVersion||0),consentScreen:parseInt(t.core.consentScreen||0),consentLanguage:t.core.consentLanguage||"IT",vendorListVersion:this.vendorListVersion,policyVersion:parseInt(t.core.policyVersion||2),isServiceSpecific:"boolean"!=typeof t.core.isServiceSpecific||t.core.isServiceSpecific,useNonStandardStacks:"boolean"==typeof t.core.useNonStandardStacks&&t.core.useNonStandardStacks,specialFeatureOptins:t.core.specialFeatureOptins||{1:!0,2:!0},purposeConsents:t.core.purposeConsents||{1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0},purposeLegitimateInterests:t.core.purposeLegitimateInterests||{1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0},purposeOneTreatment:!!t.core.purposeOneTreatment,publisherCountryCode:t.core.publisherCountryCode||"IT",vendorConsents:t.core.vendorConsents||this.allVendors(),vendorLegitimateInterests:t.core.vendorLegitimateInterests||this.allVendors(),publisherRestrictions:t.core.publisherRestrictions||{}},disclosedVendors:t.disclosedVendors||this.allVendors(),publisherTC:t.publisherTC||{purposeConsents:{},purposeLegitimateInterests:{},numCustomPurposes:0,customPurposeConsents:{},customPurposeLegitimateInterests:{}}}}catch(t){console.log(t)}}allVendors(){return Object.keys(new Array(this.maxVendors[this.vendorListVersion])).reduce((t,e)=>(t[e+1]=!0,t),{})}binConvert(t,e){if(t="boolean"==typeof t?+t:t,!isNaN(parseFloat(t))){for(t=t.toString(2);t.length<e;)t="0"+t;return t}}btoa(t){try{t instanceof Uint8Array||(t=(new TextEncoder).encode("string"==typeof t?t:JSON.stringify(t)),t=new Uint8Array(t));for(var e=[],i=t,r=0,n=i.byteLength;r<n;r++)e.push(String.fromCharCode(i[r]));return btoa(e.join(""))}catch(t){console.log(t)}}atob(t){try{return(new TextDecoder).decode(Uint8Array.from(atob(t),t=>t.charCodeAt(0)))}catch(t){console.log(t)}}binToBase64(t){for(;t.length%8!=0;)t+="0";let e,i=[];for(var r=0,n=t.length;r<n;r+=8)i.push(parseInt(t.substr(r,8),2));return e="undefined"!=typeof Buffer&&null!==Buffer&&"function"==typeof Buffer.from?Buffer.from(String.fromCharCode(...i),"ascii").toString("base64"):this.btoa(new Uint8Array(i)),e.split("=")[0].replace(/[\+]/g,"-").replace(/[\/]/g,"_")}getVendorRanges(t){let e=[];try{Object.keys(t).map(t=>parseInt(t)).sort((t,e)=>t>e?1:t<e?-1:0).forEach(i=>{let r=e.length?e[e.length-1]:null;void 0!==t[i]&&!1!==t[i]&&(!r||Math.max(r.StartOrOnlyVendorId,0==r.isARange?r.StartOrOnlyVendorId:r.EndVendorId)<i-1?(r={isARange:0,StartOrOnlyVendorId:i},e.push(r)):(r.isARange=1,r.EndVendorId=i))})}catch(t){console.log(t)}return e}getVendorsSection(t){var e="",i="",r="",n=this.getVendorRanges(t),s=Math.min(this.maxVendors[this.vendorListVersion],n.length?n[n.length-1].EndVendorId||n[n.length-1].StartOrOnlyVendorId:0),o=n.length;e+=this.binConvert(s,16);let a=this.binConvert(0,s).split("");Object.keys(t||{}).forEach(e=>{1==t[e]&&(a[parseInt(e)-1]=1)}),i+=a.join(""),r+=this.binConvert(o,12),o&&n.forEach(t=>{r+=this.binConvert(t.isARange,1),r+=this.binConvert(t.StartOrOnlyVendorId,16),t.isARange&&t.EndVendorId&&(r+=this.binConvert(t.EndVendorId,16))});var h=r.length<i.length;return e+=this.binConvert(h,1),e+=h?r:i}encodeCoreString(t){try{var e="";return Object.entries(this.binMap.core).forEach(([i,r])=>{var n="";if(["specialFeatureOptins","purposeConsents","purposeLegitimateInterests"].includes(i)){var s=this.binConvert(0,isNaN(r)?r():r).split("");Object.keys(t[i]).forEach(e=>{1==t[i][e]&&(s[parseInt(e)-1]=1)}),n+=s.join("")}else if(["vendorConsents","vendorLegitimateInterests"].includes(i))n+=this.getVendorsSection(t[i]);else if(["publisherRestrictions"].includes(i)){var o=Object.keys(t[i]);n+=this.binConvert(o.length,12),[0,1,2,3].forEach(e=>{o.forEach(r=>{let s=this.getVendorRanges(Object.keys(t[i][r]||{}).filter(n=>t[i][r][n]==e));n+=this.binConvert(r,6),n+=this.binConvert(e,2),n+=this.binConvert(s.length,12),s.forEach(t=>{n+=this.binConvert(t.isARange,1),n+=this.binConvert(t.StartOrOnlyVendorId,16),t.isARange&&t.EndVendorId&&(n+=this.binConvert(t.EndVendorId,16))})})})}else if(["consentLanguage","publisherCountryCode"].includes(i)){let e="A".charCodeAt(0),r=(t[i]||"").toUpperCase()+"IT";n+=this.binConvert(r.charCodeAt(0)-e,6),n+=this.binConvert(r.charCodeAt(1)-e,6)}else n+=this.binConvert(t[i],isNaN(r)?r():r);e+=n}),this.binToBase64(e)}catch(t){throw t}}encodeDisclosedVendors(t){try{var e="";return Object.keys(t).length&&(e+=this.binConvert(1,3),e+=this.getVendorsSection(t)),this.binToBase64(e)}catch(t){throw t}}encodePublisherTC(t){try{if(Object.keys(t.purposeConsents).length+Object.keys(t.purposeLegitimateInterests).length+parseInt(t.numCustomPurposes)===0)return"";var e=this.binConvert(3,3);return Object.entries(this.binMap.publisherTC).forEach(([i,r])=>{var n="",s=isNaN(r)?r():r;if(["purposeConsents","purposeLegitimateInterests"].includes(i)){var o=this.binConvert(0,s).split("");Object.keys(t[i]).forEach(e=>{1==t[i][e]&&(o[parseInt(e)-1]=1)}),n+=o.join("")}else if("numCustomPurposes"==i)n+=this.binConvert(t[i]||0,s);else if(["customPurposeConsents","customPurposeLegitimateInterests"].includes(i)&&parseInt(t.numCustomPurposes)>0)for(var a=0,h=parseInt(t.numCustomPurposes);a<h;a++)n+=this.binConvert(+t[i],1);e+=n}),this.binToBase64(e)}catch(t){throw t}}encode(t){try{var e=this;"object"==typeof t&&null!==t&&"object"==typeof t.core&&null!==t.core&&(e=new this.constructor(t));var i=e.encodeCoreString(e.data.core),r=e.encodeDisclosedVendors(e.data.disclosedVendors),n=e.encodePublisherTC(e.data.publisherTC),s={coreString:i,...r&&{disclosedVendorsString:r},...n&&{publisherTCString:n}};return Object.values(s).join(".")}catch(t){console.log(t)}}__toString(){return this.encode()}}class Hasher{_parent;_email;_phoneWCC;_phoneNCC;constructor({parent:t}){this._parent=t,this.reset()}get email(){return this._email}set email(t){if(this._email={lowercase:{md5:"",sha1:"",sha256:""},uppercase:{md5:"",sha1:"",sha256:""}},"object"==typeof t&&null!==t&&Object.keys(t).length)t.lowercase||t.uppercase?this._email={lowercase:{...this._email.lowercase,...t.lowercase},uppercase:{...this._email.uppercase,...t.uppercase}}:this._email={lowercase:{...this._email.lowercase,...t},uppercase:{...this._email.uppercase,...t}};else if(null!==(t=(null!=t&&t.toString&&"undefined"!==t.toString().toLowerCase()?t.toString():"").replace(/[\s]+/g,"").replace(/^m(d5)?(\:|\|){1}/gim,"").replace(/^s(ha)?1(\:|\|){1}/gim,"").replace(/^s(ha)?2(56)?(\:|\|){1}/gim,"")).replace(/[0-9]+/gim,"").match(/^[a-z]+$/gim))this._email={lowercase:{md5:32===t.length?t.toLowerCase():"",sha1:40===t.length?t.toLowerCase():"",sha256:64===t.length?t.toLowerCase():""},uppercase:{md5:"",sha1:"",sha256:""}};else if(""!=t&&t.indexOf("@")>-1){var e=t.toLowerCase(),i=t.toUpperCase();this._email={lowercase:{md5:this._parent.md5(e),sha1:this._parent.sha1(e),sha256:this._parent.sha256(e)},uppercase:{md5:this._parent.md5(i),sha1:this._parent.sha1(i),sha256:this._parent.sha256(i)}}}return this._email}get phoneWCC(){return this._phoneWCC}set phoneWCC(t){return this._phoneWCC={md5:"",sha1:"",sha256:""},"object"==typeof t&&null!==t?this._phoneWCC={...this._phoneWCC,...t||{}}:null!==(t=(null!=t&&t.toString&&"undefined"!==t.toString().toLowerCase()?t.toString().trim():"").replace(/[\s]+/g,"").replace(/^m(d5)?(\:|\|){1}/gim,"").replace(/^s(ha)?1(\:|\|){1}/gim,"").replace(/^s(ha)?2(56)?(\:|\|){1}/gim,"").replace(/^00/gim,"+")).replace(/[0-9]+/gim,"").match(/^[a-z]+$/gim)?this._phoneWCC={md5:32===t.length?t.toLowerCase():"",sha1:40===t.length?t.toLowerCase():"",sha256:64===t.length?t.toLowerCase():""}:t.match(/^\+[0-9]+/gim)&&(this._phoneWCC={md5:this._parent.md5(t),sha1:this._parent.sha1(t),sha256:this._parent.sha256(t)}),this._phoneWCC}get phoneNCC(){return this._phoneNCC}set phoneNCC(t){return this._phoneNCC={md5:"",sha1:"",sha256:""},"object"==typeof t&&null!==t?this._phoneNCC={...this._phoneNCC,...t||{}}:null!==(t=(null!=t&&t.toString&&"undefined"!==t.toString().toLowerCase()?t.toString().trim():"").replace(/[\s]+/g,"").replace(/^m(d5)?(\:|\|){1}/gim,"").replace(/^s(ha)?1(\:|\|){1}/gim,"").replace(/^s(ha)?2(56)?(\:|\|){1}/gim,"")).replace(/[0-9]+/gim,"").match(/^[a-z]+$/gim)?this._phoneNCC={md5:32===t.length?t.toLowerCase():"",sha1:40===t.length?t.toLowerCase():"",sha256:64===t.length?t.toLowerCase():""}:t.match(/^[0-9]+/gim)&&(this._phoneNCC={md5:this._parent.md5(t),sha1:this._parent.sha1(t),sha256:this._parent.sha256(t)}),this._phoneNCC}check(t=""){return"email"===t?Object.values(this.email.lowercase).join("")+Object.values(this.email.uppercase).join("")!="":"phoneWCC"===t||"phoneNCC"===t?""!=Object.values(this[t]).join(""):t?void 0:this.check("email")&&this.check("phoneWCC")&&this.check("phoneNCC")}toString(){return JSON.stringify({email:this.email,phoneWCC:this.phoneWCC,phoneNCC:this.phoneNCC})}compress(t={toEncodedURIComponent:!0}){return this._parent.lz[t&&t.toEncodedURIComponent?"compressToEncodedURIComponent":"compress"](this.toString())}decompress(t){var e=this._parent.lz.decompress(t),i=this._parent.lz.decompressFromEncodedURIComponent(t);return t==this._parent.lz.compress(e)?e:i}load(t){try{return t="string"==typeof t?JSON.parse(t):t,this.email=t.email||"",this.phoneWCC=t.phoneWCC||"",this.phoneNCC=t.phoneNCC||"",this}catch(e){try{return this.load(this.decompress(t))}catch(t){throw"Invalid json"}}}reset(){this.email="",this.phoneWCC="",this.phoneNCC=""}}class TNC extends GettersSetters{TCF2=new TCF2ConsentString;GetFonts=GetFonts;readyQueue=[];remoteFileLoaded={};remoteFileLoading={};constructor(t){super(),emitter=new TNCEventEmitter,this.readyQueue="function"==typeof t.ready&&Array.isArray(t.ready.q)?t.ready.q:[];try{delete t.sendData,delete t.addCustomVariable,delete t.ready,delete t.sleep,delete t.emit,delete t.log,delete t.fonts}catch(t){}var e=(t.options||{}).publisher,i=t.publisherId,r=t.providerId||void 0!==cs&&cs&&(cs.getAttribute("publisherId")||params.get("publisherId")||cs.getAttribute("providerId")||params.get("providerId"))||null;t.providerId=e&&i?this.getProviderIDByDomain(i):r,Object.assign(this,t),this.eid=this.eid||this.UUID(),this.data=this.data||{},this.metadata=this.metadata||{},this.options=this.options||{},this.modules=this.modules||{},this.customVariables=this.customVariables||[];var n=(params.get("autostart")||"").toLowerCase();void 0===this.options.autostart&&["1","0","true","false"].includes(n)&&(this.options.autostart=!!JSON.parse(n)),this.debug=this.debug||this.options.debug||"debug"==params.get("tnc")||"debug"==params.get("tncid")||"debug"==params.get("tncjs")||"debug"==windowParams.get("tnc")||"debug"==windowParams.get("tncid")||"debug"==windowParams.get("tncjs"),this.log("TNC Script",e?"Publisher":"Standard",i,r,this.providerId),(this.options.scripts||[]).filter(t=>"function"==typeof t).forEach(t=>t.apply(this)),this.sent=this.sent||{},this.bd_url=this.script_origin+bd_url,this.version=version,this.tncid=this.tncid||this.getCookie("tncid")||(w.localStorage?w.localStorage.getItem("tncid"):void 0),this.adBlock=adBlock,this.audioFP=async()=>{if(isFF){let t=this.md5("tnc:afp"),e={name:t,value:this.getCookie(t)||this.UUID(),duration:3650,firstParty:!0};return this.setCookie(e),await e.value}return await audioFP()},this.browserMatch=browserMatch,this.canvasFP=async()=>{if(isFF){let t=this.md5("tnc:cfp"),e={name:t,value:this.getCookie(t)||this.UUID(),duration:3650,firstParty:!0};return this.setCookie(e),await e.value}return await canvasFP()},this.doNotTrack=doNotTrack,this.getOrientation=getOrientation,this.osMatch=osMatch,this.pixelRatio=pixelRatio,this.pluginList=pluginList,this.touchScreenSupport=touchScreenSupport,this.webglFP=webglFP,this.webglVR=webglVR}abort(t){if(this.abort.queue="undefined"!==this.abort.queue&&Array.isArray(this.abort.queue)?this.abort.queue:[],void 0!==t&&t&&"function"==typeof t.abort){var e=this.abort.queue.indexOf(t);e>-1?(t.abort(),this.abort.queue.splice(e,1)):this.abort.queue.push(t)}else for(;this.abort.queue.length;){(t=this.abort.queue.shift())&&"function"==typeof t.abort&&t.abort()}return this}applyCallbacks(t){if(void 0!==this.callback&&("function"==typeof this.callback||Array.isArray(this.callback))){"function"==typeof this.callback&&(this.callback=[this.callback]);let e=t&&t.eid?{eid:this.sent[t.eid]}:this.sent;Object.values(e).forEach(t=>{this.callback.forEach(e=>{try{e.call(this,t)}catch(t){this.log(t)}})})}return Promise.resolve(t)}applyPrepares(){return"function"==typeof this.prepare||Array.isArray(this.prepare)?("function"==typeof this.prepare&&(this.prepare=[this.prepare]),Promise.all(this.prepare.map(t=>t.call(this)))):Promise.resolve(!0)}async audiences(t={}){let{ownerid:e,tags:i,output:r,limit:n}=t;if(!e)throw"missing ownerid. Please ask TNC for this value";let s={ownerid:e,tncid:await this.getTNCID(),tags:i||[],output:r||"json",limit:void 0!==n?parseInt(n):1e3},o=await fetch(this.script_origin+"/ud/audiences",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(s)}),{data:a,error:h}=await o.json();if(null!=h)throw h;let{audiences:c}=a;return c||("string"==s.output?"":[])}cachebuster(){return Math.random().toString().replace(/^0\./gim,"")}clearCustomVariables(){this.customVariables=[]}async CustomEvent(t,e){return await new Promise((i,r)=>{try{let r=new CustomEvent(t,{detail:e});w.dispatchEvent(r),setTimeout(i,0)}catch(t){r(t)}})}get CustomVariable(){return this.getCustomVariable}set CustomVariable({N:t,n:e,Name:i,name:r,T:n,t:s,Type:o,type:a,V:h,v:c,Value:d,value:l}){t=void 0!==t?t:void 0!==e?e:void 0!==i?i:r,n=void 0!==n?n:void 0!==s?s:void 0!==o?o:a,h=void 0!==h?h:void 0!==c?c:void 0!==d?d:l,this.addCustomVariable(t,n,h)}get CustomVariables(){return this.getCustomVariables()}emit(){if(reservedEvents.includes(arguments[0]||null))throw"Error. Attempt to trigger a reserved event.";return emitter.emit(...arguments),this}exists(t,e,i,r,n){if("string"!=typeof t)return Promise.reject(!1);for(var s=window,o=t.split(".");o.length;)try{s=s[o.shift()]}catch(t){s=void 0}return void 0!==s&&typeof s===e?Promise.resolve(!0):(r=isNaN(r)||r<1||r>10?10:Math.floor(r),i=!isNaN(i)&&i>-1&&i<r?Math.floor(i):i>=r?-1:0,n=isNaN(n)||n<150||n>2e3?250:Math.floor(n),-1===i?Promise.reject(!1):new Promise((s,o)=>{setTimeout(()=>this.exists(t,e,++i,r,n).then(s).catch(o),n)}))}async fonts(){if(this.options.exclude&&this.options.exclude.includes("fonts"))return{};let t=new this.GetFonts({version:"v2020",tnc:this}),[e,i]=await Promise.all([t.get(),Promise.resolve({})]);return{fonts:e,preferences:i}}getAdobeID(t=200){return this.getAnyID({name:"AdobeID",cookies:{s_ecid:function(t){var e=decodeURIComponent(t||"").split("|"),i=e.findIndex(t=>"MCMID"==t);return i>-1&&e[i+1]||""},s_vi:function(t){return decodeURIComponent(t)},s_fid:function(t){return decodeURIComponent(t)}},globalObjectName:"Visitor",callback:()=>new Promise((t,e)=>{try{let e;"undefined"!=typeof _satellite&&_satellite.company&&_satellite.company.orgId&&(e=("undefined"!=typeof Visitor&&"function"==typeof Visitor.getInstance?Visitor.getInstance(_satellite.company.orgId):_satellite.getVisitorId())||null);let i=e&&e.getMarketingCloudVisitorID()||"";e&&!i&&(i=e._fields&&e._fields.MCMID?e._fields.MCMID:""),e&&!i&&e.getVisitorValues?e.getVisitorValues(e=>t(e.MCMID||"")):t(i)}catch(t){e(t)}}),dismissAfter:t})}getAnyID({name:t="",cookies:e=[],cookieParser:i,globalObjectName:r="",callback:n,dismissAfter:s=200}){let o={[t]:""},a=Array.isArray(e)?e:"object"==typeof e&&null!==e?Object.keys(e):[];for(var h=0,c=a.length;h<c;h++){let r=a[h],n=this.getCookie(r);if(n){let s=Array.isArray(e)?i:e[r];if("function"==typeof s&&(n=s(n)),n)return o[t]=n,Promise.resolve(o)}}return"string"==typeof r?this.waitFor(window,r,s).then(()=>"function"!=typeof n?(o[t]=window[r],o):n()).then(e=>(o[t]=e,o)).catch(e=>{o[t]=""}).then(()=>o):Promise.resolve(o)}async getCacheID(){return this.cacheid=this.cacheid||this.getCookie("cacheid")||window.localStorage.getItem("cacheid")||+Date.now()+"."+Math.random().toString().replace("0.",""),emitter.emit("cacheid-found",this.cacheid),{CacheID:this.cacheid}}getConfig(){return this.conf=this.conf||[],this.conf}getCookie(t){let e=("; "+document.cookie).match(`;\\s*${t}=([^;]+)`);return e?e[1]:""}getCustomVariable(t){try{return this.getCustomVariables().find(e=>e.N==t)||void 0}catch(t){return}}getCustomVariables(){return this.customVariables=this.customVariables||[],this.customVariables}async getGAID(){let t;try{if(void 0!==this.getGAID.vid&&(t=this.getGAID.vid),t||"undefined"==typeof gtag||(t=await new Promise(async t=>{this.log("TNC - GA4");let e=Array.from(document.querySelectorAll('script[src*="gtag/js"]')).map(t=>t.src.match(/id=[^&]*/gim)).flat().filter(Boolean).map(t=>t.split("=")[1]||"").filter(Boolean),i=await Promise.allSettled((e||[]).map(t=>new Promise(e=>{gtag("get",t,"client_id",i=>{e(i?`${t}|${i}`:void 0)}),setTimeout(()=>{e(void 0)},50)})));i=i.filter(t=>"fulfilled"==t.status&&!!t.value).map(t=>t.value),t(i[0])})),t||"undefined"==typeof ga||(this.log("TNC - Google Analytics"),t=await new Promise(t=>{try{let e=setTimeout(()=>{this.log("no ga found"),t(void 0)},50);ga(i=>{clearTimeout(e),i=i||(ga.getAll()||[])[0],setTimeout((function(){let e=i?[i.get("trackingId"),i.get("clientId")]:[];t(e[0]&&e[1]?e.join("|"):void 0)}),0)})}catch(e){this.log(e),t(void 0)}})),t||"undefined"==typeof _gaq||(this.log("TNC - GA Legacy"),t=await new Promise(t=>{try{let e=setTimeout(()=>{this.log("no _gaq found"),t(void 0)},50);_gaq.push(()=>{clearTimeout(e);try{var i=_gat._getTrackers()[0],r=i._getAccount(),n=i._visitCode();t(`${r}|${n}`)}catch(e){this.log(e),t(void 0)}})}catch(e){t(void 0)}})),!t){this.log("TNC - GA Cookie");const e=document.cookie.split("; ").find(t=>t.startsWith("_ga="));e&&(t=e.split("=")[1].split(".").slice(2).join("."),t=t?`${this.providerId||""}|${t}`:void 0)}t||"undefined"==typeof gaGlobal||(this.log("TNC - GA via gaGlobal"),t=gaGlobal.vid||gaGlobal.visitorId||void 0,t=t?`${this.providerId||""}|${t}`:void 0)}catch(t){this.log(t)}return this.getGAID.vid=t,{GAID:t}}getGDPRConsentString(){if(!this.gdpr_consent)if(this.conf&&this.conf.length)this.gdpr_consent=this.conf.filter(t=>void 0!==t.n&&"gdpr_consent"===t.n).reduce((t,e)=>t+(e.v||""),"");else{var t=this.CustomVariable("gdpr_consent");this.gdpr_consent=t?t.v:""}return this.gdpr_consent}getGTM(t="GTM"){try{return t=t||"GTM","undefined"!=typeof google_tag_manager?(Object.entries(google_tag_manager).find(([e])=>e.startsWith(t))||[void 0,void 0])[1]:void 0}catch(t){return void this.log(t)}}getDYID(t=200){return this.getAnyID({name:"DYID",cookies:["DYID","_dyid"],globalObjectName:"DY",callback:function(){return"object"==typeof DY&&null!==DY?DY.dyid:""},dismissAfter:t})}async getGeolocation(t){let e,i;if(navigator.permissions){let r=await navigator.permissions.query({name:"geolocation"});if(t||"granted"===r.state)try{let{coords:t}=await new Promise((t,e)=>navigator.geolocation.getCurrentPosition(t,e));({latitude:e,longitude:i}=t)}catch(t){this.log("Errore nel recupero della posizione:",t)}else this.log("Geolocalizzazione non autorizzata.")}else this.log("API Permissions non supportata nel browser.");return{latitude:e,longitude:i}}async getModules(){for(var t=Array.from(new Set(this.options.modules||[])),e=[],i=0;i<t.length;i++){let n=t[i].toString().toLowerCase(),s="modules:"+n;if(n&&!this.remoteFileLoaded[s]&&!this.remoteFileLoading[s]){this.remoteFileLoading[s]=!0,this.remoteFileLoaded[s]=!1;var r=this.script_origin+tp_modules_path.replace("%s",n);e.push({module:n,promise:this.fetch(r)})}}return(await Promise.allSettled(e.map(t=>t.promise))||[]).forEach((t,i)=>{let r="modules:"+e[i].module;this.remoteFileLoading[r]=!1,"fulfilled"==t.status?(new Function(t.value).bind(this)(),this.remoteFileLoaded[r]=!0):(this.log(t),this.remoteFileLoaded[r]=!1)}),!0}async getRemoteConfig(){var t=this.options.publisher&&this.publisherId?this.publisherId:this.providerId;t||(this.log("TNC - Waiting for ProviderID"),t=await new Promise(t=>this.observer(this,"providerId",t)));var e=config_path_tpl.replace("%s",t);let i=await this.fetch(this.script_origin+e);return new Function(i).bind(this)(),"function"==typeof this.config.callback&&(this.config.callback._id=this.sha256(this.config.callback.toString()),this.callback=this.config.callback),"function"==typeof this.config.prepare&&(this.config.prepare._id=this.sha256(this.config.prepare.toString()),this.prepare=this.config.prepare),this.options={...this.config,...this.options||{},debug:this.options.debug||this.config.debug},this.options.publisher&&this.options.PublisherID&&(this.providerId=this.getProviderIDByDomain(this.options.PublisherID)),this.options}get ProviderID(){return this.providerId}set ProviderID(t){this.providerId=t}getDidomiTCF(t=2e3){return new Promise((e,i)=>{var r={cmpid:"",gdpr:"",gdpr_pd:"",gdpr_ver:"",tcString:"",vendors:[]},n=setTimeout((function(){e(r)}),t);try{window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(t){clearTimeout(n);let i=t.getUserStatus();e({cmpid:"7",gdpr:"1",gdpr_pd:"0",gdpr_ver:"2",tcString:i.consent_string,vendors:Array.from(i.vendors.consent.enabled.filter(t=>!isNaN(t)))})}))}catch(t){clearTimeout(n),i(t)}})}getProviderIDByDomain(t){if(!t)throw"missing publisherId";var e;return window.location.hostname&&!window.location.hostname.match(/^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/gim)&&(e=window.location.hostname.replace(/^www\.|[\.]+$/gim,"")),e?this.md5uuid(e+t):t}async getTCF(){if(!!!(this.options||{}).tcf)return{};var t=[],e=arguments.length&&"string"==typeof arguments[0]&&""!==arguments[0].trim()?[].shift.call(arguments).trim():"__tcfapi";return Array.from(arguments).forEach(e=>{Array.isArray(e)?t=t.concat(e):isNaN(e)||parseInt(e)!==e||t.push(e)}),new Promise(async i=>{try{let r=setTimeout(()=>i({}),2e3);(await this.waitFor(w,e,2e3))("addEventListener",2,(t,e)=>{var n={cmpid:"",gdpr:"1",gdpr_pd:"0",gdpr_ver:"2",tcString:"",vendors:[]};if(e&&["tcloaded","useractioncomplete"].includes(t.eventStatus)){clearTimeout(r);try{n.cmpid=(t.cmpId||"").toString(),n.gdpr=t.gdprApplies?"1":"0",n.gdpr_pd="0",n.gdpr_ver=(t.tcfPolicyVersion||"2").toString(),n.tcString=t.tcString&&"tcunavailable"!=t.tcString?t.tcString:"",n.vendors=Object.keys(t.vendor.consents).filter(e=>!0===t.vendor.consents[e]).map(t=>+t)}catch(t){console.log(t)}finally{i(n)}}else i(n)},t.length?t:void 0)}catch(t){console.log(t),i({})}})}async getTNCID(){return this.tncid||new Promise(async(t,e)=>{try{let{tncid:e}=await this.on("tncid");this.tncid=e,t(e)}catch(t){e(t)}})}getUserData({tncid:t="",verificationToken:e=""}){let i=`https://ud.tncid.app/getUserData?tncid=${encodeURIComponent(t)}&token=${encodeURIComponent(e)}`;return t&&e?this.fetch(i).then(t=>t.json()):Promise.reject("Missing tncid or verificationToken")}hasherFillData(){return{S2l:this.hasher.email.lowercase.sha256,S2u:this.hasher.email.uppercase.sha256,S1l:this.hasher.email.lowercase.sha1,S1u:this.hasher.email.uppercase.sha1,M5l:this.hasher.email.lowercase.md5,M5u:this.hasher.email.uppercase.md5,S2w:this.hasher.phoneWCC.sha256,S2c:this.hasher.phoneWCC.sha256,S2n:this.hasher.phoneNCC.sha256,S1w:this.hasher.phoneWCC.sha1,S1c:this.hasher.phoneWCC.sha1,S1n:this.hasher.phoneNCC.sha1,M5w:this.hasher.phoneWCC.md5,M5c:this.hasher.phoneWCC.md5,M5n:this.hasher.phoneNCC.md5}}log(...t){this.debug&&this.logName&&console.timeLog(this.logName,...t)}async ids(){let t=await this.getTNCID(),e=await fetch(this.script_origin+"/bd/ids",{headers:{"content-type":"application/json"},method:"post",body:JSON.stringify({tncid:t,providerId:this.providerId,publisherId:this.publisherId})});return await e.json()}async init(){this.log("Init tnc script"),void 0!==w.__tnc_conf&&Array.isArray(w.__tnc_conf)&&(this.conf=w.__tnc_conf);try{this.getConfig(),this.log("Init->getConfig",this.conf),this.log("Init->providerId",this.providerId,"PublisherID",this.publisherId),this.getCacheID().then(t=>{this.log("Init->getCacheID",t)})}catch(t){}if(await this.getRemoteConfig(),this.log("Init->getRemoteConfig",this.options),void 0!==w.__tcfapi&&"function"==typeof w.__tcfapi?this.options.tcf=!0:(this.options.tcf=!1,this.observer(w,"__tcfapi",()=>{this.options.tcf=!0})),await this.getModules(),this.log("Init->getModules",this.modules,this.callback,this.prepare),await this.applyCallbacks(),this.log("Init->applyCallbacks done!"),Array.isArray(this._q)&&this._q.length){for(var t=JSON.parse(JSON.stringify(this.conf));this._q.length;)this.conf=this._q.shift(),await this.sendData();this.conf=t,this.log("Init->sendPendingData done!")}for(this.log("Init->start applying ready queue");(this.readyQueue||[]).length;)this.ready(this.readyQueue.shift());return this.log("Init->end applying ready queue"),this.log("Init->end init"),this}async initData(t,e){if(!this.providerId)throw"TNC JS - missing providerId.";this.log("TNC initData 0");var i=this.providerId,r=(void 0!==t.st&&"undefined"!==t.st&&t.st?t.st:"pageview").toLowerCase(),n=(void 0!==t.ex&&"undefined"!==t.ex&&t.ex?t.ex:"").toString().replace(/^(\_\_|\%\%)[a-z0-9]+(\_\_|\%\%)$/gim,""),s=(void 0!==t.crm&&"undefined"!==t.crm&&t.crm?t.crm:"").toString(),o=(void 0!==t.aid&&"undefined"!==t.aid&&t.aid?t.aid:"").toString(),a=(void 0!==t.sid&&"undefined"!==t.sid&&t.sid?t.sid:"").toString(),h=(void 0!==t.caid&&"undefined"!==t.caid&&t.caid?t.caid:"").toString(),c=(void 0!==t.pid&&"undefined"!==t.pid&&t.pid?t.pid:"").toString(),d=(void 0!==t.adid&&"undefined"!==t.adid&&t.adid?t.adid:"").toString(),l=(void 0!==t.crid&&"undefined"!==t.crid&&t.crid?t.crid:"").toString();void 0!==t.e&&"undefined"!==t.e&&t.e&&(this.hasher.email=t.e),void 0!==t.pc&&"undefined"!==t.pc&&t.pc&&(this.hasher.phoneWCC=t.pc),void 0!==t.pn&&"undefined"!==t.pn&&t.pn&&(this.hasher.phoneNCC=t.pn),this.log("TNC initData 1");let u=await Promise.all([this.getCacheID(),this.getGAID(this.options&&this.options.waitFor&&this.options.waitFor.ga?this.options.waitFor.ga:100),this.getAdobeID(),this.adBlock(),this.audioFP(),this.browserMatch(),this.canvasFP(),this.doNotTrack(),this.fonts(),this.getOrientation(),this.osMatch(),this.pixelRatio(),this.pluginList(),this.touchScreenSupport(),this.webglFP(),this.webglVR(),this.getTCF().then(t=>({gdpr:t}))]);var p=Object.assign({},...u);Object.keys(options.exclude).forEach(t=>{p[t]=null}),this.log("TNC initData 2",p),p.gdpr=p.gdpr||{};var f=navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||null;f=Array.isArray(f)?f.join(","):f;var g=0!==(navigator.languages||[]).indexOf(f),m=Math.min(screen.width,screen.height),v=Math.max(screen.width,screen.height),y=Number(screen.width>screen.height||screen.width===screen.height&&(!p.orientation||p.orientation.indexOf("landscape")>-1)?screen.availHeight:screen.availWidth)||0,b=Number(screen.width>screen.height||screen.width===screen.height&&(!p.orientation||p.orientation.indexOf("landscape")>-1)?screen.availWidth:screen.availHeight)||0,C=v<b||m<y,I=navigator.languages;"string"==typeof I&&""!=I.trim()?I=I.trim().split(","):Array.isArray(I)&&0!=I.length?Array.isArray(I)&&(I=I.flat()):I=[NOT_AVAILABLE];var _=w.Intl&&w.Intl.DateTimeFormat&&(new w.Intl.DateTimeFormat).resolvedOptions().timeZone||null;return e=e.map(t=>(t.N="string"!=typeof t.N?JSON.stringify(t.N):t.N,t.T="string"!=typeof t.T?JSON.stringify(t.T):t.T,t.V="string"!=typeof t.V?JSON.stringify(t.V):t.V,t)),this.data={Lu:navigator.userAgent,Pl:navigator.platform,Bc:navigator.appCodeName,Bn:navigator.appName,Bv:navigator.appVersion,Ce:navigator.cookieEnabled,Bl:f,Bo:navigator.onLine,Je:navigator.javaEnabled(),Ci:navigator.oscpu,Fu:location.href,Sw:v,Sh:m,Cd:screen.colorDepth,...this.hasherFillData(),St:r,Pi:i,Ex:n,Crm:s,Aid:o,Sid:a,Caid:h,Pid:c,Adid:d,Crid:l,ChId:p.CacheID,Gaid:p.GAID||"",Abid:p.AdobeID,Cv:e,Ab:!!w.HTMLElement.prototype.addBehavior,Adb:p.adBlock,Ah:y,Au:p.audioFP,Aw:b,Bls:I,Ca:p.canvas&&p.canvas.length?[this.sha256(p.canvas.join(","))]:[NOT_AVAILABLE],Cc:navigator.cpuClass||NOT_AVAILABLE,Dm:(navigator.deviceMemory||NOT_AVAILABLE).toString(),Dnt:(p.doNotTrack||NOT_AVAILABLE).toString(),Ft:p.fonts&&p.fonts.length?[this.md5(p.fonts.toString())]:[NOT_AVAILABLE],Hc:(navigator.hardwareConcurrency||NOT_AVAILABLE).toString(),Hll:g,Hlr:C,Hlb:!p.browserMatch,Hlo:!p.osMatch,Idb:Object.prototype.hasOwnProperty.call(w,"indexedDB"),Ls:Object.prototype.hasOwnProperty.call(w,"localStorage"),Odb:Object.prototype.hasOwnProperty.call(w,"openDatabase"),Or:p.orientation,Pg:this.md5(p.plugins.toString().replace(/Microsoft Edge PDF/gm,"Chrome PDF")),Pr:p.pixelRatio,Ss:Object.prototype.hasOwnProperty.call(w,"sessionStorage"),To:+(new Date).getTimezoneOffset()||0,Ts:p.touchScreenSupport,Tz:_,Wgl:p.webgl&&p.webgl.length?[this.md5(p.webgl.toString())]:[NOT_AVAILABLE],Wvr:p.webglVR?this.md5(p.webglVR):"",Wd:(navigator.webdriver||NOT_AVAILABLE).toString(),gdpr:(p.gdpr.gdpr||"0").toString(),gdpr_consent:(p.gdpr.gdpr_consent||p.gdpr.tcString||"").toString(),gdpr_pd:(p.gdpr.gdpr_pd||"0").toString(),gdpr_ver:(p.gdpr.gdpr_ver||"").toString(),cmpid:(p.gdpr.cmpid||"").toString()},this.data.Pg=Array.isArray(this.data.Pg)?(this.data.Pg||[]).join():this.data.Pg,this.data.Ts=Array.isArray(this.data.Ts)?(this.data.Ts||[]).join():this.data.Ts,this.data}async isClient(){if(void 0!==this.isClient._value)return this.isClient._value;let t=await this.ids()||[],{value:e}=t.find(t=>"externaluid"==t.name||"crmid"==t.name)||{};return this.isClient._value=!!e,this.isClient._value}loadImage(t,e,i){return new Promise((function(r,n){try{var s=null!=e&&"object"==typeof e&&Object.keys(e).length,o=s?document.createElement("img"):new Image;i=i&&i instanceof HTMLElement&&i.appendChild?i:document.querySelector("body"),o.onload=function(){r(o)},o.onerror=n,e=s?{...e,src:t}:{},Object.keys(e).forEach(t=>{try{o.setAttribute(t,e[t])}catch(t){}}),s?i.appendChild(o):o.src=t}catch(t){n(t)}}))}loadIMG(t,e,i){return this.loadImage(t,e,i)}async loadScript(src,id){let text="";try{return text=await this.fetch(src),eval(text),!0}catch(t){let e=new RegExp("\\}\\.bind\\(this\\)\\)\\(([^\\)]*)\\);?$","img");return text=text.trim().replace(e,`}.bind(window.${global}))($1);`),!!text&&new Promise((function(t,e){try{var i=document.createElement("script");i.id=id,i.async=!0,i.innerHTML=text,i.onload=()=>t(i),i.onerror=e,document.querySelector("head,body").appendChild(i),setTimeout(()=>t(i),0)}catch(t){e(t)}})).catch(t=>console.log("Script load error for "+src,t))}}off(){if(reservedEvents.includes(arguments[0]||null)&&!(arguments.length>1))throw"Error. Attempt to detach a reserved event without providing a specific event listener.";return emitter.off(...arguments),this}on(){let t=emitter.on(...arguments);return t===emitter?this:t}async ready(t){return"function"==typeof t&&t(),this}reload(){return this.load(global)}async load(t="",e="",i={}){let r=this.script_origin;return t=t||global,i="object"==typeof i&&null!==i&&Object.keys(i).length?i:w[global].options,w[t]=t==global?await this.reset():{providerId:i.publisher&&w[global].publisherId?w[global].publisherId:e||w[global].providerId,options:i,cacheid:w[global].cacheid},function(t,e,i,n,s){t[i]=t[i]||{},t[i].providerId=n,t[i].options=t[i].options||s;var o="ready";t[i][o]=t[i][o]||function(e){return t[i][o].q=t[i][o].q||[],"function"==typeof e?(t[i][o].q.push(e),t[i]):new Promise(e=>{t[i][o].q.push(e)})};var a=e.createElement("script");a.setAttribute("global",i),a.async=!0,a.src=r+"/tnc.min.js",e.querySelector("head,body").appendChild(a)}(w,d,t,w[t].providerId,w[t].options),w[t]}async reset(){this.logName&&console.timeEnd(this.logName);var t=new URL(this.script_origin).hostname;return w[global]={providerId:this.options.publisher&&this.publisherId?this.publisherId:this.providerId,cacheid:this.cacheid,options:this.options},Array.from(document.querySelectorAll('script[src^="tnc_"],script[src*="//'+t+'"]')).forEach(t=>(console.log(t.src),t.parentNode.removeChild(t))),w[global]}async sendData(t,e){try{await this.wait(this,"config"),await this.wait(this.config,"PublisherID"),e="object"==typeof e&&null!==e?e:{},this.options.PublisherID&&(e.PublisherID=this.options.PublisherID),this.options.publisher&&(e.IsPublisher=!0),w.document.referrer&&(e.Referrer=w.document.referrer);var i=window.location.hostname||"";if(i.includes("googlesyndication.com")||i.includes(".translate.goog"))return!0;if(t=null!=t?t:this.UUID(),this.eid=t,this.sent[t])return console.log("TNC - Duplicated event ignored."),!0;if(this.getConfig(),this.getGDPRConsentString(),void 0===this.conf||!this.conf.length)throw Error(Errors.MISSING_CONF);for(;this.conf.length>1;){var r=this.conf.splice(1,1)[0];"object"==typeof r&&null!==r&&this.addCustomVariable(r.n,r.t,r.v)}var n=window.location.search.replace(/^.*[\?\&]+Eid=([^&]+).*$/gim,"$1");""!==n&&n!==window.location.search&&this.addCustomVariable("parent_eid","string",n),await this.applyPrepares();let c=JSON.parse(JSON.stringify(this.getCustomVariables())),d=this.mainConf;if(this.clearCustomVariables(),await this.initData(d,c),this.data.Eid=t,this.data.V=this.version,!this.data.Pi)throw new Error("Missing ProviderID");var s=new AbortController;this.abort(s),emitter.emit("abortable",s);let l=[],u=Object.values(this.vendors);for(var o=0,a=u.length;o<a;o++){let t=u[o],e=await t.VendorDeviceUID;e&&(t.VendorDeviceUID=e,t.status=this.vendors.statuses.ID_MATCH_ENDED,t=JSON.parse(JSON.stringify(t)),delete t.value,l.push(JSON.parse(JSON.stringify(t))))}l.length&&(e.vendors=l);let p=JSON.parse(JSON.stringify({data:this.data,...e}));this.log("FinalData.vendors",p.vendors);let f,g,m=await this.fetch(this.bd_url.replace(/\?.*$/,""),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:this.btoa(p.data),...e}),mode:"cors",credentials:"include",controller:s,signal:s.signal});if(this.abort(s),"object"==typeof m&&m.hasOwnProperty("ok")&&!m.ok)throw new Error(m);try{var h;switch(!0){case m&&m.response&&"object"==typeof m.response:h=m.response;break;case m&&m.response:h=JSON.parse(m.response);break;case m&&"object"==typeof m:h=m;break;case!!m:h=JSON.parse(m);break;default:h={}}void 0!==h.tncid&&(g=h.tncid,h.cacheid&&h.cacheid!==this.cacheid&&(this.cacheid=h.cacheid)),f=h.verificationToken||"",this.counters=h}catch(t){console.warn(t,"Unknown TNCID")}if(!g)throw Error(Errors.MISSING_TNCID);this.sent[t]={...p,eid:t,tncid:g,cacheid:this.cacheid,timestamp:new Date},this.tncid=g,Object.values(this.vendors).forEach(async e=>{e.sync({eid:t,tncid:g}),await e.wait(this.vendors.statuses.SYNC_ENDED),e.idmatch({eid:t,tncid:g}),await e.wait(this.vendors.statuses.ID_MATCH_ENDED)});let v={eid:t,cacheid:this.cacheid,tncid:this.tncid,...!1,...f&&{verificationToken:f}};return emitter.emit("data-sent",v),await this.applyCallbacks(this.sent[t]),v}catch(t){if(t&&t.toString().replace("Error: ","")==Errors.MISSING_CONF)return null;throw t}}setConfig(){try{var t=this.getConfig(),e=t[0],i=Array.from(arguments),r=i.shift(),n=i.length?i[0]:void 0;if("object"!=typeof r||null===r||Array.isArray(r)){if(void 0!==n&&("string"==typeof r&&r||!isNaN(r))){var s=r,o=n;o="object"==typeof o?JSON.parse(JSON.stringify(o)):o,e[s]=o}}else{var a=JSON.parse(JSON.stringify(r));e={...e,...a},t[0]=e}this.mainConf=e}catch(t){}return t}setCookie(t,e,i,r){let n,s,o,a;"object"==typeof t&&null!==t&&(({name:t,value:e,domain:i,duration:s,expires:a,expire:o,firstParty:n}=t),r=void 0!==s?s:void 0!==a?a:o),i&&!n||(i="."+("."+window.location.hostname).split(".").slice(-2).join("."));const h=new Date;h.setTime(h.getTime()+24*r*60*60*1e3);let c=0==window.location.protocol.indexOf("https")?";SameSite=none;Secure":"";return document.cookie=`${t}=${encodeURIComponent(e)};domain=${encodeURIComponent(i||"")};expires=${h.toUTCString()};path=/${c}`,e}sleep(t){return sleep(t)}wait(){return this.waitFor.call(this,...arguments)}observer(t,e,i){try{if(null==t)throw"undefined or null object";const r=Object.getOwnPropertyDescriptor(t,e);if(r&&void 0!==r.value&&null!==r.value)return void i(r.value);Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:()=>r?r.value:void 0,set(n){r&&"function"==typeof r.set?r.set(n):(delete t[e],t[e]=n),i(n)}})}catch(t){this.log(t)}}async waitFor(t,e,i){if(null==t)throw"undefined or null object";return void 0!==t[e]?t[e]:new Promise((r,n)=>{let s;void 0!==typeof i&&Number.isInteger(i)&&(s=setTimeout(()=>n("waiting for "+e+" dismissed."),i)),this.observer(t,e,t=>{try{clearTimeout(s)}catch(t){}r(t)})})}btoa(t){"undefined"!=typeof Buffer&&null!==Buffer&&"function"==typeof Buffer.from&&(b64=Buffer.from(String.fromCharCode(...b),"ascii").toString("base64"));try{t instanceof Uint8Array||(t=(new TextEncoder).encode("string"==typeof t?t:JSON.stringify(t)));for(var e=[],i=new Uint8Array(t),r=0,n=i.byteLength;r<n;r++)e.push(String.fromCharCode(i[r]));return btoa(e.join(""))}catch(t){this.log(t)}}atob(t){try{return(new TextDecoder).decode(Uint8Array.from(atob(t),t=>t.charCodeAt(0)))}catch(t){this.log(t)}}UUID(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,this.UUID)}isUUID(t=""){return"string"==typeof t&&36==t.length&&t.match(/^[a-z0-9]{8}\-([a-z0-9]{4}\-){3}[a-z0-9]{12}$/gim)}md5(t){return md5(t)}md5uuid(t){return(32!=(t=null!=t?"string"==typeof t?t:JSON.stringify(t):"").length||t.replace(/[a-z0-9]+/gim,"").length>0)&&(t=md5(t)),t.replace(/([a-z0-9]{8})([a-z0-9]{4})([a-z0-9]{4})([a-z0-9]{4})([a-z0-9]{12})/gim,"$1-$2-$3-$4-$5")}sha1(t){return sha1(t)}sha256(t){return sha256(t)}get lz(){return lz}get TNCEventEmitter(){return TNCEventEmitter}}w[global]=new TNC(void 0!==w[global]?w[global]:{}),Object.defineProperty(w,"__tnc_eid",{configurable:!0,get:()=>w[global].eid,set(t){w[global].eid=t}}),w.__tnc_push_cv=w[global].addCustomVariable.bind(w[global]),w.__tnc_send_data=w[global].sendData.bind(w[global]);try{var tnc=w[global];await tnc.init(),tnc.log("Script loaded."),(void 0===tnc.options||void 0===tnc.options.autostart||tnc.options.autostart)&&(tnc.log("Initiating first automatic hit"),await tnc.sendData(),tnc.log("First automatic hit completed."))}catch(t){console.log(t)}w.__tncFunc=function(t,e,...i){try{return w[t][e](...i)}catch(t){console.log(t)}}}(window,document);